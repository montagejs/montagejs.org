montageDefine("089b576","core/converter/number-converter",{dependencies:["montage","core/converter/converter"],factory:function(e,n){e("montage").Montage;var t=e("core/converter/converter").Converter,s=e("core/converter/converter").Validator,a=e("core/converter/converter").isNumber,o=e("core/converter/converter").isDef,i=/^([\-]?\d+\.?\d*)([K,M,G,T,P,k,m,u,n]?)[B]?$/,r=["P","T","B","M","K","","m","u","n"],l=n.NUMERIC_SCALES_SI_={"":1,n:1e-9,u:1e-6,m:.001,k:1e3,K:1e3,M:1e6,B:1e9,T:1e12,P:1e15},p=n.NUMERIC_SCALES_BINARY_={"":1,n:Math.pow(1024,-3),u:Math.pow(1024,-2),m:1/1024,k:1024,K:1024,M:Math.pow(1024,2),G:Math.pow(1024,3),T:Math.pow(1024,4),P:Math.pow(1024,5)},c=n._numericValueToString=function(e,n,t,s,a){a=a||r;var i=e,l="",p=1;0>e&&(e=-e);for(var c=0;a.length>c;c++){var d=a[c];if(p=n[d],e>=p||1>=p&&e>.1*p){l=d;break}}l?s&&(l+=s):p=1;var h=Math.pow(10,o(t)?t:2);return Math.round(i/p*h)/h+l},d=function(e,n){var t=e.match(i);return t?t[1]*n[t[2]]:0/0};n.stringToNumericValue=function(e){return e.endsWith("B")?d(e,p):d(e,l)};var h=n.numericValueToString=function(e,n){return c(e,l,n)},u=n.NumberValidator=s.specialize({allowFloat:{value:!0},allowNegative:{value:!0},validate:{value:function(e){var n;return e=e||"",e=e.replace(/,/g,""),n=a(e)?e:this.allowFloat===!0?parseFloat(e,10):parseInt(e,10),isNaN(n)?{message:"Invalid Number"}:n}}});n.NumberConverter=t.specialize({allowPartialConversion:{value:!1},validator:{value:new u},shorten:{value:null},decimals:{value:2},round:{value:null},_reg:{value:/(\d+)(\d{3})/},allowFloat:{value:!0},allowNegative:{value:!0},_makeReadable:{value:function(e,n,t){n=n||",",t=t||".";for(var s=(""+e).split("."),a=s[0],o=s.length>1?t+s[1]:"";this._reg.test(a);)a=a.replace(this._reg,"$1"+n+"$2");return a+o}},convert:{value:function(e){if(this.shorten)return h(e,this.decimals);var n;if(this.round)n=""+Number(Math.round(e));else{var t=Math.pow(10,this.decimals||2),s=1;n=Number(Math.round(e/s*t)/t)}return this._makeReadable(n)}},revert:{value:function(e){this.validator.allowFloat=this.allowFloat,this.validator.allowNegative=this.allowNegative;var n=this.validator.validate(e);if(a(n))return n;throw Error(n.message)}}})}});