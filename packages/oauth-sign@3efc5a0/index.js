function sha1(e,t){return crypto.createHmac("sha1",e).update(t).digest("base64")}function rfc3986(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27")}function hmacsign(e,t,n,r,i){var s=Object.keys(n).sort().map(function(e){return escape(rfc3986(e))+"%3D"+escape(rfc3986(n[e]))}).join("%26"),o=[e?e.toUpperCase():"GET",rfc3986(t),s].join("&"),u=[r,i||""].map(rfc3986).join("&");return sha1(u,o)}var crypto=require("crypto"),qs=require("querystring");exports.hmacsign=hmacsign,exports.rfc3986=rfc3986