montageDefine("9f5dbee","compile-assigner",{dependencies:["./compile-evaluator","./algebra","./scope"],factory:function(e,t,n){function a(e){return a.semantics.compile(e)}var s=e("./compile-evaluator"),r=e("./algebra"),i=e("./scope"),o={type:"value"},l={type:"literal",value:!0},c={type:"literal",value:!1};n.exports=a,a.semantics={compile:function(e){var t=this.compilers;if("equals"===e.type){var n=this.compile(e.args[0]),a=this.compileEvaluator(e.args[1]);return t.equals(n,a)}if("if"===e.type){var s=this.compileEvaluator(e.args[0]),i=this.compile(e.args[1]),l=this.compile(e.args[2]);return t["if"](s,i,l)}if("and"===e.type||"or"===e.type){var c=r(e.args[0],o),p=r(e.args[1],o),u=this.compileEvaluator(e.args[0]),a=this.compileEvaluator(e.args[1]),h=this.compileEvaluator(c[1]),d=this.compileEvaluator(p[1]),n=this.compile(c[0]),m=this.compile(p[0]);return t[e.type](n,m,u,a,h,d)}if("everyBlock"===e.type){var g=this.compileEvaluator(e.args[0]),f=r(e.args[1],{type:"literal",value:!0}),v=this.compile(f[0]),b=this.compileEvaluator(f[1]);return t.everyBlock(g,v,b)}if(t.hasOwnProperty(e.type)){var y=e.args.map(this.compileEvaluator,this.compileEvaluator.semantics);return t[e.type].apply(null,y)}throw Error("Can't compile assigner for "+JSON.stringify(e.type))},compileEvaluator:s,compilers:{property:function(e,t){return function(n,a){var s=e(a);if(s){var r=t(a);null!=r&&(Array.isArray(s)?s.set(r,n):s[r]=n)}}},get:function(e,t){return function(n,a){var s=e(a);if(s){var r=t(a);null!=r&&s.set(r,n)}}},has:function(e,t){return function(n,a){var s=e(a);if(s){var r=t(a);null!=n&&(n?(s.has||s.contains).call(s,r)||s.add(r):(s.has||s.contains).call(s,r)&&(s.remove||s["delete"]).call(s,r))}}},equals:function(e,t){return function(n,a){return n?e(t(a),a):void 0}},"if":function(e,t,n){return function(a,s){var r=e(s);if(null!=r)return r?t(a,s):n(a,s)}},and:function(e,t,n,a,s,r){return function(i,o){null!=i&&(i?(e(s(l),o),t(r(l),o)):e(n(o)&&!a(o),o))}},or:function(e,t,n,a,s,r){return function(i,o){null!=i&&(i?e(n(o)||!a(o),o):(e(s(c),o),t(r(c),o)))}},rangeContent:function(e){return function(t,n){var a=e(n);a&&(t?a.swap(0,a.length,t):a.clear())}},mapContent:function(e){return function(t,n){var a=e(n);a&&(a.clear(),n.value&&a.addEach(t))}},reversed:function(e){return function(t,n){var a=e(n);a&&a.swap(0,a.length,t.reversed())}},everyBlock:function(e,t,n){return function(a,s){if(a){var r=e(s),o=n(s);r.forEach(function(e){t(o,i.nest(s,e))})}}}}}}});