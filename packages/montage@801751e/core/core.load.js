montageDefine("801751e","core/core",{dependencies:["collections/shim","core/shim/object","core/shim/array","core/shim/string","core/extras/object","core/extras/date","core/extras/element","core/extras/function","core/extras/regexp","core/extras/string","core/uuid","collections/listen/property-changes","core/bindings","core/paths","core/serialization/bindings","core/promise"],factory:function(e,n){function s(e,n){var o=a+n+t;return e.hasOwnProperty(o)?e[o]:Object.defineProperty(e,o,{enumerable:!1,configurable:!1,writable:!0,value:Object.create(s(Object.getPrototypeOf(e),n))})[o]}e("collections/shim"),e("core/shim/object"),e("core/shim/array"),e("core/shim/string"),e("core/extras/object"),e("core/extras/date"),e("core/extras/element"),e("core/extras/function"),e("core/extras/regexp"),e("core/extras/string");var t="AttributeProperties",a="_",o="__proto__",i="value",r="enumerable",l="distinct",p="serializable",c=Array.prototype,d=Object.prototype,h=!0,u=n.Montage=function u(){};u.deprecate=function(e,n,s,t){var a=function(){var a=Error.stackTraceLimit;return Error.stackTraceLimit=2,"undefined"!=typeof console&&"function"==typeof console.warn&&(t?console.warn(s+" is deprecated, use "+t+" instead.",Error("").stack):console.warn(s,Error("").stack)),Error.stackTraceLimit=a,n.apply(e?e:this,arguments)};return a.deprecatedFunction=n,a},u.callDeprecatedFunction=function(e,n,s,t){var a,o,i=Error.stackTraceLimit;return Error.stackTraceLimit=2,"undefined"!=typeof console&&"function"==typeof console.warn&&(a=u.getInfoForObject(e).objectName,t?console.warn(s+" is deprecated, use "+t+" instead.",a):console.warn(s,a)),Error.stackTraceLimit=i,o=c.slice.call(arguments,4),n.apply(e?e:this,o)};var m={}.__proto__===Object.prototype,g={_montage_metadata:1,__state__:1},f=Object.getOwnPropertyNames(Function);if(Object.defineProperty(u,"specialize",{value:function(e,n){var s,t,a,o,i,r,l,p=this,c=this.specialize===void 0;if(e=e||Object.empty,n=n||Object.empty,s=e.constructor&&e.constructor.value?e.constructor.value:e.didCreate&&e.didCreate.value?u.deprecate(null,e.didCreate.value,"didCreate","constructor"):function(){return p.apply(this,arguments)||this},m)s.__proto__=p;else{a=Object.getOwnPropertyNames(p);for(var r=0;a.length>r;r++)o=a[r],g.hasOwnProperty(o)||(i=Object.getOwnPropertyDescriptor(s,o),(!i||i.configurable)&&u.defineProperty(s,o,Object.getOwnPropertyDescriptor(p,o)));s.__constructorProto__=p,u.defineProperty(s,"isPrototypeOf",{value:function(e){for(;null!==e;){if(Object.getPrototypeOf(e)===this)return!0;e=Object.getPrototypeOf(e)}return!1},enumerable:!1})}if(t=Object.create(this.prototype),c){for(a=Object.getOwnPropertyNames(u),r=0;a.length>r;r++)o=a[r],i=Object.getOwnPropertyDescriptor(s,o),(!i||i.configurable)&&u.defineProperty(s,o,Object.getOwnPropertyDescriptor(u,o));for(a=Object.getOwnPropertyNames(u.prototype),r=0;a.length>r;r++)o=a[r],i=Object.getOwnPropertyDescriptor(s,o),(!i||i.configurable)&&u.defineProperty(t,o,Object.getOwnPropertyDescriptor(u.prototype,o))}if(u.defineProperties(t,e),h){l=function(e,n,s){function t(){return this===n&&console.warn("Deprecated - "+u.getInfoForObject(n).objectName+"."+s+" should be moved to constructorProperties"),e.apply(this,arguments)}return t.deprecatedFunction=e,t};for(o in e)f.has(o)?delete e[o]:(i=e[o],i.value&&"function"==typeof i.value&&!i.value.__isConstructor__?i.value=l(i.value,s,o):(i.get&&(i.get=l(i.get,s,o)),i.set&&(i.set=l(i.set,s,o))));u.defineProperties(s,e),u.defineProperty(s,"create",{value:function(){return new s},enumerable:!1}),t.hasOwnProperty("didCreate")||u.defineProperty(t,"didCreate",{value:s,enumerable:!1}),s.hasOwnProperty("didCreate")||u.defineProperty(s,"didCreate",{value:s,enumerable:!1})}return u.defineProperties(s,n),u.defineProperty(s,"__isConstructor__",{value:!0,enumerable:!1}),s.prototype=t,u.defineProperty(t,"constructor",{value:s,enumerable:!1}),s},writable:!0,configurable:!0,enumerable:!1}),!m){var v=Object.getPrototypeOf;Object.getPrototypeOf=function(e){return"function"==typeof e&&e.__constructorProto__?e.__constructorProto__:v.apply(Object,arguments)}}Object.defineProperty(u,"create",{configurable:!0,value:function(e,n){if(void 0!==e&&"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object prototype may only be an Object or null, not '"+e+"'");if(e=e===void 0?this:e,"function"==typeof e)return n?e.specialize(n):new e;var s=Object.create(e);return n&&u.defineProperties(s,n),s}});var b=[p];b.forEach(function(e){Object.defineProperty(Object.prototype,a+e+t,{enumerable:!1,configurable:!1,writable:!0,value:{}})}),Object.defineProperty(u,"defineProperty",{value:function(e,n,t){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object must be an object, not '"+e+"'");var h=i in t;if(l in t&&!h)throw"Cannot use distinct attribute on non-value property '"+n+"'";if(o in t)t.__proto__=h?"function"==typeof t.value?_:w:y;else{var u;u=h?"function"==typeof t.value?_:w:y;for(var m in u)m in t||(t[m]=u[m])}return t.hasOwnProperty(r)||n.charAt(0)!==a||(t.enumerable=!1),t.hasOwnProperty(p)||(t.enumerable?t.get&&!t.set?t.serializable=!1:t.writable===!1&&(t.serializable=!1):t.serializable=!1),p in t&&(s(e,p)[n]=t.serializable),t.distinct!==!0||"object"!=typeof t.value?Object.defineProperty(e,n,t):(function(e,n,s,t){var a=function(e,n,s){Object.defineProperty(e,n,{enumerable:!1,configurable:!0,writable:!0,value:s})};s.constructor===Object&&Object.getPrototypeOf(s)===d?0!==Object.keys(s).length?Object.defineProperty(t,e,{configurable:!0,get:function(){var e=this[n];if(!e){var t;e={};for(t in s)e[t]=s[t];this.hasOwnProperty(n)?this[n]=e:a(this,n,e)}return e},set:function(e){this.hasOwnProperty(n)?this[n]=e:a(this,n,e)}}):Object.defineProperty(t,e,{configurable:!0,get:function(){var e=this[n];return e||(e={},this.hasOwnProperty(n)?this[n]=e:a(this,n,e)),e},set:function(e){this.hasOwnProperty(n)?this[n]=e:a(this,n,e)}}):(s.__proto__||Object.getPrototypeOf(s))===c?0!==s.length?Object.defineProperty(t,e,{configurable:!0,get:function(){var e=this[n];if(!e){var t,o;for(e=[],t=0;(o=s[t])!==void 0;t++)e[t]=o;this.hasOwnProperty(n)?this[n]=e:a(this,n,e)}return e},set:function(e){this.hasOwnProperty(n)?this[n]=e:a(this,n,e)}}):Object.defineProperty(t,e,{configurable:!0,get:function(){var e=this[n];return e||(e=[],this.hasOwnProperty(n)?this[n]=e:a(this,n,e)),e},set:function(e){this.hasOwnProperty(n)?this[n]=e:a(this,n,e)}}):s.constructor.prototype===Object.getPrototypeOf(s)?Object.defineProperty(t,e,{configurable:!0,get:function(){var e=this[n];if(!e){var t;e=new s.constructor;for(t in s)e[t]=s[t];this.hasOwnProperty(n)?this[n]=e:a(this,n,e)}return e},set:function(e){this.hasOwnProperty(n)?this[n]=e:a(this,n,e)}}):Object.defineProperty(t,e,{configurable:!0,get:function(){var e=this[n];return e||(e=Object.create(s.__proto__||Object.getPrototypeOf(s)),this.hasOwnProperty(n)?this[n]=e:a(this,n,e)),e},set:function(e){this.hasOwnProperty(n)?this[n]=e:a(this,n,e)}})}(n,a+n,t.value,e),void 0)}}),Object.defineProperty(u,"defineProperties",{value:function(e,n){if("object"!=typeof n||null===n)throw new TypeError("Properties must be an object, not '"+n+"'");for(var s in n)"_bindingDescriptors"!==s&&this.defineProperty(e,s,n[s]);return e}});var y={enumerable:!0,configurable:!0,serializable:!0},w={writable:!0,enumerable:!0,configurable:!0,serializable:"reference"},_={writable:!0,enumerable:!1,configurable:!0,serializable:!1};u.defineProperty(u,"didCreate",{value:Function.noop});var x=function(e,n){for(var s,t,a,o,i,r,l,p;l===void 0&&null!==e;){for(s=Object.getOwnPropertyNames(e),o=0,i=s.length,o;i>o;o++)if(t=s[o],a=Object.getOwnPropertyDescriptor(e,t),null!=(r=a.value)){if(r===n||r.deprecatedFunction&&r.deprecatedFunction===n){p=Object.getPropertyDescriptor(Object.getPrototypeOf(e),t),l=p?p.value:null;break}}else if(null!=(r=a.get)){if(r===n||r.deprecatedFunction&&r.deprecatedFunction===n){p=Object.getPropertyDescriptor(Object.getPrototypeOf(e),t),l=p?p.get:null;break}}else if(null!=(r=a.set)&&(r===n||r.deprecatedFunction&&r.deprecatedFunction===n)){p=Object.getPropertyDescriptor(Object.getPrototypeOf(e),t),l=p?p.set:null;break}e=Object.getPrototypeOf(e)}return l},j=function(){var e=x(this,j.caller);return"function"==typeof e?x(this,j.caller).bind(this):Function.noop};u.defineProperty(u,"super",{get:j}),u.defineProperty(u.prototype,"super",{get:j}),u.defineProperty(u,"getSerializablePropertyNames",{value:function(e){var n=[],s=e._serializableAttributeProperties;if(s)for(var t in s)s[t]&&n.push(t);return n}}),u.defineProperty(u,"getPropertyAttribute",{value:function(e,n,s){var o=a+s+t,i=e[o];return i?i[n]:void 0}}),u.defineProperty(u,"getPropertyAttributes",{value:function(e,n){var s={},o=a+n+t,i=e[o];if(i){for(var r in i)s[r]=i[r];return s}}});var E={isInstance:{value:!0}},k={objectName:{value:"Function"},isInstance:{value:!0}};u.defineProperty(u,"getInfoForObject",{value:function(e){var n,s;if(M.call(e,"_montage_metadata"))return e._montage_metadata;n=e._montage_metadata||e.constructor&&e.constructor._montage_metadata||null,s=e.constructor===Function?k:E;try{return Object.defineProperty(e,"_montage_metadata",{enumerable:!1,writable:!0,value:Object.create(n,s)})._montage_metadata}catch(t){return e._montage_metadata=Object.create(n,s)}}});var T=e("core/uuid");"undefined"!=typeof window&&(window.uuid=T.generate());var M=Object.prototype.hasOwnProperty,P=function(){var e=T.generate(),n=u.getInfoForObject(this);try{null!==n&&n.isInstance===!1?(this._uuid=e,Object.defineProperty(this,"uuid",{get:function(){return this.hasOwnProperty("uuid")?this._uuid:P.call(this)}})):(n.isInstance&&Object.defineProperty(this,"uuid",{configurable:!0,enumerable:!1,writable:!1,value:e}),!(this instanceof Element)&&n.isInstance&&i in(Object.getOwnPropertyDescriptor(this,"uuid")||{})&&o in this||(this._uuid=e))}catch(s){this._uuid=e}return e},O=function O(){return M.call(this,"_uuid")?this._uuid:P.call(this)};Object.defineProperty(Object.prototype,"_uuid",{enumerable:!1,value:null,writable:!0}),Object.defineProperty(Object.prototype,"uuid",{configurable:!0,get:O,set:function(){}}),u.defineProperty(u,"identifier",{value:null,serializable:!0}),u.defineProperty(u.prototype,"identifier",{value:null,serializable:!0}),u.defineProperty(u.prototype,"equals",{value:function(e){return e?this===e||this.uuid===e.uuid:!1}}),u.defineProperty(u,"equals",{value:u.prototype.equals}),u.defineProperty(u.prototype,"callDelegateMethod",{value:function(e){var n,s,t=this.delegate;return"string"==typeof this.identifier&&(n=this.identifier+e.toCapitalized(),t&&"function"==typeof(s=t[n]))?(c.shift.call(arguments),s.apply(t,arguments)):t&&"function"==typeof(s=t[e])?(c.shift.call(arguments),s.apply(t,arguments)):void 0}});var S=e("collections/listen/property-changes");Object.addEach(u,S.prototype),Object.addEach(u.prototype,S.prototype),e("core/bindings"),e("core/paths"),e("core/serialization/bindings"),n._blueprintModuleIdDescriptor={serializable:!1,enumerable:!1,get:function(){var e=u.getInfoForObject(this),n=e&&!e.isInstance?this:this.constructor;if(!Object.getOwnPropertyDescriptor(n,"_blueprintModuleId")||!n._blueprintModuleId){e=u.getInfoForObject(n);var s=e.moduleId,t=s.lastIndexOf("/"),a=s.lastIndexOf(".");t=-1===t?0:t+1,a=-1===a?s.length:a,a=t>a?s.length:a,u.defineProperty(n,"_blueprintModuleId",{enumerable:!1,value:s.slice(0,a)+".meta"})}return n._blueprintModuleId}},n._blueprintDescriptor={serializable:!1,enumerable:!1,get:function(){var s=u.getInfoForObject(this),t=s&&!s.isInstance?this:this.constructor;if(!Object.getOwnPropertyDescriptor(t,"_blueprint")||!t._blueprint){var a=t.blueprintModuleId;if(""===a)throw new TypeError("Blueprint moduleId undefined for the module '"+JSON.stringify(t)+"'");n._blueprintDescriptor.BlueprintModulePromise||(n._blueprintDescriptor.BlueprintModulePromise=e.async("core/meta/blueprint").get("Blueprint")),u.defineProperty(t,"_blueprint",{enumerable:!1,value:n._blueprintDescriptor.BlueprintModulePromise.then(function(e){var n=u.getInfoForObject(t);return e.getBlueprintWithModuleId(a,n.require).fail(function(){var n=e.createDefaultBlueprintForObject(t);return n.blueprintInstanceModuleId=a,n})})})}return t._blueprint},set:function(n){var s,t=u.getInfoForObject(this),a=t&&!t.isInstance?this:this.constructor;if(null===n)s=null;else{if("function"==typeof n.then)throw new TypeError("Object blueprint should not be a promise '"+JSON.stringify(n)+"'");n.blueprintInstanceModuleId=a.blueprintModuleId,s=e("core/promise").Promise.resolve(n)}u.defineProperty(a,"_blueprint",{enumerable:!1,value:s})}}}});