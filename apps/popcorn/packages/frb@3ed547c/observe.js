function observe(e,t,n){var r;r="function"==typeof n?{change:n}:n,r=r||empty,r.source=e,r.sourcePath=t;var i=r.parameters=r.parameters||e,a=r.document,o=r.components,s=r.beforeChange,l=r.contentChange,u=new Scope(e,null,i,a,o,s),c=parse(t),h=compile(c);return l===!0&&(h=Observers.makeRangeContentObserver(h)),h(autoCancelPrevious(function(t){if(t){if("function"!=typeof l)return r.change.apply(e,arguments);if("function"==typeof l)return t.addRangeChangeListener(l),Observers.once(function(){t.removeRangeChangeListener(l)})}else;}),u)}var parse=require("./parse"),compile=require("./compile-observer"),Observers=require("./observers"),autoCancelPrevious=Observers.autoCancelPrevious,Scope=require("./scope");module.exports=observe;var empty={};