montageDefine("d2712f2","ui/flow.reel/flow",{dependencies:["montage","ui/component","frb/observers","ui/flow.reel/flow-bezier-spline","core/range-controller"],factory:function(e,t){var n=(e("montage").Montage,e("ui/component").Component),r=e("frb/observers").observeProperty,i=e("ui/flow.reel/flow-bezier-spline").FlowBezierSpline,a=e("core/range-controller").RangeController;t.Flow=n.specialize({constructor:{value:function(){n.constructor.call(this),this._visibleIndexes=[],this._slideOffsets={},this.defineBinding("_numberOfIterations",{"<-":"_frustrumController.content.length"}),this.addOwnPropertyChangeListener("_numberOfIterations",this)}},slotContent:{serializable:!0,value:null},_flowTranslateComposer:{value:null},_scrollingMode:{value:"linear"},scrollingMode:{serializable:!0,get:function(){return this._scrollingMode},set:function(e){switch(e){case"linear":case"drag":this._scrollingMode=e}}},_linearScrollingVector:{value:[-300,0]},linearScrollingVector:{seriazable:!0,get:function(){return this._linearScrollingVector},set:function(e){this._linearScrollingVector=e}},_repetition:{value:null},momentumDuration:{serializable:!0,value:650},_splinePaths:{value:null},splinePaths:{enumerable:!1,get:function(){return this._splinePaths||(this._splinePaths=[]),this._splinePaths},set:function(e){this._splinePaths=e}},_appendPath:{value:function(e){var t,n,r=new i,a=e.knots,o=e.knots.length,s=[],l=[],u=[],c=[];r.parameters={};for(t in e.units)r.parameters[t]={data:[],units:e.units[t]};for(t=0;o>t;t++){s[t]=a[t].knotPosition,u[t]=a[t].previousHandlerPosition,l[t]=a[t].nextHandlerPosition,c[t]=a[t].previousDensity;for(n in e.units)r.parameters[n].data.push(a[t][n])}r.knots=s,r.previousHandlers=u,r.nextHandlers=l,r.densities=c,r._computeDensitySummation(),this.splinePaths.push(r),e.hasOwnProperty("headOffset")||(e.headOffset=0),e.hasOwnProperty("tailOffset")||(e.tailOffset=0),this._paths.push(e),this._updateLength()}},_paths:{value:null},paths:{get:function(){var e,t,n,r,i,a,o,s=this.splinePaths.length,l=[];for(i=0;s>i;i++){for(t=this.splinePaths[i].knots.length,e={knots:[],units:{}},a=0;t>a;a++)r={knotPosition:this.splinePaths[i].knots[a]},this.splinePaths[i].nextHandlers&&this.splinePaths[i].nextHandlers[a]&&(r.nextHandlerPosition=this.splinePaths[i].nextHandlers[a]),this.splinePaths[i].previousHandlers&&this.splinePaths[i].previousHandlers[a]&&(r.previousHandlerPosition=this.splinePaths[i].previousHandlers[a]),this.splinePaths[i].densities&&this.splinePaths[i].densities[a]&&(r.previousDensity=this.splinePaths[i].densities[a],r.nextDensity=this.splinePaths[i].densities[a]),e.knots.push(r);for(a in this.splinePaths[i].parameters)for(e.units[a]=this.splinePaths[i].parameters[a].units,n=this.splinePaths[i].parameters[a].data.length,o=0;n>o;o++)e.knots[o][a]=this.splinePaths[i].parameters[a].data[o];e.headOffset=this._paths[i].hasOwnProperty("headOffset")?this._paths[i].headOffset:0,e.tailOffset=this._paths[i].hasOwnProperty("tailOffset")?this._paths[i].tailOffset:0,l.push(e)}return l},set:function(e){var t,n=e.length;for(this._splinePaths=[],this._paths=[],t=0;n>t;t++)this._appendPath(e[t]);this.needsDraw=!0}},_cameraElement:{value:null},_cameraPosition:{value:[0,0,800]},cameraPosition:{get:function(){return this._cameraPosition},set:function(e){this._cameraPosition=e,this._isCameraUpdated=!0,this.needsDraw=!0}},_cameraTargetPoint:{value:[0,0,0]},cameraTargetPoint:{get:function(){return this._cameraTargetPoint},set:function(e){this._cameraTargetPoint=e,this._isCameraUpdated=!0,this.needsDraw=!0}},_cameraFov:{value:50},cameraFov:{get:function(){return this._cameraFov},set:function(e){this._cameraFov=e,this._isCameraUpdated=!0,this.needsDraw=!0}},_cameraRoll:{value:0},cameraRoll:{get:function(){return this._cameraRoll},set:function(e){this._cameraRoll=e,this._isCameraUpdated=!0,this.needsDraw=!0}},_stride:{value:0},stride:{get:function(){return this._stride},set:function(e){this._stride=e}},_scrollingTransitionDurationMiliseconds:{value:500},_scrollingTransitionDuration:{value:"500ms"},scrollingTransitionDuration:{get:function(){return this._scrollingTransitionDuration},set:function(e){var t,n,r=e+"";r.length,(n=/^(\d+)ms$/.exec(r))?t=+n[1]:(n=/^(\d+)s$/.exec(r))?t=1e3*+n[1]:(t=+r,r+="ms"),isNaN(t)||this._scrollingTransitionDurationMiliseconds===t||(this._scrollingTransitionDurationMiliseconds=t,this._scrollingTransitionDuration=r)}},hasSelectedIndexScrolling:{value:!1},selectedIndexScrollingOffset:{value:0},_handleSelectedIndexesChange:{value:function(e){this.hasSelectedIndexScrolling&&e[0]&&this.startScrollingIndexToOffset(Math.floor(this.contentController.content.indexOf(e[0].object)/this._paths.length),this.selectedIndexScrollingOffset)}},_timingFunctions:{value:{ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]}},_scrollingTransitionTimingFunctionBezier:{value:[.25,.1,.25,1]},_scrollingTransitionTimingFunction:{value:"ease"},scrollingTransitionTimingFunction:{get:function(){return this._scrollingTransitionTimingFunction},set:function(e){var t,n,r=e+"";if(this._timingFunctions.hasOwnProperty(r))this._scrollingTransitionTimingFunction=r,this._scrollingTransitionTimingFunctionBezier=this._timingFunctions[r];else if("cubic-bezier("===r.substr(0,13)&&")"===r.substr(r.length-1,1)&&(t=r.substr(13,r.length-14).split(","),4===t.length)){for(n=0;4>n;n++)if(t[n]-=0,isNaN(t[n]))return;0>t[0]?t[0]=0:t[0]>1&&(t[0]=1),0>t[2]?t[2]=0:t[2]>1&&(t[2]=1),this._scrollingTransitionTimingFunction="cubic-bezier("+t+")",this._scrollingTransitionTimingFunctionBezier=t}}},_computeCssCubicBezierValue:{value:function(e,t){var n,r,i,a=.5,o=.25;for(i=0;20>i;i++)n=a*a,r=1-a,3*(r*r*a*t[0]+r*n*t[2])+n*a>e?a-=o:a+=o,o*=.5;return n=a*a,r=1-a,3*(r*r*a*t[1]+r*n*t[3])+n*a}},_isTransitioningScroll:{value:!1},stopScrolling:{value:function(){this._isTransitioningScroll=!1}},startScrollingIndexToOffset:{value:function(e,t){this._scrollingOrigin=this.scroll,this._scrollingDestination=e-t,this._scrollingDestination>this._length?this._scrollingDestination=this._length:0>this._scrollingDestination&&(this._scrollingDestination=0),this._isScrolling=!0,this._scrollingStartTime=Date.now(),this._isTransitioningScroll=!0,this.needsDraw=!0}},_isCameraUpdated:{value:!0},_width:{value:null},_height:{value:null},_boundingBoxSize:{value:[200,200,0]},boundingBoxSize:{serializable:!0,get:function(){return this._boundingBoxSize},set:function(e){this._boundingBoxSize=e,this.elementsBoundingSphereRadius=.5*Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}},_elementsBoundingSphereRadius:{value:283},elementsBoundingSphereRadius:{get:function(){return this._elementsBoundingSphereRadius},set:function(e){this._elementsBoundingSphereRadius!==e&&(this._elementsBoundingSphereRadius=e,this.needsDraw=!0)}},_halfPI:{value:.5*Math.PI},_doublePI:{value:2*Math.PI},_computeFrustumNormals:{value:function(){var e,t,n,r,i,a,o,s,l,u=.5*this.cameraFov*this._doublePI/360,c=Math.sin(u),h=Math.cos(u),d=c*this._width/this._height,p=this.cameraTargetPoint[0]-this.cameraPosition[0],f=this.cameraTargetPoint[1]-this.cameraPosition[1],m=this.cameraTargetPoint[2]-this.cameraPosition[2],v=this._halfPI-Math.atan2(m,p),g=p*Math.sin(v)+m*Math.cos(v),b=this._halfPI-Math.atan2(g,f),_=[[h,0,d],[-h,0,d],[0,h,c],[0,-h,c]],y=[];for(l=0;4>l;l++)s=_[l],e=s[0],t=s[1]*Math.cos(-b)-s[2]*Math.sin(-b),n=s[1]*Math.sin(-b)+s[2]*Math.cos(-b),r=e*Math.cos(-v)-n*Math.sin(-v),i=t,a=e*Math.sin(-v)+n*Math.cos(-v),o=1/Math.sqrt(r*r+i*i+a*a),y.push([r*o,i*o,a*o]);return y}},_segmentsIntersection:{value:function(e,t){for(var n,r,i=0,a=0,o=[];e.length>i&&t.length>a;)e[i][0]>=t[a][1]?a++:e[i][1]<=t[a][0]?i++:(n=e[i][0]>=t[a][0]?e[i][0]:t[a][0],r=e[i][1]<=t[a][1]?e[i][1]:t[a][1],o.push([n,r]),e[i][1]<t[a][1]?i++:e[i][1]>t[a][1]?a++:(i++,a++));return o}},_computeVisibleRange:{value:function(e){var t,n,r,i,a=e._knots.length-1,o=this._cameraPosition[0],s=this._cameraPosition[1],l=this._cameraPosition[2],u=this._computeFrustumNormals(),c=[],h=[],d=[],p=this._elementsBoundingSphereRadius,f=e._knots,m=e._nextHandlers,v=e._previousHandlers,g=[],b=[];for(r=0;a>r;r++)if(t=u[0],c=e.directedPlaneBezierIntersection(o-t[0]*p,s-t[1]*p,l-t[2]*p,u[0],f[r],m[r],v[r+1],f[r+1],g),c.length&&(t=u[1],h=e.directedPlaneBezierIntersection(o-t[0]*p,s-t[1]*p,l-t[2]*p,u[1],f[r],m[r],v[r+1],f[r+1],g),h.length&&(n=this._segmentsIntersection(c,h),n.length&&(t=u[2],c=e.directedPlaneBezierIntersection(o-t[0]*p,s-t[1]*p,l-t[2]*p,u[2],f[r],m[r],v[r+1],f[r+1],g),n=this._segmentsIntersection(c,n),n.length))))for(t=u[3],c=e.directedPlaneBezierIntersection(o-t[0]*p,s-t[1]*p,l-t[2]*p,u[3],f[r],m[r],v[r+1],f[r+1],g),n=this._segmentsIntersection(c,n),i=0;n.length>i;i++)d.push([r,n[i][0],n[i][1]]);var _,y,w,x,E,C,S,T=e._densities;for(r=0;d.length>r;r++)_=T[d[r][0]],y=T[d[r][0]+1],w=d[r][0]?e._densitySummation[d[r][0]-1]:0,x=d[r][1],E=d[r][2],C=.5*(y-_)*x*x+x*_+w,S=.5*(y-_)*E*E+E*_+w,b.push([C,S]);return b}},enterDocument:{value:function(e){if(e){var t=this;window.addEventListener("resize",function(){t._isCameraUpdated=!0,t.needsDraw=!0},!1),this._repetition.addRangeAtPathChangeListener("selectedIterations",this,"_handleSelectedIndexesChange")}}},_updateVisibleIndexes:{value:function(e,t){var n,r,i=this._visibleIndexes,a=i&&!isNaN(i.length)?i.length:0,o=[];for(r=0;a>r;r++)"number"==typeof t[i[r]]?e[t[i[r]]]=null:o.push(r);for(r=n=0;o.length>n&&e.length>r;r++)null!==e[r]&&(i.set(o[n],e[r]),n++);for(n=a;e.length>r;r++)null!==e[r]&&(i.set(n,e[r]),n++)}},willDraw:{value:function(){var e,t,n,r,i,a,o,s,l,u,c,h,d,p=[],f={},m=this._paths,v=m.length,g=this.splinePaths;if(this._isTransitioningScroll&&(h=(Date.now()-this._scrollingStartTime)/this._scrollingTransitionDurationMiliseconds,d=this._computeCssCubicBezierValue(h,this._scrollingTransitionTimingFunctionBezier),1>h?this.scroll=this._scrollingOrigin+(this._scrollingDestination-this._scrollingOrigin)*d:(this.scroll=this._scrollingDestination,this._isTransitioningScroll=!1)),this._width=this._element.clientWidth,this._height=this._element.clientHeight,g.length)for(l=this._numberOfIterations%v,u=(this._numberOfIterations-l)/v,i=0;v>i;i++)for(c=u+(l>i?1:0),e=this._computeVisibleRange(g[i]),g[i]._computeDensitySummation(),a=this._scroll-m[i].headOffset,n=0;e.length>n;n++)for(o=Math.ceil(e[n][0]+a),s=Math.ceil(e[n][1]+a),0>o&&(o=0),s>c&&(s=c),r=o;s>r;r++)t=r*v+i,void 0===f[t]&&(f[t]=p.length,p.push(t));this._updateVisibleIndexes(p,f)}},draw:{value:function(e){var t,n,r,i,a,o,s,l,u,c,h,d,p,f,m=this._repetition._drawnIterations.length,v=(this._paths.length,this._visibleIndexes),g=e,b=6,_=this.lastDrawTime?.018*(g-this.lastDrawTime)*this._elasticScrollingSpeed:0,y=1-_/b,w=this._minSlideOffsetIndex,x=this._maxSlideOffsetIndex;if(this.lastDrawTime=g,this._hasElasticScrolling)for(i=0;b>i;i++){for(t=this._draggedSlideIndex-1;t>=w;t--)d=this._getSlideOffset(t),p=this._getSlideOffset(t+1),f=(d-p)*y+p,f>0&&(f=0),this._updateSlideOffset(t,f);for(t=this._draggedSlideIndex+1;x>=t;t++)d=this._getSlideOffset(t),p=this._getSlideOffset(t-1),f=(d-p)*y+p,0>f&&(f=0),this._updateSlideOffset(t,f)}if(this._isTransitioningScroll&&(this.needsDraw=!0),this._isCameraUpdated){var E,C,S=.5*Math.tan((90-.5*this.cameraFov)*this._doublePI/360)*this._height,T=this.cameraTargetPoint[0]-this.cameraPosition[0],O=this.cameraTargetPoint[1]-this.cameraPosition[1],k=this.cameraTargetPoint[2]-this.cameraPosition[2],P=Math.atan2(-T,-k);E=T*-Math.sin(-P)+k*Math.cos(-P),C=Math.atan2(-O,-E),this._element.style.webkitPerspective=S+"px",this._cameraElement.style.webkitTransform="translate3d(0,0,"+S+"px)rotateX("+C+"rad)rotateY("+-P+"rad)"+"translate3d("+-this.cameraPosition[0]+"px,"+-this.cameraPosition[1]+"px,"+-this.cameraPosition[2]+"px)",this._isCameraUpdated=!1}if(this.splinePaths.length)for(t=0;m>t;t++)h=this.offset(v[t]),s=h.pathIndex,n=h.slideTime,u=this._splinePaths[s]._convertSplineTimeToBezierIndexTime(n),a=this._repetition._drawnIterations[t],o=a.cachedFirstElement||a.firstElement,null!==u?(l=this._splinePaths[s].getPositionAtIndexTime(u),c=this._splinePaths[s].getRotationAtIndexTime(u),r="-webkit-transform:translate3d("+1e-5*(1e5*l[0]>>0)+"px,"+1e-5*(1e5*l[1]>>0)+"px,"+1e-5*(1e5*l[2]>>0)+"px)"+(c[2]?"rotateZ("+1e-5*(1e5*c[2]>>0)+"rad)":"")+(c[1]?"rotateY("+1e-5*(1e5*c[1]>>0)+"rad)":"")+(c[0]?"rotateX("+1e-5*(1e5*c[0]>>0)+"rad)":"")+";"+this._splinePaths[s].getStyleAtIndexTime(u),o.setAttribute("style",r)):o.setAttribute("style","-webkit-transform:scale3d(0,0,0);opacity:0");else for(t=0;m>t;t++)a=this._repetition._drawnIterations[t],o=a.cachedFirstElement||a.firstElement,o.setAttribute("style","-webkit-transform:scale3d(0,0,0);opacity:0");this._slideOffsetsLength&&(this.needsDraw=!0)}},_updateLength:{value:function(){if(this._paths){var e,t,n,r,i,a,o=this._paths.length,s=0;if(o>0){for(i=this._numberOfIterations%o,r=(this._numberOfIterations-i)/o,a=0;o>a;a++)e=this._paths[a],t=r+(i>a?1:0),n=t-e.tailOffset+e.headOffset-1,n>s&&(s=n);this.length=s}this.needsDraw=!0}}},_numberOfIterations:{value:0},handle_numberOfIterationsChange:{value:function(){this._updateLength()}},content:{get:function(){return this.getPath("contentController.content")},set:function(e){this.contentController=(new a).initWithContent(e)}},contentController:{value:null},isSelectionEnabled:{value:null},selectedIndexes:{serializable:!1,value:null},activeIndexes:{serializable:!1,value:null},observeProperty:{value:function(e,t,n,i,a){return"currentIteration"!==e&&"objectAtCurrentIteration"!==e&&"contentAtCurrentIteration"!==e?r(this,e,t,n,i,a):this._repetition?this._repetition.observeProperty(e,t,n,i,a):void 0}},templateDidLoad:{value:function(){var e=this;this._repetition.willDraw=function(){e.needsDraw=!0}}},_length:{value:0},length:{get:function(){return this._length},set:function(e){this._length=0>e?0:e}},_scroll:{value:0},_elasticScrollingRange:{value:20},_hasElasticScrolling:{value:!1},hasElasticScrolling:{get:function(){return this._hasElasticScrolling},set:function(e){this._hasElasticScrolling=e?!0:!1}},_slideOffsets:{value:null},_slideOffsetsLength:{value:0},_maxSlideOffsetIndex:{value:-1},_minSlideOffsetIndex:{value:2e9},_updateSlideOffset:{value:function(e,t){var n=1e-4;e>=0&&(-n>t||t>n?(void 0===this._slideOffsets[e]&&(this._slideOffsetsLength++,this._minSlideOffsetIndex>e&&(this._minSlideOffsetIndex=e),e>this._maxSlideOffsetIndex&&(this._maxSlideOffsetIndex=e)),this._slideOffsets[e]=t):this._removeSlideOffset(e))}},_incrementSlideOffset:{value:function(e,t){this._updateSlideOffset(e,this._getSlideOffset(e)+t)}},_removeSlideOffset:{value:function(e){if(void 0!==this._slideOffsets[e]){var t,n,r;if(delete this._slideOffsets[e],this._slideOffsetsLength--,e===this._minSlideOffsetIndex)for(t=Object.keys(this._slideOffsets),this._minSlideOffsetIndex=2e9,n=0;t.length>n;n++)r=0|t[n],this._minSlideOffsetIndex>r&&(this._minSlideOffsetIndex=r);if(e===this._maxSlideOffsetIndex)for(void 0===t&&(t=Object.keys(this._slideOffsets)),this._maxSlideOffsetIndex=-1,n=0;t.length>n;n++)r=0|t[n],r>this._maxSlideOffsetIndex&&(this._maxSlideOffsetIndex=r)}}},_getSlideOffset:{value:function(e){return this._minSlideOffsetIndex>e?e=this._minSlideOffsetIndex>this._draggedSlideIndex?this._draggedSlideIndex:this._minSlideOffsetIndex:e>this._maxSlideOffsetIndex&&(e=this._maxSlideOffsetIndex<this._draggedSlideIndex?this._draggedSlideIndex:this._maxSlideOffsetIndex),void 0!==this._slideOffsets[e]?this._slideOffsets[e]:0}},scroll:{get:function(){return this._scroll},set:function(e){if(0>e&&(e=0),e>this.length&&(e=this.length),this._hasElasticScrolling&&null!==this._draggedSlideIndex){var t,n,r=this._draggedSlideIndex-this._elasticScrollingRange,i=this._draggedSlideIndex+this._elasticScrollingRange;for(r>this._minSlideOffsetIndex&&(r=this._minSlideOffsetIndex),this._maxSlideOffsetIndex>i&&(i=this._maxSlideOffsetIndex),n=e-this._scroll,0>r&&(r=0),t=r;i>=t;t++)t!==this._draggedSlideIndex?this._incrementSlideOffset(t,n):this._removeSlideOffset(t);this._scroll=e}else this._scroll=e;this.needsDraw=!0}},_isInputEnabled:{value:!0},isInputEnabled:{get:function(){return this._isInputEnabled},set:function(e){this._isInputEnabled=e?!0:!1}},_draggedSlideIndex:{value:0},draggedSlideIndex:{get:function(){return this._draggedSlideIndex},set:function(e){if(e!==this._draggedSlideIndex){if(null!==e){var t,n=this._getSlideOffset(e),r=this._minSlideOffsetIndex,i=this._maxSlideOffsetIndex;for(this._incrementSlideOffset(this._draggedSlideIndex,-n),t=r;i>=t;t++)t!==this._draggedSlideIndex&&this._incrementSlideOffset(t,-n);this._removeSlideOffset(e),this._scroll-=n,this._flowTranslateComposer._scroll=this._scroll}this._draggedSlideIndex=e,this.needsDraw=!0}}},_elasticScrollingSpeed:{value:1},elasticScrollingSpeed:{get:function(){return this._elasticScrollingSpeed},set:function(e){this._elasticScrollingSpeed=parseFloat(e)}},lastDrawTime:{value:null},offset:{enumerable:!1,value:function(e){var t=this._paths.length,n=e%t,r=Math.floor(e/t)-this._scroll+this._paths[n].headOffset;return{pathIndex:n,slideTime:r+this._getSlideOffset(e)}}},serializeSelf:{value:function(e){e.setAllProperties();for(var t,n=this.originalContent,r=0;t=n[r];r++)t.component&&e.addObject(t.component)}}})}}),montageDefine("d2712f2","core/range-controller",{dependencies:["montage","core/promise","collections/generic-collection"],factory:function(e,t){"use strict";var n=e("montage").Montage,r=e("core/promise").Promise,i=e("collections/generic-collection");t.RangeController=n.specialize({constructor:{value:function(){this.content=null,this._selection=[],this.selection=[],this.defineBinding("_selection.rangeContent()",{"<->":"selection.rangeContent()"}),this.sortPath=null,this.filterPath=null,this.visibleIndexes=null,this.reversed=!1,this.start=null,this.length=null,this.selectAddedContent=!1,this.deselectInvisibleContent=!1,this.clearSelectionOnOrderChange=!1,this.avoidsEmptySelection=!1,this.multiSelect=!1,this.organizedContent=[],this.organizedContent.addRangeChangeListener(this,"organizedContent"),this.defineBinding("_orderedContent",{"<-":"content.($filterPath.defined() ? filter{path($filterPath)} : ()).($sortPath.defined() ? sorted{path($sortPath)} : ()).($reversed ?? 0 ? reversed() : ())"}),this.defineBinding("organizedContent.rangeContent()",{"<-":"_orderedContent.($visibleIndexes.defined() ?$visibleIndexes.filter{<$_orderedContent.length}.map{$_orderedContent[()]} : ()).($start.defined() && $length.defined() ?view($start, $length) : ())"}),this._selection.addRangeChangeListener(this,"selection"),this.addRangeAtPathChangeListener("content",this,"handleContentRangeChange"),this.addPathChangeListener("sortPath",this,"handleOrderChange"),this.addPathChangeListener("reversed",this,"handleOrderChange"),this.addOwnPropertyChangeListener("multiSelect",this),this.iterations=[]}},initWithContent:{value:function(e){return this.content=e,this}},sortPath:{value:null},reversed:{value:null},filterPath:{value:null},visibleIndexes:{value:null},start:{value:null},length:{value:null},selectAddedContent:{value:!1},deselectInvisibleContent:{value:!1},clearSelectionOnOrderChange:{value:!1},avoidsEmptySelection:{value:!1},multiSelect:{value:!1},_orderedContent:{value:null},organizedContent:{value:null},iterations:{value:null},selection:{value:null},_selection:{value:null},select:{value:function(e){!this.multiSelect&&this._selection.length>=1&&this._selection.clear(),this._selection.add(e)}},deselect:{value:function(e){(!this.avoidsEmptySelection||this._selection.length>1)&&this._selection["delete"](e)}},clearSelection:{value:function(){(!this.avoidsEmptySelection||this._selection.length>1)&&this._selection.clear()}},add:{value:function(e){var t;return this.content||(this.content=[]),t=this.content.add(e),t&&this.handleAdd(e),t}},push:{value:function(){for(var e=this.content.push.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},pop:{value:function(){return this.content.pop()}},shift:{value:function(){return this.content.shift()}},unshift:{value:function(){for(var e=this.content.unshift.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},splice:{value:function(){for(var e=this.content.splice.apply(this.content,arguments),t=2;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},swap:{value:function(e,t,n){for(var r=this.content.splice.apply(this.content,n),e=2;n.length>e;e++)this.handleAdd(n[e]);return r}},"delete":{value:function(e){return this.content["delete"](e)}},has:{value:function(e){return this.content?this.content.has(e):!1}},addEach:{value:i.prototype.addEach},deleteEach:{value:i.prototype.deleteEach},clear:{value:function(){this.content.clear()}},handleContentRangeChange:{value:function(e,t){t.deleteEach(e),this._selection.deleteEach(t)}},handleSelectionRangeChange:{value:function(e,t){var n=this;r.nextTick(function(){var r=n._selection.length;n.avoidsEmptySelection&&0===r?n.select(t[t.length-1]):!n.multiSelect&&r>1&&n._selection.splice(0,n._selection.length,e[e.length-1])})}},handleOrganizedContentRangeChange:{value:function(e,t){if(this.deselectInvisibleContent){var n=t.clone(1);n.deleteEach(e),this._selection.deleteEach(t)}}},handleOrderChange:{value:function(){this.clearSelectionOnOrderChange&&this._selection.clear()}},handleAdd:{value:function(e){this.selectAddedContent&&(!this.multiSelect&&this._selection.length>=1&&this._selection.clear(),this._selection.add(e))}},handleMultiSelectChange:{value:function(){var e=this._selection.length;!this.multiSelect&&e>1&&this._selection.splice(0,e-1)}},blueprintModuleId:e("montage")._blueprintModuleIdDescriptor,blueprint:e("montage")._blueprintDescriptor})}}),montageDefine("5d55b4c","ui/facadeflow.reel/facadeflow",{dependencies:["montage","montage/ui/component","montage/core/range-controller"],factory:function(e,t){var n=e("montage").Montage,r=e("montage/ui/component").Component,i=e("montage/core/range-controller").RangeController;t.Facadeflow=n.create(r,{didCreate:{value:function(){var e=i.create();e.defineBinding("content",{"<-":"category",source:this}),this.buttonController=e,this.application.addEventListener("dataReceived",this,!1)}},selectedMovie:{value:null},_scroll:{value:null},scroll:{set:function(e){this._scroll=e,0==e%1&&this.category?(this.selectedMovie=this.category[e],this.detailsFadeIn=!0,this.detailsFadeOut=!1,this.needsDraw=!0):0!=e%1&&this.category&&(this.detailsFadeOut=!0,this.detailsFadeIn=!1,this.needsDraw=!0)},get:function(){return this._scroll}},_fadeIn:{value:!1},_fadeOut:{value:!1},latestBoxofficeMovies:{value:null},upcomingMovies:{value:null},inTheaters:{value:null},topDvdRentals:{value:null},category:{value:null},buttonController:{value:null},_switchValue:{value:null},switchValue:{set:function(e){this._switchValue=e},get:function(){return this._switchValue}},_categoryId:{value:null},categoryId:{get:function(){return this._categoryId},set:function(e){e&&(this._categoryId=e,this._changeCategory(e))}},pointInCircleAt:{value:function(e){return[Math.cos(e),Math.sin(e)]}},tangentInCircleAt:{value:function(e){return[-Math.sin(e),Math.cos(e)]}},scaleVector:{value:function(e,t){return[e[0]*t,e[1]*t]}},_changeCategory:{value:function(e){var t=this;this.detailsFadeOut=!0,this._fadeOut=!0,this.needsDraw=!0,setTimeout(function(){t.templateObjects&&t.templateObjects.flow&&(t.templateObjects.flow.scroll=0),t.category=t[e],t.selectedMovie=t.category[0],t._fadeIn=!0,t._fadeOut=!1,t.detailsFadeIn=!0,t.detailsFadeOut=!1,t.needsDraw=!0},500)}},handleDataReceived:{value:function(){this.category=this.latestBoxofficeMovies,this.selectedMovie=this.category[0],this.detailsFadeIn=!0,this._fadeIn=!0,this.needsDraw=!0}},draw:{value:function(){var e=this.templateObjects.flow,t=this.templateObjects.details;this._fadeIn&&(e.element.classList.remove("flow-fade-out"),this._fadeIn=!1),this._fadeOut&&(e.element.classList.add("flow-fade-out"),this._fadeOut=!1),this.detailsFadeIn&&(t.element.classList.remove("details-fade-out"),this.detailsFadeIn=!1),this.detailsFadeOut&&(0==t.element.classList.contains("details-fade-out")&&t.element.classList.add("details-fade-out"),this.detailsFadeOut=!1)}},enterDocument:{value:function(e){if(e){var t,n,r,i,a=[],o=480,s=.130976446,l=this.templateObjects.flow;for(i=0;8>=i;i++)r=Math.PI-i*Math.PI/8,t=this.scaleVector(this.pointInCircleAt(r),o),n=this.scaleVector(this.tangentInCircleAt(r),o*s),a.push({knotPosition:[t[0],0,-t[1]],previousHandlerPosition:[t[0]+n[0],0,-t[1]-n[1]],nextHandlerPosition:[t[0]-n[0],0,-t[1]+n[1]],previousDensity:1,nextDensity:1,rotateY:r-Math.PI/2});a[4].knotPosition[2]=-200,a[4].nextHandlerPosition[2]=-200,a[4].previousHandlerPosition[2]=-200,l.cameraPosition=[0,0,400],l.paths=[{knots:a,headOffset:4,tailOffset:4,units:{rotateY:"rad"}}]}}}})}}),montageDefine("15a68c4","package.json",{exports:{name:"matte",version:"0.1.1-alpha",publishConfig:{tag:"edge"},repository:{type:"git",url:"https://github.com/montagejs/matte.git"},dependencies:{montage:"0.13.0-alpha","native":"0.1.1-alpha"},devDependencies:{"montage-testing":"0.2.0-alpha"},exclude:["overview.html","overview","run-tests.html","test"],readme:'matte\n==============\n\nThis is the Montage package template.\n\nNote: Before working on your package you will need to add montage to it.\n\n```\nnpm install .\n```\n\nLayout\n------\n\nThe template contains the following files and directories:\n\n* `ui/` – Directory containing all the UI .reel directories.\n* `package.json` – Describes your app and its dependencies\n* `README.md` – This readme. Replace the current content with a description of your app\n* `overview.html`\n* `overview/` – Directory that contains the files for the overview page. This is a different package so you will need to require the component using matte/*.\n  * `main.reel` – The main interface component where you can add the components to show.\n* `node_modules/` – Directory containing all npm packages needed, including Montage. Any packages here must be included as `dependencies` in `package.json` for the Montage require to find them.\n* `test/` – Directory containing tests for your package.\n  * `all.js` – Module that point the test runner to all your jasmine specs.\n* `run-tests.html` – Page to run jasmine tests manually in your browser\n* `testacular.conf.js` – This is the testacular configuration file. You can start testacular by running `node_modules/testacular/bin/testacular start`\n\nCreate the following directories if you need them:\n\n* `locale/` – Directory containing localized content.\n* `scripts/` – Directory containing other JS libraries. If a library doesn’t support the CommonJS "exports" object it will need to be loaded through a `<script>` tag.\n\n',readmeFilename:"README.md",_id:"matte@0.1.1-alpha",description:"matte ==============",_from:"matte@0.1.1-alpha",directories:{lib:"./"},hash:"15a68c4",mappings:{montage:{name:"montage",hash:"d2712f2",location:"../montage@d2712f2/"},"native":{name:"native",hash:"8023de4",location:"../native@8023de4/"}},production:!0,useScriptInjection:!0}}),montageDefine("5d55b4c","ui/main.reel/main",{dependencies:["montage","montage/ui/component","model/remotemediator","model/appdata"],factory:function(e,t){var n=e("montage").Montage,r=e("montage/ui/component").Component,i=e("model/remotemediator").Remotemediator,a=e("model/appdata").AppData;t.Main=n.create(r,{appData:{value:a.create()},remoteMediator:{value:i.create()},categoryId:{value:null},_categoryButtonGroup:{value:null},didCreate:{value:function(){this.application.addEventListener("remoteDataReceived",this,!1),this.application.addEventListener("openTrailer",this,!1),this.canDrawGate.setField("latestBoxofficeMovies",!1),this.remoteMediator.load()}},templateDidLoad:{value:function(){var e=this.templateObjects;this._categoryButtonGroup=[e.latest,e.theaters,e.dvd,e.upcoming]}},handleRemoteDataReceived:{value:function(e){var t=e.detail.data,n=e.detail.type;this.appData[n]=t,"latestBoxofficeMovies"===n&&(this.canDrawGate.setField("latestBoxofficeMovies",!0),this.dispatchEventNamed("dataReceived",!0),this.changeCategory(n))}},handleOpenTrailer:{value:function(e){var t=e.detail,n=this.templateObjects.popup;this.remoteMediator.searchYoutubeTrailer(t,function(e){n.openTrailer(e)})}},handleCategoryButtonAction:{value:function(e){this.changeCategory(e.target.category)}},changeCategory:{value:function(e){var t=this._categoryButtonGroup;this.categoryId=e;for(var n=0;t.length>n;n++)t[n].pressed=t[n].category===e}}})}}),montageDefine("d2712f2","ui/slot.reel/slot",{dependencies:["montage","ui/component"],factory:function(e,t){var n=(e("montage").Montage,e("ui/component").Component);t.Slot=n.specialize({hasTemplate:{enumerable:!1,value:!1},constructor:{value:function(){n.constructor.call(this),this.content=null}},delegate:{value:null},_content:{value:null},enterDocument:{value:function(e){e&&this.element.classList.add("montage-Slot")}},content:{get:function(){return this._content},set:function(e){var t,r;e&&void 0!==e.needsDraw?(r=this._content,r&&void 0!==r.needsDraw&&r.detachFromParentComponent(),e.element?t=e.element:(t=document.createElement("div"),t.id="appendDiv",this.delegate&&"function"==typeof this.delegate.slotElementForComponent&&(t=this.delegate.slotElementForComponent(this,e,t)),e.element=t),Object.getPropertyDescriptor(n,"domContent").set.call(this,t),this.addChildComponent(e),e.needsDraw=!0):Object.getPropertyDescriptor(n,"domContent").set.call(this,e),this._content=e,this.needsDraw=!0}},contentDidChange:{value:function(e,t){this.delegate&&"function"==typeof this.delegate.slotDidSwitchContent&&this.delegate.slotDidSwitchContent(this,e,e?e.component:null,t,t?t.component:null)}}})}}),montageDefine("d2712f2","ui/text.reel/text",{dependencies:["montage","ui/component"],factory:function(e,t){var n=(e("montage").Montage,e("ui/component").Component);t.Text=n.specialize({hasTemplate:{value:!1},_value:{value:null},value:{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this.needsDraw=!0)}},converter:{value:null},defaultValue:{value:""},_valueNode:{value:null},_RANGE:{value:document.createRange()},enterDocument:{value:function(e){if(e){var t=this._RANGE;t.selectNodeContents(this.element),t.deleteContents(),this._valueNode=document.createTextNode(""),t.insertNode(this._valueNode),this.element.classList.add("montage-Text")}}},draw:{value:function(){var e=this._value,t=e||0===e?e:this.defaultValue;this.converter&&(t=this.converter.convert(t)),this._valueNode.data=t}}})}}),montageDefine("5d55b4c","ui/image.reel/image",{dependencies:["montage","montage/ui/component"],factory:function(e,t){var n=e("montage").Montage,r=e("montage/ui/component").Component;t.Image=n.create(r,{_src:{value:null},src:{set:function(e){e!==this._src&&(this._src=e,this.needsDraw=!0)}},draw:{value:function(){this._element.style.backgroundImage="url("+this._src+")"}}})}});
bundleLoaded("index.html.bundle-1-0.js")