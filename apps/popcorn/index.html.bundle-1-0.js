montageDefine("f886419","ui/flow.reel/flow",{dependencies:["../component","frb/observers","./flow-bezier-spline","../../core/range-controller"],factory:function(e,t,i){var n=e("../component").Component,s=e("frb/observers").observeProperty,o=e("./flow-bezier-spline").FlowBezierSpline,r=e("../../core/range-controller").RangeController;t.Flow=n.specialize({constructor:{value:function(){this._paths=[],this._visibleIndexes=[],this._needsClearVisibleIndexes=!0,this._slideOffsets={},this.defineBinding("_numberOfIterations",{"<-":"contentController.content.length"}),this.addOwnPropertyChangeListener("_numberOfIterations",this),window.addEventListener("resize",this,!1),this._newVisibleIndexes=[]}},slotContent:{serializable:!0,value:null},__flowTranslateComposer:{value:null},_flowTranslateComposer:{get:function(){return this.__flowTranslateComposer},set:function(e){this.__flowTranslateComposer&&(this.__flowTranslateComposer.removeEventListener("translateStart",this,!1),this.__flowTranslateComposer.removeEventListener("translateEnd",this,!1)),this.__flowTranslateComposer=e,this.__flowTranslateComposer.addEventListener("translateStart",this,!1),this.__flowTranslateComposer.addEventListener("translateEnd",this,!1)}},__firstIteration:{value:null},_firstIteration:{get:function(){return this.__firstIteration},set:function(e){this.__firstIteration=e,this.needsDraw=!0}},handleTranslateStart:{value:function(){this.callDelegateMethod("didTranslateStart",this)}},handleTranslateEnd:{value:function(){this.callDelegateMethod("didTranslateEnd",this)}},_scrollingMode:{value:"linear"},_transform:{value:null},_transformCss:{value:null},_transformPerspective:{value:null},scrollingMode:{serializable:!0,get:function(){return this._scrollingMode},set:function(e){switch(e){case"linear":case"drag":this._scrollingMode=e}}},_linearScrollingVector:{value:[-300,0]},linearScrollingVector:{seriazable:!0,get:function(){return this._linearScrollingVector},set:function(e){this._linearScrollingVector=e}},_repetition:{value:null},momentumDuration:{serializable:!0,value:650},_splinePaths:{value:null},splinePaths:{enumerable:!1,get:function(){return this._splinePaths||(this._splinePaths=[]),this._splinePaths},set:function(e){this._splinePaths=e}},_appendPath:{value:function(e){var t,i,n,s,r,a=new o,l=e.knots,h=e.knots.length,d=[],c=[],u=[],p=[],m=e.units,f=m?Object.keys(m):void 0;if(a._parameterKeys=f,n=a.parameters={},f)for(t=0;s=f[t];t++)n[s]={data:[],units:m[s]};for(t=0;t<h;t++){r=l[t],d[t]=r.knotPosition,u[t]=r.previousHandlerPosition,c[t]=r.nextHandlerPosition,p[t]=r.previousDensity;for(i in m)n[i].data.push(r[i])}a.knots=d,a.previousHandlers=u,a.nextHandlers=c,a.densities=p,a._computeDensitySummation(),this.splinePaths.push(a),e.hasOwnProperty("headOffset")||(e.headOffset=0),e.hasOwnProperty("tailOffset")||(e.tailOffset=0),this._paths.push(e),this._updateLength()}},_paths:{value:null},paths:{get:function(){var e,t,i,n,s,o,r,a,l=(this.splinePaths.length,[]);for(s=0;a=this.splinePaths[s];s++){for(t=a.knots.length,e={knots:[],units:{}},o=0;o<t;o++)n={knotPosition:a.knots[o]},a.nextHandlers&&a.nextHandlers[o]&&(n.nextHandlerPosition=a.nextHandlers[o]),a.previousHandlers&&a.previousHandlers[o]&&(n.previousHandlerPosition=a.previousHandlers[o]),a.densities&&a.densities[o]&&(n.previousDensity=a.densities[o],n.nextDensity=a.densities[o]),e.knots.push(n);for(o in a.parameters)for(e.units[o]=a.parameters[o].units,i=a.parameters[o].data.length,r=0;r<i;r++)e.knots[r][o]=a.parameters[o].data[r];this._paths[s].hasOwnProperty("headOffset")?e.headOffset=this._paths[s].headOffset:e.headOffset=0,this._paths[s].hasOwnProperty("tailOffset")?e.tailOffset=this._paths[s].tailOffset:e.tailOffset=0,l.push(e)}return l},set:function(e){var t,i=e.length;for(this._splinePaths=[],this._paths=[],t=0;t<i;t++)this._appendPath(e[t]);this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_isCameraEnabled:{value:!0},isCameraEnabled:{get:function(){return this._isCameraEnabled},set:function(e){var t=!!e;this._isCameraEnabled!==t&&(this._isCameraEnabled=t,this._isCameraUpdated=!0,this._needsComputeVisibleRange=!0,this.needsDraw=!0)}},_perspective:{value:500},perspective:{get:function(){return this._perspective},set:function(e){var t=parseFloat(e);isNaN(t)||this._perspective===t||(this._perspective=t,this._isCameraUpdated=!0,this._needsComputeVisibleRange=!0,this.needsDraw=!0)}},_cameraElement:{value:null},_cameraPosition:{value:[0,0,800]},cameraPosition:{get:function(){return this._cameraPosition},set:function(e){this._cameraPosition=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_viewpointPosition:{get:function(){return this._isCameraEnabled?this.cameraPosition:[.01*(50-this._sceneOffsetLeft)*this._width,.01*(50-this._sceneOffsetTop)*this._height,this._perspective]}},_cameraTargetPoint:{value:[0,0,0]},cameraTargetPoint:{get:function(){return this._cameraTargetPoint},set:function(e){this._cameraTargetPoint=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_viewpointTargetPoint:{get:function(){return this._isCameraEnabled?this.cameraTargetPoint:[.01*(50-this._sceneOffsetLeft)*this._width,.01*(50-this._sceneOffsetTop)*this._height,0]}},_cameraFov:{value:50},cameraFov:{get:function(){return this._cameraFov},set:function(e){this._cameraFov=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_viewpointFov:{get:function(){return this._isCameraEnabled?this.cameraFov:360*(Math.PI/2-Math.atan2(this._perspective,this._height/2))/Math.PI}},_cameraRoll:{value:0},cameraRoll:{get:function(){return this._cameraRoll},set:function(e){this._cameraRoll=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_sceneOffsetTop:{value:50},sceneOffsetTop:{get:function(){return this._sceneOffsetTop},set:function(e){this._sceneOffsetTop=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_sceneOffsetLeft:{value:50},sceneOffsetLeft:{get:function(){return this._sceneOffsetLeft},set:function(e){this._sceneOffsetLeft=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_sceneScaleX:{value:{numerator:1,denominator:1}},_sceneScaleY:{value:{numerator:1,denominator:1}},_sceneScaleZ:{value:{numerator:1,denominator:1}},_sceneScale:{value:{x:{numerator:1,denominator:1},y:{numerator:1,denominator:1},z:{numerator:1,denominator:1}}},_updateSceneScale:{value:function(){this._sceneScale={x:this._sceneScaleX,y:this._sceneScaleY,z:this._sceneScaleZ}}},sceneScaleX:{get:function(){return this._sceneScaleX},set:function(e){"object"!=typeof e||"undefined"==typeof e.numerator||"undefined"==typeof e.denominator||isNaN(e.numerator)||isNaN(e.denominator)||0==e.denominator||(this._sceneScaleX=e,this._updateSceneScale(),this.needsDraw=!0,this._needsComputeVisibleRange=!0)}},sceneScaleY:{get:function(){return this._sceneScaleY},set:function(e){"object"!=typeof e||"undefined"==typeof e.numerator||"undefined"==typeof e.denominator||isNaN(e.numerator)||isNaN(e.denominator)||0==e.denominator||(this._sceneScaleY=e,this._updateSceneScale(),this.needsDraw=!0,this._needsComputeVisibleRange=!0)}},sceneScaleZ:{get:function(){return this._sceneScaleZ},set:function(e){"object"!=typeof e||"undefined"==typeof e.numerator||"undefined"==typeof e.denominator||isNaN(e.numerator)||isNaN(e.denominator)||0==e.denominator||(this._sceneScaleZ=e,this._updateSceneScale(),this.needsDraw=!0,this._needsComputeVisibleRange=!0)}},_stride:{value:0},stride:{get:function(){return this._stride},set:function(e){this._stride=e}},_scrollingTransitionDurationMiliseconds:{value:500},_scrollingTransitionDuration:{value:"500ms"},scrollingTransitionDuration:{get:function(){return this._scrollingTransitionDuration},set:function(e){var t,i,n=e+"";n.length,(i=/^(\d+)ms$/.exec(n))?t=+i[1]:(i=/^(\d+)s$/.exec(n))?t=1e3*+i[1]:(t=+n,n+="ms"),isNaN(t)||this._scrollingTransitionDurationMiliseconds===t||(this._scrollingTransitionDurationMiliseconds=t,this._scrollingTransitionDuration=n)}},hasSelectedIndexScrolling:{value:!1},selectedIndexScrollingOffset:{value:0},_handleSelectedIndexesChange:{value:function(e,t,i){this.hasSelectedIndexScrolling&&e[0]&&this.startScrollingIndexToOffset(Math.floor(this.contentController.content.indexOf(e[0].object)/this._paths.length),this.selectedIndexScrollingOffset)}},_timingFunctions:{value:{ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]}},_scrollingTransitionTimingFunctionBezier:{value:[.25,.1,.25,1]},_scrollingTransitionTimingFunction:{value:"ease"},scrollingTransitionTimingFunction:{get:function(){return this._scrollingTransitionTimingFunction},set:function(e){var t,i,n=e+"";if(this._timingFunctions.hasOwnProperty(n))this._scrollingTransitionTimingFunction=n,this._scrollingTransitionTimingFunctionBezier=this._timingFunctions[n];else if("cubic-bezier("===n.substr(0,13)&&")"===n.substr(n.length-1,1)&&(t=n.substr(13,n.length-14).split(","),4===t.length)){for(i=0;i<4;i++)if(t[i]-=0,isNaN(t[i]))return;t[0]<0?t[0]=0:t[0]>1&&(t[0]=1),t[2]<0?t[2]=0:t[2]>1&&(t[2]=1),this._scrollingTransitionTimingFunction="cubic-bezier("+t+")",this._scrollingTransitionTimingFunctionBezier=t}}},_computeCssCubicBezierValue:{value:function(e,t){var i,n,s,o=.5,r=.25;for(s=0;s<20;s++)i=o*o,n=1-o,3*(n*n*o*t[0]+n*i*t[2])+i*o>e?o-=r:o+=r,r*=.5;return i=o*o,n=1-o,3*(n*n*o*t[1]+n*i*t[3])+i*o}},_isTransitioningScroll:{value:!1},stopScrolling:{value:function(){this._isTransitioningScroll=!1}},startScrollingIndexToOffset:{value:function(e,t){this._scrollingOrigin=this.scroll,this._scrollingDestination=e-t,this._scrollingDestination>this._length?this._scrollingDestination=this._length:this._scrollingDestination<0&&(this._scrollingDestination=0),this._isScrolling=!0,this._scrollingStartTime=Date.now(),this._isTransitioningScroll=!0,this.needsDraw=!0,this.callDelegateMethod("didTranslateStart",this)}},_isCameraUpdated:{value:!0},_width:{value:0},_height:{value:0},_boundingBoxSize:{value:null},boundingBoxSize:{serializable:!0,get:function(){return this._boundingBoxSize},set:function(e){this._boundingBoxSize=e,this.elementsBoundingSphereRadius=.5*Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),this._needsComputeVisibleRange=!0}},_elementsBoundingSphereRadius:{value:1},elementsBoundingSphereRadius:{get:function(){return this._elementsBoundingSphereRadius},set:function(e){this._elementsBoundingSphereRadius!==e&&(this._elementsBoundingSphereRadius=e,this.needsDraw=!0,this._needsComputeVisibleRange=!0)}},_halfPI:{value:.5*Math.PI},_doublePI:{value:2*Math.PI},_computeFrustumNormals:{value:function(){var e,t,i,n,s,o,r,a,l,h=.5*this._viewpointFov*this._doublePI/360,d=Math.sin(h),c=Math.cos(h),u=d*this._width/this._height,p=this._viewpointPosition,m=this._viewpointTargetPoint,f=m[0]-p[0],v=m[1]-p[1],g=m[2]-p[2],_=this._halfPI-Math.atan2(g,f),b=f*Math.sin(_)+g*Math.cos(_),y=this._halfPI-Math.atan2(b,v),x=[[c,0,u],[-c,0,u],[0,c,d],[0,-c,d]],w=[];for(l=0;l<4;l++)a=x[l],e=a[0],t=a[1]*Math.cos(-y)-a[2]*Math.sin(-y),i=a[1]*Math.sin(-y)+a[2]*Math.cos(-y),n=e*Math.cos(-_)-i*Math.sin(-_),s=t,o=e*Math.sin(-_)+i*Math.cos(-_),r=1/Math.sqrt(n*n+s*s+o*o),w.push([n*r,s*r,o*r]);return w}},_segmentsIntersection:{value:function(e,t){for(var i,n,s=0,o=0,r=[];s<e.length&&o<t.length;)e[s][0]>=t[o][1]?o++:e[s][1]<=t[o][0]?s++:(i=e[s][0]>=t[o][0]?e[s][0]:t[o][0],n=e[s][1]<=t[o][1]?e[s][1]:t[o][1],r.push([i,n]),e[s][1]<t[o][1]?s++:e[s][1]>t[o][1]?o++:(s++,o++));return r}},_computeVisibleRange:{value:function(e){var t,i,n,s,o=e._knots.length-1,r=this._viewpointPosition,a=r[0],l=r[1],h=r[2],d=this._computeFrustumNormals(),c=[],u=[],p=[],m=this._elementsBoundingSphereRadius,f=e.getScaledKnots(this._sceneScale),v=e.getScaledNextHandlers(this._sceneScale),g=e.getScaledPreviousHandlers(this._sceneScale),_=[];for(n=0;n<o;n++)if(t=d[0],c=e.directedPlaneBezierIntersection(a-t[0]*m,l-t[1]*m,h-t[2]*m,d[0],f[n],v[n],g[n+1],f[n+1]),c.length&&(t=d[1],u=e.directedPlaneBezierIntersection(a-t[0]*m,l-t[1]*m,h-t[2]*m,d[1],f[n],v[n],g[n+1],f[n+1]),u.length&&(i=this._segmentsIntersection(c,u),i.length&&(t=d[2],c=e.directedPlaneBezierIntersection(a-t[0]*m,l-t[1]*m,h-t[2]*m,d[2],f[n],v[n],g[n+1],f[n+1]),i=this._segmentsIntersection(c,i),i.length))))for(t=d[3],c=e.directedPlaneBezierIntersection(a-t[0]*m,l-t[1]*m,h-t[2]*m,d[3],f[n],v[n],g[n+1],f[n+1]),i=this._segmentsIntersection(c,i),s=0;s<i.length;s++)p.push([n,i[s][0],i[s][1]]);var b,y,x,w,C,S,P,T=e._densities;for(n=0;n<p.length;n++)b=T[p[n][0]],y=T[p[n][0]+1],x=p[n][0]?e._densitySummation[p[n][0]-1]:0,w=p[n][1],C=p[n][2],S=(y-b)*w*w*.5+w*b+x,P=(y-b)*C*C*.5+C*b+x,_.push([S,P]);return _}},_determineCssPrefixedProperties:{value:function(){"webkitTransform"in this.element.style?(this._transform="webkitTransform",this._transformCss="-webkit-transform",this._transformPerspective="webkitPerspective"):"MozTransform"in this.element.style?(this._transform="MozTransform",this._transformCss="-moz-transform",this._transformPerspective="MozPerspective"):"msTransform"in this.element.style?(this._transform="msTransform",this._transformCss="-ms-transform",this._transformPerspective="msPerspective"):(this._transform="transform",this._transformPerspective="perspective")}},_isListeningToResize:{value:!0},isListeningToResize:{get:function(){return this._isListeningToResize},set:function(e){var t=!!e;this._isListeningToResize!==t&&(this._isListeningToResize=t,this._isListeningToResize?window.addEventListener("resize",this,!1):window.removeEventListener("resize",this,!1))}},_needsClearVisibleIndexes:{value:!1},handleResize:{value:function(){this._isCameraUpdated=!0,this._needsComputeVisibleRange=!0,this.needsDraw=!0,this._needsClearVisibleIndexes=!0}},enterDocument:{value:function(e){e&&(this._determineCssPrefixedProperties(),this._repetition.addRangeAtPathChangeListener("selectedIterations",this,"_handleSelectedIndexesChange"))}},_updateVisibleIndexes:{value:function(e,t){var i,n,s,o=this._visibleIndexes,r=o&&!isNaN(o.length)?o.length:0;for(this._needsClearVisibleIndexes&&(this._visibleIndexes.splice(e.length,1/0),this._needsClearVisibleIndexes=!1),s=0;s<r;s++)"number"==typeof t[o[s]]?e[t[o[s]]]=null:(i||(i=[])).push(s);if(i)for(s=n=0;n<i.length&&s<e.length;s++)null!==e[s]&&(o.set(i[n],e[s]),n++);for(n=r;s<e.length;s++)null!==e[s]&&(o.set(n,e[s]),n++)}},_needsComputeVisibleRange:{value:!0},_previousVisibleRanges:{value:null},viewportWidth:{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this._needsComputeVisibleRange=!0)}},viewportHeight:{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this._needsComputeVisibleRange=!0)}},_firstIterationWidth:{value:1},_firstIterationHeight:{value:1},firstIterationWidth:{get:function(){return this._firstIterationWidth},set:function(e){e!==this._firstIterationWidth&&(this._firstIterationWidth=e,this._needsComputeVisibleRange=!0,this._needsClearVisibleIndexes=!0)}},firstIterationHeight:{get:function(){return this._firstIterationHeight},set:function(e){e!==this._firstIterationHeight&&(this._firstIterationHeight=e,this._needsComputeVisibleRange=!0,this._needsClearVisibleIndexes=!0)}},_firstIterationOffsetLeft:{value:0},_firstIterationOffsetTop:{value:0},willDraw:{value:function(e){var t,i,n,s,o,r,a,l,h,d,c,u,p=this._newVisibleIndexes,m={},f=this._paths,v=f.length,g=this.splinePaths;if(this.viewportWidth=this._element.clientWidth,this.viewportHeight=this._element.clientHeight,this.__firstIteration){var _=this.__firstIteration.firstElement.children[0];if(0!==_.offsetWidth&&0!==_.offsetHeight&&(this.firstIterationWidth=_.offsetWidth,this.firstIterationHeight=_.offsetHeight,this._firstIterationOffsetLeft=_.offsetLeft,this._firstIterationOffsetTop=_.offsetTop,!this._boundingBoxSize)){var b=Math.max(Math.abs(this._firstIterationWidth+this._firstIterationOffsetLeft),Math.abs(this._firstIterationOffsetLeft)),y=Math.max(Math.abs(this._firstIterationHeight+this._firstIterationOffsetTop),Math.abs(this._firstIterationOffsetTop));this._elementsBoundingSphereRadius=Math.sqrt(b*b+y*y)}}this._isTransitioningScroll&&(c=(Date.now()-this._scrollingStartTime)/this._scrollingTransitionDurationMiliseconds,u=this._computeCssCubicBezierValue(c,this._scrollingTransitionTimingFunctionBezier),c<1?this.scroll=this._scrollingOrigin+(this._scrollingDestination-this._scrollingOrigin)*u:(this.scroll=this._scrollingDestination,this._isTransitioningScroll=!1,this._needsToCallDidTranslateEndDelegate=!0));var x,w,C,S,P,c=e,d=6,T=this.lastDrawTime?.018*(c-this.lastDrawTime)*this._elasticScrollingSpeed:0,E=1-T/d,I=this._minSlideOffsetIndex,M=this._maxSlideOffsetIndex;if(this.lastDrawTime=c,this._hasElasticScrolling)for(o=0;o<d;o++){for(n=this._draggedSlideIndex-1;n>=I;n--)x=this._getSlideOffset(n),w=this._getSlideOffset(n+1),C=(x-w)*E+w,C>0&&(C=0),this._updateSlideOffset(n,C);for(n=this._draggedSlideIndex+1;n<=M;n++)x=this._getSlideOffset(n),w=this._getSlideOffset(n-1),C=(x-w)*E+w,C<0&&(C=0),this._updateSlideOffset(n,C)}if(g.length){for(l=this._numberOfIterations%v,h=(this._numberOfIterations-l)/v,this._needsComputeVisibleRange&&(this._previousVisibleRanges=[]),r=0;r<v;r++)for(d=h+(r<l?1:0),this._needsComputeVisibleRange?(t=this._computeVisibleRange(g[r]),this._previousVisibleRanges[r]=t,g[r]._computeDensitySummation()):t=this._previousVisibleRanges[r],a=this._scroll-f[r].headOffset,n=0,s=t.length;n<s;n++){for(P=d/2,o=P;P>=1;)i=(0|o)*v+r,S=(0|o)+this._getSlideOffset(i)-a,P/=2,S>=t[n][0]?o-=P:o+=P;o=o-1|0,o<0&&(o=0);do i=o*v+r,S=o+this._getSlideOffset(i)-a,S>=t[n][0]&&S<=t[n][1]&&void 0===m[i]&&(m[i]=p.length,p[p.length]=i),o++;while(S<=t[n][1]&&o<d)}this._needsComputeVisibleRange=!1}this._updateVisibleIndexes(p,m),p.length=0}},draw:{value:function(e){var t,i,n,s,o,r,a,l,h,d,c,u=this._repetition._drawnIterations.length,p=this._visibleIndexes,m=this._viewpointPosition,f=this._viewpointTargetPoint,v=this._splinePaths;if(this._isTransitioningScroll&&(this.needsDraw=!0),this._isCameraUpdated){if(this._isCameraEnabled){var g,_,r=Math.tan((90-.5*this._viewpointFov)*this._doublePI/360)*this._height*.5,b=f[0]-m[0],y=f[1]-m[1],x=f[2]-m[2],w=Math.atan2(-b,-x);g=b*-Math.sin(-w)+x*Math.cos(-w),_=Math.atan2(-y,-g),this._element.style[this._transformPerspective]=r+"px",c="translate3d(0,0,",c+=r,c+="px)rotateX(",c+=_,c+="rad)rotateY(",c+=-w,c+="rad)",c+="translate3d(",c+=-m[0],c+="px,",c+=-m[1],c+="px,",c+=-m[2],c+="px)",this._cameraElement.style[this._transform]=c,this._element.classList.remove("camera-disabled")}else this._element.style[this._transformPerspective]=this._perspective+"px",c="translate3d(",c+=.5*this._width-m[0],c+="px, ",c+=.5*this._height-m[1],c+="px,0)",this._cameraElement.style[this._transform]=c,this._element.classList.add("camera-disabled");this._isCameraUpdated=!1}if(v.length)for(t=0;t<u;t++)h=this.offset(p[t]),d=v[h.pathIndex],a=d._convertSplineTimeToBezierIndexTime(h.slideTime),i=this._repetition._drawnIterations[t],n=i.cachedFirstElement||i.firstElement,null!==a?((s=n.children[0])&&(n.classList.contains("selected")?s.classList.add("selected"):s.classList.remove("selected"),n.classList.contains("active")?s.classList.add("active"):s.classList.remove("active")),o=d.getPositionAtIndexTime(a,this._sceneScale),l=d.getRotationAtIndexTime(a),c=this._transformCss,c+=":translate3d(",c+=1e-5*(1e5*o[0]>>0),c+="px,",c+=1e-5*(1e5*o[1]>>0),c+="px,",c+=1e-5*(1e5*o[2]>>0),c+="px)",c+=l[2]?"rotateZ("+1e-5*(1e5*l[2]>>0)+"rad)":"",c+=l[1]?"rotateY("+1e-5*(1e5*l[1]>>0)+"rad)":"",c+=l[0]?"rotateX("+1e-5*(1e5*l[0]>>0)+"rad)":"",c+=";",c+=d.getStyleAtIndexTime(a),n.setAttribute("style",c)):n.setAttribute("style","display:none");else for(t=0;t<u;t++)i=this._repetition._drawnIterations[t],n=i.cachedFirstElement||i.firstElement,n.setAttribute("style","display:none");this._slideOffsetsLength&&(this.needsDraw=!0),this._needsToCallDidTranslateEndDelegate&&(this._needsToCallDidTranslateEndDelegate=!1,this.callDelegateMethod("didTranslateEnd",this))}},_updateLength:{value:function(){if(this._paths){var e,t,i,n,s,o,r=this._paths.length,a=0;if(r>0){for(s=this._numberOfIterations%r,n=(this._numberOfIterations-s)/r,o=0;o<r;o++)e=this._paths[o],t=n+(o<s?1:0),i=t-e.tailOffset+e.headOffset-1,i>a&&(a=i);this.length=a}this.needsDraw=!0}}},_numberOfIterations:{value:0},handle_numberOfIterationsChange:{value:function(){this._updateLength()}},content:{get:function(){return this.getPath("contentController.content")},set:function(e){this.contentController=(new r).initWithContent(e)}},contentController:{value:null},isSelectionEnabled:{value:null},selectedIndexes:{serializable:!1,value:null},activeIndexes:{serializable:!1,value:null},observeProperty:{value:function(e,t,i){return s(this,e,t,i)}},templateDidLoad:{value:function(){var e=this;this._repetition.willDraw=function(){e.needsDraw=!0}}},_length:{value:0},length:{get:function(){return this._length},set:function(e){e<0?this._length=0:this._length=e}},_scroll:{value:0},_elasticScrollingRange:{value:20},_hasElasticScrolling:{value:!1},hasElasticScrolling:{get:function(){return this._hasElasticScrolling},set:function(e){e?this._hasElasticScrolling=!0:this._hasElasticScrolling=!1}},_slideOffsets:{value:null},_slideOffsetsLength:{value:0},_maxSlideOffsetIndex:{value:-1},_minSlideOffsetIndex:{value:2e9},_updateSlideOffset:{value:function(e,t){var i=1e-4;e>=0&&(t<-i||t>i?("undefined"==typeof this._slideOffsets[e]&&(this._slideOffsetsLength++,e<this._minSlideOffsetIndex&&(this._minSlideOffsetIndex=e),e>this._maxSlideOffsetIndex&&(this._maxSlideOffsetIndex=e)),this._slideOffsets[e]=t):this._removeSlideOffset(e))}},_incrementSlideOffset:{value:function(e,t){this._updateSlideOffset(e,this._getSlideOffset(e)+t)}},_removeSlideOffset:{value:function(e){if("undefined"!=typeof this._slideOffsets[e]){var t,i,n,s;if(delete this._slideOffsets[e],this._slideOffsetsLength--,e===this._minSlideOffsetIndex)for(t=Object.keys(this._slideOffsets),this._minSlideOffsetIndex=2e9,i=0,s=t.length;i<s;i++)n=0|t[i],n<this._minSlideOffsetIndex&&(this._minSlideOffsetIndex=n);if(e===this._maxSlideOffsetIndex)for("undefined"==typeof t&&(t=Object.keys(this._slideOffsets),s=t.length),this._maxSlideOffsetIndex=-1,i=0;i<s;i++)n=0|t[i],n>this._maxSlideOffsetIndex&&(this._maxSlideOffsetIndex=n)}}},_getSlideOffset:{value:function(e){return e<this._minSlideOffsetIndex?e=this._minSlideOffsetIndex>this._draggedSlideIndex?this._draggedSlideIndex:this._minSlideOffsetIndex:e>this._maxSlideOffsetIndex&&(e=this._maxSlideOffsetIndex<this._draggedSlideIndex?this._draggedSlideIndex:this._maxSlideOffsetIndex),"undefined"!=typeof this._slideOffsets[e]?this._slideOffsets[e]:0}},scroll:{get:function(){return this._scroll},set:function(e){if(e<0&&(e=0),e>this.length&&(e=this.length),this._hasElasticScrolling&&null!==this._draggedSlideIndex){var t,i,n=this._draggedSlideIndex-this._elasticScrollingRange,s=this._draggedSlideIndex+this._elasticScrollingRange;for(n>this._minSlideOffsetIndex&&(n=this._minSlideOffsetIndex),s<this._maxSlideOffsetIndex&&(s=this._maxSlideOffsetIndex),i=e-this._scroll,n<0&&(n=0),t=n;t<=s;t++)t!==this._draggedSlideIndex?this._incrementSlideOffset(t,i):this._removeSlideOffset(t);this._scroll=e}else this._scroll=e;this.needsDraw=!0}},previousStride:{value:function(){var e=Math.round(this.scroll/this.stride),t=(e-1)*this.stride;this.startScrollingIndexToOffset(0,-t)}},nextStride:{value:function(){var e=Math.round(this.scroll/this.stride),t=(e+1)*this.stride;this.startScrollingIndexToOffset(0,-t)}},_isInputEnabled:{value:!0},isInputEnabled:{get:function(){return this._isInputEnabled},set:function(e){e?this._isInputEnabled=!0:this._isInputEnabled=!1}},_draggedSlideIndex:{value:0},draggedSlideIndex:{get:function(){return this._draggedSlideIndex},set:function(e){if(e!==this._draggedSlideIndex){if(null!==e){var t,i=this._getSlideOffset(e),n=this._minSlideOffsetIndex,s=this._maxSlideOffsetIndex;for(this._incrementSlideOffset(this._draggedSlideIndex,-i),t=n;t<=s;t++)t!==this._draggedSlideIndex&&this._incrementSlideOffset(t,-i);this._removeSlideOffset(e),this._scroll-=i,this._flowTranslateComposer._scroll=this._scroll}this._draggedSlideIndex=e,this.needsDraw=!0}}},_elasticScrollingSpeed:{value:1},elasticScrollingSpeed:{get:function(){return this._elasticScrollingSpeed},set:function(e){this._elasticScrollingSpeed=parseFloat(e)}},lastDrawTime:{value:null},offset:{enumerable:!1,value:function(e){var t=this._paths.length,i=e%t,n=Math.floor(e/t)-this._scroll+this._paths[i].headOffset;return{pathIndex:i,slideTime:n+this._getSlideOffset(e)}}},serializeSelf:{value:function(e){e.setAllProperties();for(var t,i=this.originalContent,n=0;t=i[n];n++)t.component&&e.addObject(t.component)}}})}}),montageDefine("f886419","composer/translate-composer",{dependencies:["./composer","../core/event/event-manager"],factory:function(e,t,i){var n=e("./composer").Composer,s=e("../core/event/event-manager").defaultEventManager,o=t.TranslateComposer=n.specialize({_NATIVE_ELEMENTS:{value:["A","IFRAME","EMBED","OBJECT","VIDEO","AUDIO","CANVAS","LABEL","INPUT","BUTTON","SELECT","TEXTAREA","KEYGEN","DETAILS","COMMAND"]},_WHEEL_POINTER:{value:"wheel",writable:!1},_MOUSE_POINTER:{value:"mouse",writable:!1},_TOUCH_POINTER:{value:"touch",writable:!1},CLAIM_POINTER_POLICIES:{value:{DEFAULT:"default",MOVE:"move"}},enabled:{value:!0},_externalUpdate:{value:!0},isAnimating:{value:!1},isMoving:{value:!1},frame:{value:function(){this.isAnimating&&this._animationInterval(),this._externalUpdate=!1}},_pointerSpeedMultiplier:{value:1},pointerSpeedMultiplier:{get:function(){return this._pointerSpeedMultiplier},set:function(e){this._pointerSpeedMultiplier=e}},pointerStartEventPosition:{value:null},_shouldDispatchTranslate:{value:!1},_isSelfUpdate:{value:!1},_allowFloats:{value:!1},allowFloats:{get:function(){return this._allowFloats},set:function(e){this._allowFloats!==e&&(this._allowFloats=e,this.translateX=this._translateX,this.translateY=this._translateY)}},allowTranslateOuterExtreme:{value:!1},_translateX:{value:0},translateX:{get:function(){return this._translateX},set:function(e){if("vertical"===this._axis)this._translateX=this._minTranslateX||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateX&&t<this._minTranslateX&&(t=this._minTranslateX),null!==this._maxTranslateX&&t>this._maxTranslateX&&(t=this._maxTranslateX),this._isSelfUpdate||(this.isAnimating=!1),this._translateX=t}}},_translateY:{value:0},translateY:{get:function(){return this._translateY},set:function(e){if("horizontal"===this._axis)this._translateY=this._minTranslateY||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateY&&t<this._minTranslateY&&(t=this._minTranslateY),null!==this._maxTranslateY&&t>this._maxTranslateY&&(t=this._maxTranslateY),this._isSelfUpdate||(this.isAnimating=!1),this._translateY=t}}},_minTranslateX:{value:null},minTranslateX:{get:function(){return this._minTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateX!==e&&(null!==e&&this._translateX<e&&(this.translateX=e),this._minTranslateX=e)}},_maxTranslateX:{value:null},maxTranslateX:{get:function(){return this._maxTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateX!==e&&(null!==e&&this._translateX>e&&(this.translateX=e),this._maxTranslateX=e)}},_minTranslateY:{value:null},minTranslateY:{get:function(){return this._minTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateY!==e&&(null!==e&&this._translateY<e&&(this.translateY=e),this._minTranslateY=e)}},_maxTranslateY:{value:null},maxTranslateY:{get:function(){return this._maxTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateY!==e&&(null!==e&&this._translateY>e&&(this.translateY=e),this._maxTranslateY=e)}},_axis:{value:"both"},axis:{get:function(){return this._axis},set:function(e){switch(e){case"vertical":case"horizontal":this._axis=e,this.translateX=this._translateX,this.translateY=this._translateY;break;default:this._axis="both"}}},invertAxis:{depends:["invertXAxis","invertYAxis"],get:function(){return this._invertXAxis===this._invertYAxis?this._invertXAxis:null},set:function(e){this.invertXAxis=e,this.invertYAxis=e}},_invertXAxis:{value:!1},invertXAxis:{get:function(){return this._invertXAxis},set:function(e){this._invertXAxis=!!e}},_invertYAxis:{value:!1},invertYAxis:{get:function(){return this._invertYAxis},set:function(e){this._invertYAxis=!!e}},_hasMomentum:{value:!0},hasMomentum:{get:function(){return this._hasMomentum},set:function(e){this._hasMomentum=!!e}},__momentumDuration:{value:650},_momentumDuration:{get:function(){return this.__momentumDuration},set:function(e){this.__momentumDuration=isNaN(e)?1:e>>0,this.__momentumDuration<1&&(this.__momentumDuration=1)}},_pointerX:{value:null},_pointerY:{value:null},_touchIdentifier:{value:null},_isFirstMove:{value:!1},_observedPointer:{value:null},eventManager:{get:function(){return s}},_mouseRadiusThreshold:{value:2},_touchRadiusThreshold:{value:8},_listenToWheelEvent:{value:!1},listenToWheelEvent:{set:function(e){e=!!e,this._listenToWheelEvent!==e&&(this._listenToWheelEvent=e,this._isLoaded&&(e?this._addWheelEventListener():this._removeWheelEventListener()))},get:function(){return this._listenToWheelEvent}},_claimPointerPolicy:{value:null},load:{value:function(){window.PointerEvent?this._element.addEventListener("pointerdown",this,!0):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.addEventListener("MSPointerDown",this,!0):(this._element.addEventListener("touchstart",this,!0),this._element.addEventListener("mousedown",this,!0)),this._listenToWheelEvent&&this._addWheelEventListener(),this.eventManager.isStoringPointerEvents=!0}},unload:{value:function(){window.PointerEvent?this._element.removeEventListener("pointerdown",this,!0):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.removeEventListener("MSPointerDown",this,!0):(this._element.removeEventListener("touchstart",this,!0),this._element.removeEventListener("mousedown",this,!0)),this._listenToWheelEvent&&this._removeWheelEventListener()}},surrenderPointer:{value:function(e,t){var i=this.callDelegateMethod("surrenderPointer",e,t);return("undefined"==typeof i||i!==!1)&&(this._cancel(),!0)}},addEventListener:{value:function(e,t,i){n.prototype.addEventListener.call(this,e,t,i),"translate"===e&&(this._shouldDispatchTranslate=!0)}},capturePointerdown:{value:function(e){e.pointerType===this._MOUSE_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE?this.captureMousedown(e):(e.pointerType===this._TOUCH_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.captureTouchstart(e)}},capturePointermove:{value:function(e){e.pointerType===this._MOUSE_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE?this.captureMousemove(e):(e.pointerType===this._TOUCH_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.captureTouchmove(e)}},handlePointerup:{value:function(e){e.pointerType===this._MOUSE_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE?this.handleMouseup(e):(e.pointerType===this._TOUCH_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.handleTouchend(e)}},handlePointercancel:{value:function(e){(e.pointerType===this._TOUCH_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.handleTouchcancel(e)}},captureMousedown:{value:function(e){this.enabled&&0===e.button&&(this._observedPointer=this._MOUSE_POINTER,this._start(e.clientX,e.clientY,e.target,e.timeStamp))}},captureMousemove:{value:function(e){this.enabled&&this._handleMove(e)}},handleMouseup:{value:function(e){this.enabled&&this._end(e)}},captureTouchstart:{value:function(e){if(this.enabled&&null===this._observedPointer)if(void 0!==e.pointerId)this._observedPointer=e.pointerId,
this._start(e.clientX,e.clientY,e.target,e.timeStamp),this._preventDefaultIfNeeded(e);else{var t=e.targetTouches;if(t&&1===t.length){var i=t[0];this._preventDefaultIfNeeded(e),this._observedPointer=i.identifier,this._start(i.clientX,i.clientY,i.target,e.timeStamp)}}}},captureTouchmove:{value:function(e){if(this.enabled)if(void 0!==e.pointerId)this._handleMove(e);else{var t=this._findObservedTouch(e.changedTouches);t&&this._handleMove(e,t)}}},handleTouchend:{value:function(e){if(this.enabled)if(void 0!==e.pointerId)this._end(e);else{var t=this._findObservedTouch(e.changedTouches);t&&this._end(t)}}},handleTouchcancel:{value:function(e){if(this.enabled)if(void 0!==e.pointerId)this._cancel(e);else{var t=this._findObservedTouch(e.changedTouches);t&&this._cancel(t)}}},captureScroll:{value:function(e){e.target.contains(this.element)&&this._cancel(e)}},_shouldPreventDefault:{value:function(e){return!!e.target.tagName&&this._NATIVE_ELEMENTS.indexOf(e.target.tagName)===-1&&!e.target.isContentEditable}},_preventDefaultIfNeeded:{value:function(e){!e.defaultPrevented&&this._shouldPreventDefault(e)&&e.preventDefault()}},_addWheelEventListener:{value:function(){if(this._element){var e="undefined"!=typeof window.onwheel||"undefined"!=typeof window.WheelEvent?"wheel":"mousewheel";this._element.addEventListener(e,this,!1),this._element.addEventListener(e,this,!0)}}},_removeWheelEventListener:{value:function(){if(this._element){var e="undefined"!=typeof window.onwheel||"undefined"!=typeof window.WheelEvent?"wheel":"mousewheel";this._element.removeEventListener(e,this,!1),this._element.removeEventListener(e,this,!0)}}},_start:{value:function(e,t,i,n){this.pointerStartEventPosition={pageX:e,pageY:t,target:i,timeStamp:n},this._pointerX=e,this._pointerY=t,window.PointerEvent?(this._element.addEventListener("pointerdown",this,!1),document.addEventListener("pointermove",this,!0),document.addEventListener("pointerup",this,!1),document.addEventListener("pointercancel",this,!1)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(this._element.addEventListener("MSPointerDown",this,!1),document.addEventListener("MSPointerMove",this,!0),document.addEventListener("MSPointerUp",this,!1),document.addEventListener("MSPointerCancel",this,!1)):this._observedPointer===this._MOUSE_POINTER?(this._element.addEventListener("mousedown",this,!1),document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!1)):(this._element.addEventListener("touchstart",this,!1),this._element.addEventListener("touchmove",this,!0),this._element.addEventListener("touchend",this,!1),this._element.addEventListener("touchcancel",this,!1)),document.addEventListener("scroll",this,!0),this.isAnimating&&(this.isAnimating=!1,this._dispatchTranslateEnd()),this._isFirstMove=!0}},_handleStart:{value:function(e){this._claimPointerPolicy=this.eventManager.componentClaimingPointer(this._observedPointer)?this.CLAIM_POINTER_POLICIES.MOVE:this.CLAIM_POINTER_POLICIES.DEFAULT}},_findObservedTouch:{value:function(e){for(var t,i=null,n=0;(t=e[n])&&null===i;n++)t.identifier===this._observedPointer&&(i=t);return i}},_handleMove:{value:function(e,t){var i=this.eventManager,s=this.pointerStartEventPosition;if(t||(t=e),this._isFirstMove){var o=i.componentClaimingPointer(this._observedPointer);if(o){var r=!0;if(this._claimPointerPolicy===this.CLAIM_POINTER_POLICIES.MOVE){var a=this._observedPointer===this._MOUSE_POINTER?this._mouseRadiusThreshold:this._touchRadiusThreshold,l=s.pageX-t.clientX,h=s.pageY-t.clientY;r=n.isCoordinateOutsideRadius(l,h,a),r&&(s.pageX=t.clientX,s.pageY=t.clientY,s.target=t.target,s.timeStamp=e.timeStamp,this._pointerX=t.clientX,this._pointerY=t.clientY)}if(!r)return void this._preventDefaultIfNeeded(e)}i.claimPointer(this._observedPointer,this)}i.isPointerClaimedByComponent(this._observedPointer,this)?(this._preventDefaultIfNeeded(e),(this.allowTranslateOuterExtreme||this._shouldMove(e,t.clientX,t.clientY))&&(this._isFirstMove?this._firstMove():this._move(t.clientX,t.clientY))):this._releaseInterest()}},_shouldMove:{value:function(e,t,i){var n,s,o,r,a=this._translateY,l=this._translateX,h=this._minTranslateY,d=this._maxTranslateY,c=this._minTranslateX,u=this._maxTranslateX,p=!0;return"wheel"===e.type||"mousewheel"===e.type?("vertical"!==this._axis&&(o=20*(e.wheelDeltaX||-e.deltaX||0)/120),"horizontal"!==this._axis&&(r=20*(e.wheelDeltaY||-e.deltaY||0)/120),p=!("horizontal"===this._axis&&0===o||"vertical"===this._axis&&0===r||0===o&&0===r)):("vertical"!==this._axis&&(o=-(this._invertXAxis?this._pointerX-t:t-this._pointerX)),"horizontal"!==this._axis&&(r=-(this._invertYAxis?this._pointerY-i:i-this._pointerY))),p&&(r&&(n=this._isNegativeNumber(r),null!==h&&(p=a!==h||a===h&&n),null!==d&&p&&(p=a!==d||a===d&&!n)),o&&(s=this._isNegativeNumber(o),null!==c&&p&&(p=l!==c||l===c&&s),null!==u&&p&&(p=l!==u||l===u&&!s))),p}},_firstMove:{value:function(){this._isFirstMove&&(this._dispatchTranslateStart(this._translateX,this._translateY),this._isFirstMove=!1,this.isMoving=!0)}},_move:{value:function(e,t){var i;this._isSelfUpdate=!0,"vertical"!==this._axis&&(i=this._invertXAxis?this._pointerX-e:e-this._pointerX,this.translateX+=i*this._pointerSpeedMultiplier),"horizontal"!==this._axis&&(i=this._invertYAxis?this._pointerY-t:t-this._pointerY,this.translateY+=i*this._pointerSpeedMultiplier),this._isSelfUpdate=!1,this._pointerX=e,this._pointerY=t,this._shouldDispatchTranslate&&this._dispatchTranslate()}},_end:{value:function(e){this.startTime=Date.now(),this.endX=this.posX=this.startX=this._translateX,this.endY=this.posY=this.startY=this._translateY;var t=e.velocity;this._hasMomentum&&(t.speed>40||this.translateStrideX||this.translateStrideY)?("vertical"!==this._axis?this.momentumX=t.x*this._pointerSpeedMultiplier*(this._invertXAxis?1:-1):this.momentumX=0,"horizontal"!==this._axis?this.momentumY=t.y*this._pointerSpeedMultiplier*(this._invertYAxis?1:-1):this.momentumY=0,this.endX=this.startX-this.momentumX*this.__momentumDuration/2e3,this.endY=this.startY-this.momentumY*this.__momentumDuration/2e3,this.startStrideXTime=null,this.startStrideYTime=null,this.animateMomentum=!0):this.animateMomentum=!1,this.animateMomentum?this._animationInterval():this._isFirstMove||(this.isMoving=!1,this._dispatchTranslateEnd()),this._releaseInterest()}},_cancel:{value:function(e){this.startTime=Date.now(),this.endX=this.posX=this.startX=this._translateX,this.endY=this.posY=this.startY=this._translateY,this.animateMomentum=!1,this._isFirstMove||(this.isMoving=!1,this._dispatchTranslateCancel()),this._releaseInterest()}},_releaseInterest:{value:function(){window.PointerEvent?(this._element.removeEventListener("pointerdown",this,!1),document.removeEventListener("pointermove",this,!0),document.removeEventListener("pointerup",this,!1),document.removeEventListener("pointercancel",this,!1)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(this._element.removeEventListener("MSPointerDown",this,!1),document.removeEventListener("MSPointerMove",this,!0),document.removeEventListener("MSPointerUp",this,!1),document.removeEventListener("MSPointerCancel",this,!1)):this._observedPointer===this._MOUSE_POINTER?(this._element.removeEventListener("mousedown",this,!1),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!1)):(this._element.removeEventListener("touchstart",this,!1),this._element.removeEventListener("touchmove",this,!0),this._element.removeEventListener("touchend",this,!1),this._element.removeEventListener("touchcancel",this,!1)),document.removeEventListener("scroll",this,!0),this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._isFirstMove=!1,this.isMoving=!1}},_isAxisMovement:{value:function(e){var t,i,n,s,o,r,a,l=e.velocity,h=.7853981633974483,d=2.356194490192345,c=-2.356194490192345,u=-.7853981633974483;if("both"===this.axis)return!0;if(!l||0===l.speed||isNaN(l.speed)?(r=this.pointerStartEventPosition.pageX-e.clientX,a=this.pointerStartEventPosition.pageY-e.clientY,o=Math.atan2(a,r)):o=l.angle,"horizontal"===this.axis){if(n=o<=h&&o>=u,s=o>=d||o<=c,n||s)return!0}else if("vertical"===this.axis&&(t=o<=u&&o>=c,i=o>=h&&o<=d,t||i))return!0;return!1}},_translateEndTimeout:{value:null},_handleWheelTimeout:{value:null},_isNegativeNumber:{value:function(e){return e=+e,isNaN(e)||(e=1/e),e<0}},captureWheel:{value:function(e){this._shouldMove(e)?this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this)||this.eventManager.claimPointer(this._WHEEL_POINTER,this):this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this)&&this.eventManager.forfeitPointer(this._WHEEL_POINTER,this)}},handleWheel:{value:function(e){if(this.enabled&&this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this)){if(this._observedPointer=this._WHEEL_POINTER,this._translateEndTimeout?clearTimeout(this._translateEndTimeout):this._dispatchTranslateStart(),"vertical"!==this.axis&&(this.translateX=this._translateX-20*(e.wheelDeltaX||-e.deltaX||0)/120),"horizontal"!==this.axis&&(this.translateY=this._translateY-20*(e.wheelDeltaY||-e.deltaY||0)/120),this.isMoving=!0,this._dispatchTranslate(),"function"!=typeof this._handleWheelTimeout){var t=function(){this._translateEndTimeout=null,this._dispatchTranslateEnd(),this.isMoving=!1,this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this)&&this.eventManager.forfeitPointer(this._WHEEL_POINTER,this)};this._handleWheelTimeout=t.bind(this)}this._translateEndTimeout=setTimeout(this._handleWheelTimeout,400),e.preventDefault()}}},_bezierTValue:{value:function(e,t,i,n,s){var o,r,a,l,h=1-3*n+3*t,d=3*n-6*t,c=3*t,u=.5;for(r=0;r<10;r++)l=u*u,o=3*h*l+2*d*u+c,a=1-u,u-=(3*(a*a*u*t+a*l*n)+l*u-e)/o;return l=u*u,a=1-u,3*(a*a*u*i+a*l*s)+l*u}},_dispatchTranslateStart:{value:function(e,t){var i=document.createEvent("CustomEvent");i.initCustomEvent("translateStart",!0,!0,null),i.translateX=e,i.translateY=t,i.scroll=0,i.pointer=this._observedPointer,this.dispatchEvent(i)}},_dispatchTranslateEnd:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateEnd",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_dispatchTranslateCancel:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateCancel",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_dispatchTranslate:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translate",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},animateBouncingX:{value:!1,enumerable:!1},startTimeBounceX:{value:!1,enumerable:!1},animateBouncingY:{value:!1,enumerable:!1},startTimeBounceY:{value:!1,enumerable:!1},animateMomentum:{value:!1,enumerable:!1},startTime:{value:null,enumerable:!1},startX:{value:null,enumerable:!1},posX:{value:null,enumerable:!1},endX:{value:null,enumerable:!1},startY:{value:null,enumerable:!1},posY:{value:null,enumerable:!1},endY:{value:null,enumerable:!1},translateStrideX:{value:null},translateStrideY:{value:null},translateStrideDuration:{value:330},_animationInterval:{value:function(){var e,t,i,n,s=Date.now(),o=!1;this.animateMomentum&&(e=s-this.startTime,e<this.__momentumDuration?(this.posX=this.startX-(this.momentumX+this.momentumX*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.posY=this.startY-(this.momentumY+this.momentumY*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.translateStrideX&&null===this.startStrideXTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posX-this.endX)<.75*this.translateStrideX)&&(this.startStrideXTime=s),this.translateStrideY&&null===this.startStrideYTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posY-this.endY)<.75*this.translateStrideY)&&(this.startStrideYTime=s)):this.animateMomentum=!1),t=Math.round(this.endX/this.translateStrideX),this.startStrideXTime&&s-this.startStrideXTime>0&&(s-this.startStrideXTime<this.translateStrideDuration?(e=this._bezierTValue((s-this.startStrideXTime)/this.translateStrideDuration,.275,0,.275,1),this.posX=this.posX*(1-e)+t*this.translateStrideX*e,o=!0):this.posX=t*this.translateStrideX),t=Math.round(this.endY/this.translateStrideY),this.startStrideYTime&&s-this.startStrideYTime>0&&(s-this.startStrideYTime<this.translateStrideDuration?(e=this._bezierTValue((s-this.startStrideYTime)/this.translateStrideDuration,.275,0,.275,1),this.posY=this.posY*(1-e)+t*this.translateStrideY*e,o=!0):this.posY=t*this.translateStrideY),i=this.posX,n=this.posY,this._isSelfUpdate=!0,this.translateX=i,this.translateY=n,this._shouldDispatchTranslate&&this._dispatchTranslate(),this._isSelfUpdate=!1,this.isAnimating=this.animateMomentum||o,this.isAnimating?this.needsFrame=!0:this._dispatchTranslateEnd()}}});o.prototype.captureMSPointerDown=o.prototype.capturePointerdown,o.prototype.captureMSPointerMove=o.prototype.capturePointermove,o.prototype.handleMSPointerUp=o.prototype.handlePointerup,o.prototype.handleMSPointerCancel=o.prototype.handlePointercancel,o.prototype.handleMousewheel=o.prototype.handleWheel,o.prototype.handleMSPointerDown=o.prototype._handleStart,o.prototype.handlePointerdown=o.prototype._handleStart,o.prototype.handleMousedown=o.prototype._handleStart,o.prototype.handleTouchstart=o.prototype._handleStart,void 0!==Math.sign&&(o.prototype._isNegativeNumber=function(e){return Math.sign(e)===-1})}}),montageDefine("f886419","ui/repetition.reel/repetition",{dependencies:["../../core/core","../component","../../core/range-controller","../../core/promise","../../composer/press-composer","collections/map","collections/set","../../core/logger"],factory:function(e,t,i){var n=e("../../core/core").Montage,s=e("../component").Component,o=e("../../core/range-controller").RangeController,r=e("../../core/promise").Promise,a=e("../../composer/press-composer").PressComposer,l=e("collections/map"),h=e("collections/set"),d=e("../../core/logger").logger("repetition").color.magenta(),c=60,u=t.Iteration=n.specialize({repetition:{value:null},controller:{value:null},_object:{value:null},object:{get:function(){return this._object},set:function(e){var t;this._object!==e&&(this._object=e,t=this.repetition.contentController.selection.indexOf(e)!==-1,this._selected!==t&&(this.selected=t))}},_fragment:{value:null},_childComponents:{value:null},index:{value:null},_drawnIndex:{value:null},active:{value:null},_noTransition:{value:null},_templateDocumentPart:{value:null},isDirty:{value:!1},_selected:{value:null},selected:{get:function(){return this._selected},set:function(e){e=!!e,this.object&&this.repetition&&this.repetition.contentController&&(e?this.repetition.contentController.selection.add(this.object):this.repetition.contentController.selection["delete"](this.object)),this._selected!==e&&(this._selected=e,this.repetition._addDirtyClassListIteration(this),this.repetition.needsDraw=!0)}},constructor:{value:function(){d.isDebug&&d.debug("Iteration:%s create iteration %O",Object.hash(this),this),this.repetition=null,this.controller=null,this.object=null,this._fragment=null,this._childComponents=null,this.index=null,this._drawnIndex=null,this.active=!1,this.defineBinding("active",{"<->":"repetition.activeIterations.has(())"}),this._noTransition=!1,this.addOwnPropertyChangeListener("active",this),this.addOwnPropertyChangeListener("_noTransition",this),this.addPathChangeListener("index.defined() && _childComponents.defined()",this,"handleComponentModelChange"),this.cachedFirstElement=null}},_timeoutBecomeActiveID:{value:null},_shouldBecomeActive:{value:!1},shouldBecomeActive:{set:function(e){if(this._timeoutBecomeActiveID&&(clearTimeout(this._timeoutBecomeActiveID),this._timeoutBecomeActiveID=null),e){var t=this;this._shouldBecomeActive=!0,this._timeoutBecomeActiveID=setTimeout(function(){t._shouldBecomeActive&&(t.active=!0),t._shouldBecomeActive=!1},c)}else this._shouldBecomeActive=!1},get:function(){return this._shouldBecomeActive}},initWithRepetition:{value:function(e){return this.repetition=e,this}},recycle:{value:function(){this.index=null,this.object=null,this._noTransition=!0}},injectIntoDocument:{value:function(e){null!==this._drawnIndex?(d.isDebug&&d.debug("Iteration:%s retracting from index %s and injecting at %s",Object.hash(this),this._drawnIndex,e),this.retractFromDocument()):d.isDebug&&d.debug("Iteration:%s injecting at index %s",Object.hash(this),e);var t=this,i=this.repetition,n=i.element,s=i._boundaries,o=n.ownerDocument.createTextNode(""),r=s[e];if(s.splice(e,0,o),n.insertBefore(o,r),n.insertBefore(this._fragment,r),i._drawnIterations.splice(e,0,this),i._updateDrawnIndexes(e),i._addDirtyClassListIteration(this),!this._elementsWillBeAddedToMap){var a=this._childComponents.length,l=function(e){e.target.removeEventListener("firstDraw",l,!1),a--,a||t.forEachElement(function(e){i._iterationForElement.set(e,t)})};if(this._childComponents.length>0)for(var h=0;h<this._childComponents.length;h++){var c=this._childComponents[h];c.addEventListener("firstDraw",l,!1),c.needsDraw=!0,c._completedFirstDraw===!0&&console.error("Repetiton:%s child component %O has already drawn.",Object.hash(this),c)}else this.forEachElement(function(e){i._iterationForElement.set(e,t)});this._elementsWillBeAddedToMap=!0}}},_elementsWillBeAddedToMap:{value:!1},retractFromDocument:{value:function(){d.isDebug&&d.debug("Iteration:%s retractFromDocument drawnIndex: %s",Object.hash(this),this._drawnIndex);var e=this._drawnIndex,t=this.repetition,i=t.element,n=t._boundaries[e],s=t._boundaries[e+1];t._boundaries.splice(e,1);for(var o=this._fragment,r=n.nextSibling;r!=s;){var a=r.nextSibling;i.removeChild(r),o.appendChild(r),r=a}i.removeChild(n),this._drawnIndex=null,t._drawnIterations.splice(e,1),t._updateDrawnIndexes(e)}},handleComponentModelChange:{value:function(e){e?this._childComponents.forEach(this.repetition.addChildComponent,this.repetition):this._childComponents&&this._childComponents.forEach(this.repetition.removeChildComponent,this.repetition)}},handlePropertyChange:{value:function(){this.repetition&&(this.repetition._addDirtyClassListIteration(this),this.repetition.needsDraw=!0)}},forEachElement:{value:function(e,t){var i=this.repetition,n=this._drawnIndex;if(null!=n)for(var s=i._boundaries[n];s!==i._boundaries[n+1];s=s.nextSibling)1===s.nodeType&&e.call(t,s)}},firstElement:{get:function(){var e=this.repetition,t=this._drawnIndex;if(null!=t)for(var i=e._boundaries[t];i!==e._boundaries[t+1];i=i.nextSibling)if(1===i.nodeType)return this.cachedFirstElement=i,i}},isComponentTreeLoaded:{value:function(){return null!==this._fragment}},cachedFirstElement:{value:null}});t.Repetition=s.specialize({initWithContent:{value:function(e){return this.object=e,this}},initWithContentController:{value:function(e){return this.contentController=e,this}},content:{get:function(){return this.contentController?this.contentController.content:null},set:function(e){this.contentController.content=e}},_contentController:{value:null},contentController:{set:function(e){this._contentController!==e&&(this._contentController=e)},get:function(){return this._contentController||(this._contentController=new o),this._contentController}},isSelectionEnabled:{value:null},allowsMultipleSelection:{set:function(e){e=!!e,this.contentController.allowsMultipleSelection!==e&&(this.contentController.allowsMultipleSelection=e),e&&!this.isSelectionEnabled&&(this.isSelectionEnabled=!0)},get:function(){return void 0!==this.contentController&&null!==this.contentController&&this.contentController.allowsMultipleSelection}},selectedIterations:{value:null},selectedIndexes:{value:null},activeIterations:{value:null},iterations:{value:null},hasTemplate:{value:!1},_iterationTemplate:{value:null},clonesChildComponents:{value:!0},__pressComposer:{value:null},_pressComposer:{get:function(){return this.__pressComposer||(this.__pressComposer=new a,this.__pressComposer.lazyLoad=!0,this.addComposerForElement(this.__pressComposer,this.element)),this.__pressComposer}},_cancelSelectionRangeChangeListener:{value:null},_selection:{value:null},selection:{get:function(){return this._selection},set:function(e){this.contentController?(this.contentController.selection!==e&&(this.contentController.selection=e),this._selection!==this.contentController.selection&&(this._selection=this.contentController.selection),this._cancelSelectionRangeChangeListener&&this._cancelSelectionRangeChangeListener(),e?(this._cancelSelectionRangeChangeListener=this.contentController.selection.addRangeChangeListener(this,"selection"),this.handleSelectionRangeChange(e,[])):this._cancelSelectionRangeChangeListener=null):this._selection=e}},handleSelectionRangeChange:{value:function(e,t){if(this.iterations){var i,n,s,o,r,a,h=this.iterations.length;if(e.length<=1&&t.length<=1){if(t.length)for(s=t[0],r=0;r<h;r++)this.iterations[r].object===s&&(this.iterations[r].selected=!1);if(e.length)for(s=e[0],r=0;r<h;r++)this.iterations[r].object===s&&(this.iterations[r].selected=!0)}else{for(i=new l,r=0;r<h;r++)o=this.iterations[r],s=o.object,(n=i.get(s))||(n=[],i.set(s,n)),n.push(o);for(r=0;r<t.length;r++)if(n=i.get(t[r]))for(a=0;a<n.length;a++)n[a].selected=!1;for(r=0;r<e.length;r++)if(n=i.get(e[r]))for(a=0;a<n.length;a++)n[a].selected=!0}}}},_visibleIndexes:{value:null},visibleIndexes:{get:function(){return this._visibleIndexes},set:function(e){this._visibleIndexes!==e&&(this._visibleIndexes&&this._visibleIndexes.removeRangeChangeListener&&this._visibleIndexes.removeRangeChangeListener(this,"visibleIndexes"),this._visibleIndexes=e,this._visibleIndexes&&this._visibleIndexes.addRangeChangeListener&&this._visibleIndexes.addRangeChangeListener(this,"visibleIndexes"),this._updateOrganizedContent())}},handleVisibleIndexesRangeChange:{value:function(e,t,i){var n,s;if(this.__controllerOrganizedContent){for(n=[],s=0;s<e.length;s++)n.push(this.__controllerOrganizedContent[e[s]]);this.organizedContent.swap(i,t.length,n),this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(n.length,t.length,i),this.needsDraw=!0)}}},__controllerOrganizedContent:{value:null},_controllerOrganizedContent:{get:function(){return this.__controllerOrganizedContent},set:function(e){this.__controllerOrganizedContent!==e&&(this.__controllerOrganizedContent&&this.__controllerOrganizedContent.removeRangeChangeListener&&this.__controllerOrganizedContent.removeRangeChangeListener(this,"controllerOrganizedContent"),this.__controllerOrganizedContent=e,this.__controllerOrganizedContent&&this.__controllerOrganizedContent.addRangeChangeListener&&this.__controllerOrganizedContent.addRangeChangeListener(this,"controllerOrganizedContent"),this._updateOrganizedContent())}},handleControllerOrganizedContentRangeChange:{value:function(e,t,i){this._visibleIndexes?this._updateOrganizedContent():(this.organizedContent.swap(i,t.length,e),this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(e.length,t.length,i),this.needsDraw=!0))}},_updateOrganizedContent:{value:function(){var e,t;if(this.__controllerOrganizedContent)if(this._visibleIndexes){for(this.organizedContent.length>this._visibleIndexes.length&&(this.organizedContent.length=this._visibleIndexes.length,this._isListeningToOrganizedContentChanges&&this.handleOrganizedContentRangeChange(0,this.organizedContent.length-this._visibleIndexes.length,this._visibleIndexes.length)),e=this.organizedContent.length,t=0;t<this._visibleIndexes.length;t++)this.organizedContent[t]!==this.__controllerOrganizedContent[this._visibleIndexes[t]]&&(this.organizedContent[t]=this.__controllerOrganizedContent[this._visibleIndexes[t]],this._isListeningToOrganizedContentChanges&&this.handleOrganizedContentRangeChange(1,e>t?1:0,t));this._isListeningToOrganizedContentChanges&&(this.needsDraw=!0)}else e=this.organizedContent.length,this.organizedContent.swap(0,e,this.__controllerOrganizedContent),this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(this.__controllerOrganizedContent.length,e,0),this.needsDraw=!0);else e=this.organizedContent.length,this.organizedContent=[],this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(0,e,0),this.needsDraw=!0)}},constructor:{value:function(){this.contentController=null,this.organizedContent=[],this.defineBinding("_controllerOrganizedContent",{"<-":"contentController.organizedContent"}),this.isSelectionEnabled=!1,this.defineBinding("selection",{"<-":"contentController.selection"}),this.defineBinding("selectedIterations",{"<-":"iterations.filter{selected}"}),this.defineBinding("selectedIndexes",{"<-":"selectedIterations.map{index}"}),this.defineBinding("allowsMultipleSelection",{"<-":"contentController.allowsMultipleSelection"}),this._iterationTemplate=null,this.addPathChangeListener(this._setupRequirements,this,"_handleSetupRequirementsChange"),this.addPathChangeListener("innerTemplate",this,"_handleInnerTemplateChange"),this.iterations=[],this._drawnIterations=[],this._freeIterations=[],this._iterationForElement=new l,this._iterationCreationPromise=r.resolve(),this._boundaries=[],this._dirtyClassListIterations=new h,this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._initialContentDrawn=!1,this.addOwnPropertyChangeListener("isSelectionEnabled",this),this._selectionPointer=null,this.activeIterations=[]}},_setupRequirements:{value:"[!_iterationTemplate.defined(),!_newDomContent.defined(),!_shouldClearDomContentOnNextDraw,_isComponentExpanded,_ownerDocumentPart.defined()].every{}"},_handleSetupRequirementsChange:{value:function(e){e&&this._setupIterationTemplate()}},_handleInnerTemplateChange:{value:function(e){this._iterationTemplate&&this._teardownIterationTemplate(),e&&this.getPath(this._setupRequirements)&&this._setupIterationTemplate()}},cleanupDeletedComponentTree:{value:function(e){var t=this._innerTemplate;this._innerTemplate=null,t&&this._teardownIterationTemplate(),e&&this.cancelBindings()}},expandComponent:{value:function(){return this._isComponentExpanded=!0,r.resolve()}},_buildIterationTemplate:{value:function(){var e,t,i,s;return e=this.innerTemplate.clone(),t=e.getSerialization(),i=t.getSerializationObject(),s=n.getInfoForObject(this).label,this._iterationLabel=s+":iteration",i[this._iterationLabel]={},e.setObjects(i),this.innerTemplate.hasParameters()&&this._expandIterationTemplateParameters(e),window._montage_le_flag&&(e.refresher=this,this._leTagIterationTemplate(e)),e}},_rebuildIterationTemplate:{value:function(){var e,t=this._iterationTemplate,i=this.iterations;this._purgeFreeIterations();for(var n,s=0;n=i[s];s++)n.isDirty=!0;this._innerTemplate=null,e=this._buildIterationTemplate(),t.replaceContentsWithTemplate(e)}},refreshTemplate:{value:function(){this._rebuildIterationTemplate()}},_isListeningToOrganizedContentChanges:{value:!1},_setupIterationTemplate:{value:function(){this._iterationTemplate=this._buildIterationTemplate();for(var e,t=this.childComponents,i=t.length-1;e=t[i--];)e.detachFromParentComponent(),e.needsDraw=!1,e.cleanupDeletedComponentTree(!0);this.handleOrganizedContentRangeChange(this.organizedContent.length,0,0),this._isListeningToOrganizedContentChanges=!0,this._canDrawInitialContent=!0,this.needsDraw=!0}},_leTagIterationTemplate:{value:function(e){var t=e.document.body;if(t.children.length>0){var i=this.ownerComponent._montage_metadata.moduleId,n=this._montage_metadata.label;this._leTagStarArgument(i,n,t)}}},_teardownIterationTemplate:{value:function(){this._isListeningToOrganizedContentChanges=!1,this.handleOrganizedContentRangeChange(0,this.organizedContent.length,0),this._purgeFreeIterations(),this._iterationTemplate=null,this._iterationForElement.clear(),this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._selectionPointer=null,this.activeIterations.clear(),this._dirtyClassListIterations.clear()}},_purgeFreeIterations:{value:function(){for(var e=0;e<this._freeIterations.length;e++)for(var t=this._freeIterations[e],i=0;i<t._childComponents.length;i++){var n=t._childComponents[i];this.removeChildComponent(n),n.cleanupDeletedComponentTree(!0)}this._freeIterations.clear()}},_expandIterationTemplateParameters:{value:function(e){for(var t,i,n,s,o,r,a,l,h,d=this;e.hasParameters();){d=d.ownerComponent,t=d._ownerDocumentPart.template,s=d._ownerDocumentPart.objects,r=e.expandParameters(d),n=e.getSerialization().getExternalObjectLabels(),o=e.getInstances(),l=r.labels,i=r.labelsCollisions;for(var c,u=0;c=l[u];u++)a=i&&c in i?i[c]:c,n.indexOf(a)>=0?o[a]=s[c]:(h=t.getObjectMetadata(c),h.owner||(h.owner=s.owner),e.setObjectMetadata(a,h.require,h.label,h.owner))}}},_iterationLabel:{value:null},_iterationCreationPromise:{value:null},_createIteration:{value:function(){var e=this,t=(new this.Iteration).initWithRepetition(this);return this._iterationCreationPromise=this._iterationCreationPromise.then(function(){var i,n,s=e.element.ownerDocument;return i=e._iterationTemplate.getInstances(),i=Object.create(i),i[e._iterationLabel]=t,n=e._iterationTemplate.instantiateWithInstances(i,s).then(function(i){return i.parentDocumentPart=e._ownerDocumentPart,t._templateDocumentPart=i,i.loadComponentTree().then(function(){d.isDebug&&d.debug("Iteration:%s component tree loaded.",Object.hash(t)),t._fragment=i.fragment,t._childComponents=i.childComponents,e.constructIteration(t)}),t}),n.then(null,function(){})}),this._requestedIterations++,t}},constructIteration:{value:function(e){this._createdIterations++,this._createdIterations>=this._requestedIterations&&(this.needsDraw=!0,this._canDraw=!0)}},_controllerIterations:{value:null},_drawnIterations:{value:null},_freeIterations:{value:null},handleOrganizedContentRangeChange:{value:function(e,t,i){var n,s,o,r,a=i,l=this.iterations,h=Math.min(e,t),c=t-h,u=e-h,p=this.organizedContent;for(d.isDebug&&(d.debug("Repetition:%s content changed +%s@%s %O -%s %O ",Object.hash(this),e?e:0,i,t?t:0),d.debug("Repetition:%s +%s -%s iterations",Object.hash(this),u,c)),this._iterationTemplate.isDirty&&this._iterationTemplate.refresh(),o=0;o<h;o++,i++)l[i].object=p[i];if(c>0)for(n=l.splice(i,c),o=0;o<c;o++)s=n[o],s.recycle(),s.isDirty||this._freeIterations.push(s);if(u>0){if(d.isDebug)var m=[];for(;this._freeIterations.length<u;)this._freeIterations.push(this._createIteration()),d.isDebug&&m.push(this._freeIterations[this._freeIterations.length-1]);var f=new Array(u);for(o=h,r=0;o<e;o++,r++){var v=this._freeIterations.pop();d.isDebug&&(m.has(v)||d.debug("Repetition:%s reusing %s",Object.hash(this),Object.hash(v)));var g=p[a+o];v.object=g,f[r]=v}l.swap(i,0,f)}(c>0||u>0)&&this._updateIndexes(i)}},_updateIndexes:{value:function(e){for(var t=this.iterations;e<t.length;e++)t[e].index=e}},_addDirtyClassListIteration:{value:function(e){e.forEachElement(function(t){var i;t&&(i=t.component)?(i.classList[e.active?"add":"remove"]("active"),i.classList[e.selected?"add":"remove"]("selected"),i.classList.remove("no-transition")):this._dirtyClassListIterations.add(e)},this)}},canDraw:{value:function(){var e=this.canDrawGate.value;return e=e&&this._requestedIterations<=this._createdIterations,e=e&&(this._initialContentDrawn||this._canDrawInitialContent)}},_boundaries:{value:null},_dirtyClassListIterations:{value:null},_requestedIterations:{value:null},_createdIterations:{value:null},_canDrawInitialContent:{value:null},_initialContentDrawn:{value:null},draw:{value:function(){this._initialContentDrawn||(this._drawInitialContent(),this._initialContentDrawn=!0);for(var e=this._drawnIterations.length-1;e>=0;e--)null===this._drawnIterations[e].index&&this._drawnIterations[e].retractFromDocument();for(var e=0;e<this.iterations.length;e++){var t=this.iterations[e];t._drawnIndex!==t.index&&t.isComponentTreeLoaded()&&t.injectIntoDocument(e);
}var i=this._dirtyClassListIterations.toArray();this._dirtyClassListIterations.clear(),i.forEach(function(e){e.isComponentTreeLoaded()&&e.forEachElement(function(t){t.component||(t.classList[e.active?"add":"remove"]("active"),t.classList[e.selected?"add":"remove"]("selected"),t.classList.remove("no-transition"))},this)},this)}},_drawInitialContent:{value:function(){for(var e=this.element,t=e.childNodes.length,i=0;i<t;i++)e.removeChild(e.firstChild);var n=e.ownerDocument.createTextNode("");e.appendChild(n),this._boundaries.push(n)}},_updateDrawnIndexes:{value:function(e){for(var t=this._drawnIterations;e<t.length;e++)t[e]._drawnIndex=e}},_selectionPointer:{value:null},_startX:{value:0},_startY:{value:0},_currentActiveIteration:{value:null},handleIsSelectionEnabledChange:{value:function(e){e?this._enableSelectionTracking():this._disableSelectionTracking()}},_enableSelectionTracking:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1)}},_disableSelectionTracking:{value:function(){this._pressComposer.removeEventListener("pressStart",this,!1)}},handlePressStart:{value:function(e){var t=this._findIterationContainingElement(e.targetElement);t&&(this._startX=e.clientX,this._startY=e.clientY,this.__pressComposer.addEventListener("press",this,!1),this.__pressComposer.addEventListener("pressCancel",this,!1),t.shouldBecomeActive=!0,this._currentActiveIteration=t)}},_ignoreSelection:{value:function(){this._currentActiveIteration&&(this._currentActiveIteration.shouldBecomeActive=!1,this._currentActiveIteration=null),this.activeIterations.clear(),this._startX=0,this._startY=0,this.__pressComposer.removeEventListener("press",this,!1),this.__pressComposer.removeEventListener("pressCancel",this,!1)}},handlePressCancel:{value:function(){this._ignoreSelection()}},handlePress:{value:function(e){var t=this._findIterationContainingElement(e.targetElement);t&&this._currentActiveIteration===t&&(t.active=!1,t.selected?this.allowsMultipleSelection&&(t.selected=!1):t.selected=!0),this._ignoreSelection()}},_findIterationContainingElement:{value:function(e){for(var t;e;){if(e===this.element)return this._iterationForElement.get(t);t=e,e=e.parentNode}}},Iteration:{value:u,serializable:!1}})}}),montageDefine("f886419","composer/press-composer",{dependencies:["../core/core","./composer","../core/event/mutable-event"],factory:function(e,t,i){var n=e("../core/core").Montage,s=e("./composer").Composer,o=e("../core/event/mutable-event").MutableEvent,r=t.PressComposer=s.specialize({load:{value:function(){window.PointerEvent?this._element.addEventListener("pointerdown",this,!0):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.addEventListener("MSPointerDown",this,!0):(this._element.addEventListener("touchstart",this,!0),this._element.addEventListener("mousedown",this,!0))}},unload:{value:function(){window.PointerEvent?this._element.removeEventListener("pointerdown",this,!0):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.removeEventListener("MSPointerDown",this,!0):(this._element.removeEventListener("touchstart",this,!0),this._element.removeEventListener("mousedown",this,!0))}},delegate:{value:null},cancelPress:{value:function(){return this._state===r.PRESSED&&(this._cancelPress(),!0)}},_cancelPress:{value:function(e){this._dispatchPressCancel(e),this._endInteraction()}},addEventListener:{value:function(e,t,i){s.prototype.addEventListener.call(this,e,t,i),"longPress"===e&&(this._shouldDispatchLongPress=!0)}},_state:{value:0},state:{get:function(){return this._state}},_shouldDispatchLongPress:{value:!1},_longPressThreshold:{value:1e3},longPressThreshold:{get:function(){return this._longPressThreshold},set:function(e){this._longPressThreshold!==e&&(this._longPressThreshold=e)}},_needDispatchSafePress:{value:!1},_longPressTimeout:{value:null},_observedPointer:{value:null},_initialCenterPositionX:{value:0},_initialCenterPositionY:{value:0},_shouldSaveInitialCenterPosition:{value:!1},_targetElementOnLastTouchMove:{value:null},_endInteraction:{value:function(){this._element&&(this._removeEventListeners(),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.component.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._targetElementOnLastTouchMove=null,this._state=r.UNPRESSED,this._initialCenterPositionX=0,this._initialCenterPositionY=0,this._shouldSaveInitialCenterPosition=!1)}},_changedTouchisObserved:{value:function(e){if(null===this._observedPointer)return!1;for(var t=0,i=e.length;t<i;t++)if(e[t].identifier===this._observedPointer)return t;return!1}},surrenderPointer:{value:function(e,t){var i=this.callDelegateMethod("shouldComposerSurrenderPointerToComponent",this,e,t);return("undefined"==typeof i||i!==!1)&&(this.cancelPress(),!0)}},_shouldPerformPress:{value:function(){return!(this.component.disabled||null!==this._observedPointer)}},capturePointerdown:{value:function(e){"touch"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH?this.captureTouchstart(e):("mouse"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE)&&this.captureMousedown(e)}},handlePointerup:{value:function(e){"touch"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH?this.handleTouchend(e):("mouse"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE)&&this.handleMouseup(e)}},handlePointercancel:{value:function(e){("touch"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.handleTouchcancel(e)}},captureTouchstart:{value:function(e){this._shouldPerformPress()&&(void 0!==e.pointerId?this._observedPointer=e.pointerId:e.changedTouches&&1===e.changedTouches.length&&(this._observedPointer=e.changedTouches[0].identifier),null!==this._observedPointer&&this.component.eventManager.claimPointer(this._observedPointer,this)?this._addPointerDownListener():this._observedPointer=null)}},handleTouchend:{value:function(e){if(null===this._observedPointer)return void this._endInteraction(e);var t;e.pointerId===this._observedPointer?t=e.target:this._changedTouchisObserved(e.changedTouches)!==!1&&(t=this._targetElementOnLastTouchMove||e.target),t&&this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&(this.element===t||this.element.contains(t)?this._dispatchPress(e,"undefined"==typeof e.pointerId?t:null):this._dispatchPressCancel(e),this._endInteraction(e))}},_saveInitialCenterPositionIfNeeded:{value:function(){this._shouldSaveInitialCenterPosition&&(this._saveInitialCenterPosition(),this._shouldSaveInitialCenterPosition=!1)}},_cancelPressIfCenterPositionChange:{value:function(e){return this._saveInitialCenterPositionIfNeeded(),!!this._isPositionChanged(e)&&(this._cancelPress(e),!0)}},_handleMove:{value:function(e){if(null===this._observedPointer)return void this._endInteraction(e);if(this._needDispatchSafePress=!1,("mouse"===this._observedPointer||e.pointerId===this._observedPointer||e.changedTouches&&this._changedTouchisObserved(e.changedTouches)!==!1)&&this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&!this._cancelPressIfCenterPositionChange(e)&&"touchmove"===e.type){var t=e.changedTouches[0];this._targetElementOnLastTouchMove=document.elementFromPoint(t.clientX,t.clientY)}}},captureWheel:{value:function(e){return null===this._observedPointer?void this._endInteraction(e):void((e.target===this.element||e.target===window||"function"==typeof e.target.contains&&e.target.contains(this.element)||this.element.contains(e.target))&&this._cancelPressIfCenterPositionChange(e))}},handleTouchcancel:{value:function(e){null!==this._observedPointer&&e.pointerId!==this._observedPointer&&this._changedTouchisObserved(e.changedTouches)===!1||(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this._dispatchPressCancel(e),this._endInteraction(e))}},captureMousedown:{value:function(e){0===e.button&&this._shouldPerformPress()&&(this._observedPointer="mouse",this.component.eventManager.claimPointer(this._observedPointer,this),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?this._addPointerDownListener():this._observedPointer=null)}},_handlePointerDown:{value:function(e){if(this._removePointerDownListener(),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)){if(this._needDispatchSafePress=!1,"touchstart"===e.type){var t=this;window.nativeAddEventListener("touchstart",function i(e){window.nativeRemoveEventListener("touchstart",i,!1),t._needDispatchSafePress=!e.defaultPrevented},!1)}this._shouldSaveInitialCenterPosition=!0,this._addEventListeners(),this._dispatchPressStart(e)}else this._observedPointer=null}},captureScroll:{value:function(e){(e.target===this.element||e.target===window||"function"==typeof e.target.contains&&e.target.contains(this.element)||this.element.contains(e.target))&&this._cancelPressIfCenterPositionChange(e)}},handleMouseup:{value:function(e){if(null===this._observedPointer)return void this._endInteraction(e);if(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)){for(var t=e.target;t!==this._element&&t&&t.parentNode;)t=t.parentNode;if(t===this._element)return this._dispatchPress(e),void this._endInteraction(e)}this._cancelPress(e)}},handleDragstart:{value:function(e){this._cancelPress(e)}},_saveInitialCenterPosition:{value:function(){if(this.element instanceof HTMLElement){var e=this.element.getBoundingClientRect();this._initialCenterPositionX=e.left+e.width/2,this._initialCenterPositionY=e.top+e.height/2}}},_isPositionChanged:{value:function(e){if(this.element instanceof HTMLElement){var t=this.element.getBoundingClientRect(),i=t.left+t.width/2,n=t.top+t.height/2;if(this._initialCenterPositionX!==i||this._initialCenterPositionY!==n){var o=e.type,r=Math.abs(this._initialCenterPositionX-i),a=Math.abs(this._initialCenterPositionY-n),l="mouse"===this._observedPointer||"wheel"===o||"mousewheel"===o||"scroll"===o?this._mouseRadiusThreshold:this._touchRadiusThreshold;return s.isCoordinateOutsideRadius(r,a,l)}}return!1}},_mouseRadiusThreshold:{value:2},_touchRadiusThreshold:{value:4},_addPointerDownListener:{value:function(){window.PointerEvent?this._element.addEventListener("pointerdown",this,!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.addEventListener("MSPointerDown",this,!1):"mouse"===this._observedPointer?this._element.addEventListener("mousedown",this,!1):this._element.addEventListener("touchstart",this,!1)}},_removePointerDownListener:{value:function(){window.PointerEvent?this._element.removeEventListener("pointerdown",this,!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.removeEventListener("MSPointerDown",this,!1):"mouse"===this._observedPointer?this._element.removeEventListener("mousedown",this,!1):this._element.removeEventListener("touchstart",this,!1)}},_addEventListeners:{value:function(){window.PointerEvent?(document.addEventListener("pointerup",this,!1),document.addEventListener("pointermove",this,!1),document.addEventListener("pointercancel",this,!1)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(document.addEventListener("MSPointerUp",this,!1),document.addEventListener("MSPointerMove",this,!1),document.addEventListener("MSPointerCancel",this,!1)):"mouse"===this._observedPointer?(document.addEventListener("mouseup",this,!1),document.addEventListener("mousemove",this,!1),this._element.addEventListener("dragstart",this,!1)):(document.addEventListener("touchend",this,!1),document.addEventListener("touchcancel",this,!1),document.addEventListener("touchmove",this,!1));var e="undefined"!=typeof window.onwheel||"undefined"!=typeof window.WheelEvent?"wheel":"mousewheel";document.addEventListener(e,this,!0),document.addEventListener("scroll",this,!0)}},_removeEventListeners:{value:function(){window.PointerEvent?(document.removeEventListener("pointerup",this,!1),document.removeEventListener("pointermove",this,!1),document.removeEventListener("pointercancel",this,!1)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(document.removeEventListener("MSPointerUp",this,!1),document.removeEventListener("MSPointerMove",this,!1),document.removeEventListener("MSPointerCancel",this,!1)):"mouse"===this._observedPointer?(document.removeEventListener("mouseup",this,!1),document.removeEventListener("mousemove",this,!1),this._element.removeEventListener("dragstart",this,!1)):(document.removeEventListener("touchend",this,!1),document.removeEventListener("touchcancel",this,!1),document.removeEventListener("touchmove",this,!1));var e="undefined"!=typeof window.onwheel||"undefined"!=typeof window.WheelEvent?"wheel":"mousewheel";document.removeEventListener(e,this,!0),document.removeEventListener("scroll",this,!0)}},_createPressEvent:{enumerable:!1,value:function(e,t){var i,n,s=t;return t||(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!0,!0,null)),i=new a,i.event=t,i.type=e,i.pointer=this._observedPointer,i.targetElement=t.target,t.changedTouches&&(n=this._changedTouchisObserved(t.changedTouches))!==!1&&(s=i.touch=t.changedTouches[n]),s&&(i.clientX=s.clientX,i.clientY=s.clientY,i.pageX=s.pageX,i.pageY=s.pageY),i}},_dispatchPressStart:{enumerable:!1,value:function(e){if(this._state=r.PRESSED,this.dispatchEvent(this._createPressEvent("pressStart",e)),this._shouldDispatchLongPress){var t=this;this._longPressTimeout=setTimeout(function(){t._dispatchLongPress()},this._longPressThreshold)}}},_dispatchPress:{enumerable:!1,value:function(e,t){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null);var i=this._createPressEvent("press",e);if(t&&(i.targetElement=t,this._needDispatchSafePress||e.defaultPrevented)){var n=this,s=document.defaultView.defaultEventManager,o=function(r){(t===r.target||s._couldEmulatedEventHaveWrongTarget(e.changedTouches[0],r,s._emulatedEventRadiusThreshold,s._emulatedEventTimestampThreshold))&&n._dispatchSafePress(i,o)};return window.nativeAddEventListener("mousedown",o,!0),void(o.timeoutID=setTimeout(function(){n._dispatchSafePress(i,o)},300))}this.dispatchEvent(i),this._state=r.UNPRESSED}},_dispatchSafePress:{value:function(e,t){clearTimeout(t.timeoutID),t.timeoutID=null,window.nativeRemoveEventListener("mousedown",t,!0),this.dispatchEvent(e),this._state=r.UNPRESSED}},_dispatchLongPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(this.dispatchEvent(this._createPressEvent("longPress",e)),this._longPressTimeout=null)}},_dispatchPressCancel:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this._state=r.CANCELLED,this.dispatchEvent(this._createPressEvent("pressCancel",e))}}},{UNPRESSED:{value:0},PRESSED:{value:1},CANCELLED:{value:2}});r.prototype.captureMSPointerDown=r.prototype.capturePointerdown,r.prototype.handleMSPointerUp=r.prototype.handlePointerup,r.prototype.handleMSPointerCancel=r.prototype.handlePointercancel,r.prototype.handleMSPointerMove=r.prototype._handleMove,r.prototype.handlePointermove=r.prototype._handleMove,r.prototype.handleTouchmove=r.prototype._handleMove,r.prototype.handleMousemove=r.prototype._handleMove,r.prototype.handleMousewheel=r.prototype.handleWheel,r.prototype.handleMSPointerDown=r.prototype._handlePointerDown,r.prototype.handlePointerdown=r.prototype._handlePointerDown,r.prototype.handleMousedown=r.prototype._handlePointerDown,r.prototype.handleTouchstart=r.prototype._handlePointerDown;var a=function(){var e,t,i,s,r,a;for(e=o.specialize({type:{value:"press"},_event:{enumerable:!1,value:null},event:{get:function(){return this._event},set:function(e){this._event=e}},_touch:{enumerable:!1,value:null},touch:{get:function(){return this._touch},set:function(e){this._touch=e}}}),t=["altKey","ctrlKey","metaKey","shiftKey","cancelBubble","currentTarget","defaultPrevented","eventPhase","timeStamp","preventDefault","stopImmediatePropagation","stopPropagation"],i=["clientX","clientY","pageX","pageY","screenX","screenY","target"],s=function(e){return{get:function(){return this._event[e]}}},r=function(e){return{get:function(){return this._touch?this._touch[e]:this._event[e]}}},a=t.length-1;a>=0;a--)n.defineProperty(e,t[a],s(t[a]));for(a=i.length-1;a>=0;a--)n.defineProperty(e,i[a],r(i[a]));return e}()}}),montageDefine("f886419","ui/flow.reel/flow-translate-composer",{dependencies:["../../composer/translate-composer","../../core/geometry/point"],factory:function(e,t,i){var n=e("../../composer/translate-composer").TranslateComposer,s=e("../../core/geometry/point").Point,o=s.convertPointFromPageToNode;t.FlowTranslateComposer=n.specialize({constructor:{value:function(){this.handleMousewheel=this.handleWheel}},stealChildrenPointer:{value:!0},_linearScrollingVector:{value:[-300,0]},linearScrollingVector:{get:function(){return this._linearScrollingVector},set:function(e){this._linearScrollingVector=e}},startTranslateSpeed:{value:500},startTranslateRadius:{value:8},_startPageX:{value:null},_startPageY:{value:null},_pageX:{value:null},_pageY:{value:null},_pointerStartX:{value:null},_pointerStartY:{value:null},_contentOffsetX:{value:null},_contentOffsetY:{value:null},_superStart:{value:n.prototype._start},_start:{value:function(e,t,i,n){this._superStart(e,t,i,n);var r=window.getComputedStyle(this._element,null),a=this.convertCssPixelsPropertyStringToNumber(r.getPropertyValue("border-left-width")),l=this.convertCssPixelsPropertyStringToNumber(r.getPropertyValue("border-top-width")),h=this.convertCssPixelsPropertyStringToNumber(r.getPropertyValue("padding-left")),d=this.convertCssPixelsPropertyStringToNumber(r.getPropertyValue("padding-top")),c=o(this._element,(new s).init(e,t));this._pointerStartX=this._pointerX=c.x-a-h,this._pointerStartY=this._pointerY=c.y-l-d,this._contentOffsetX=this._startPageX-this._pointerStartX,this._contentOffsetY=this._startPageY-this._pointerStartY,this._computePointedElement(),this._startPageX=this._pageX=e,this._startPageY=this._pageY=t,this._startScroll=this._scroll,this._previousScrollDelta=0,this._scrollEnd=null}},_analyzeMovement:{value:function(e){var t,i,n,s=e.velocity;s&&(t=s.speed,t>=this.startTranslateSpeed?this._stealPointer():(i=this.startPageX-e.pageX,n=this.startPageY-e.pageY,i*i+n*n>this.startTranslateRadius*this.startTranslateRadius&&this._stealPointer()))}},_dispatchTranslateStart:{value:function(e,t){var i=document.createEvent("CustomEvent");i.initCustomEvent("translateStart",!0,!0,null),i.scroll=this._scroll,i.translateX=0,i.translateY=0,i.pointer=this._observedPointer,this.dispatchEvent(i)}},_dispatchTranslateEnd:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateEnd",!0,!0,null),e.scroll=this._scroll,e.translateX=0,e.translateY=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_dispatchTranslateCancel:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateCancel",!0,!0,null),e.scroll=this._scroll,e.translateX=0,e.translateY=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_dispatchTranslate:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translate",!0,!0,null),e.scroll=this._scroll,e.translateX=0,e.translateY=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_move:{value:function(e,t){this._isFirstMove&&(this._dispatchTranslateStart(),this._isFirstMove=!1),this._pageX=e,this._pageY=t,this._updateLinearScroll(),this._shouldDispatchTranslate&&this._dispatchTranslate()}},_end:{value:function(e){if(this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)){this.startTime=Date.now(),this.endX=this.startX=this._pageX,this.endY=this.startY=this._pageY;var t=e.velocity;this._hasMomentum&&(t.speed>40||this.translateStrideX)?("vertical"!=this._axis?this.momentumX=t.x*this._pointerSpeedMultiplier*(this._invertXAxis?1:-1):this.momentumX=0,"horizontal"!=this._axis?this.momentumY=t.y*this._pointerSpeedMultiplier*(this._invertYAxis?1:-1):this.momentumY=0,this.endX=this.startX+this.momentumX*this.__momentumDuration/2e3,this.endY=this.startY+this.momentumY*this.__momentumDuration/2e3,this.startStrideXTime=null,this.startStrideYTime=null,this.animateMomentum=!0):this.animateMomentum=!1,this.animateMomentum?this._animationInterval():this._isFirstMove||this._dispatchTranslateEnd()}this._releaseInterest()}},_translateEndTimeout:{value:null},_mousewheelStrideTimeout:{value:null},_previousDelta:{value:0},_listenToWheelEvent:{value:!0},captureWheel:{value:function(){this.eventManager.componentClaimingPointer(this._WHEEL_POINTER)||this.eventManager.claimPointer(this._WHEEL_POINTER,this.component)}},handleWheel:{value:function(e){var t=this;if(this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this.component)){var i,n=this._scroll,s=e.wheelDeltaX||-e.deltaX||0,o=e.wheelDeltaY||-e.deltaY||0;this.translateStrideX?(clearTimeout(this._mousewheelStrideTimeout),i=Math.abs(this._linearScrollingVector[0])>Math.abs(this._linearScrollingVector[1])?Math.abs(s)>Math.abs(o)?this._linearScrollingVector[0]*-s/Math.abs(this._linearScrollingVector[0]):0:Math.abs(s)>Math.abs(o)?0:this._linearScrollingVector[1]*-o/Math.abs(this._linearScrollingVector[1]),(null===this._mousewheelStrideTimeout||Math.abs(i)>Math.abs(this._previousDelta*(null===this._mousewheelStrideTimeout?2:4)))&&(i>1?this.callDelegateMethod("previousStride",this):i<-1&&this.callDelegateMethod("nextStride",this)),this._mousewheelStrideTimeout=setTimeout(function(){t._mousewheelStrideTimeout=null,t._previousDelta=0},70),t._previousDelta=i,0!==i&&this._shouldPreventDefault(e)&&e.preventDefault()):(null===this._translateEndTimeout&&this._dispatchTranslateStart(),this._pageX=this._pageX+20*s/100,this._pageY=this._pageY+20*o/100,this._updateScroll(),this._dispatchTranslate(),clearTimeout(this._translateEndTimeout),this._translateEndTimeout=setTimeout(function(){t._dispatchTranslateEnd(),t._translateEndTimeout=null},400),n!==this._scroll&&this._shouldPreventDefault(e)&&e.preventDefault()),this.eventManager.forfeitPointer(this._WHEEL_POINTER,this.component)}}},_scroll:{value:0},scroll:{get:function(){return this._scroll},set:function(e){null!==this.minScroll&&e<this.minScroll&&(e=this.minScroll),null!==this.maxScroll&&e>this.maxScroll&&(e=this.maxScroll),this._scroll=e}},minScroll:{value:null},maxScroll:{value:null},_flow:{value:null},flow:{get:function(){return this._flow},set:function(e){this._flow=e,this.component=e}},_updateScroll:{value:function(){this._updateLinearScroll()}},_updateLinearScroll:{value:function(){var e=this._flow,t=e.isCameraEnabled?500/e._height:1,i=(this._pageX-this._startPageX)*this._linearScrollingVector[0]*t*e._sceneScaleX.denominator/e._sceneScaleX.numerator,n=(this._pageY-this._startPageY)*this._linearScrollingVector[1]*t*e._sceneScaleY.denominator/e._sceneScaleY.numerator,s=this._linearScrollingVector[0]*this._linearScrollingVector[0]+this._linearScrollingVector[1]*this._linearScrollingVector[1],o=(i+n)/s;this.scroll+=o-this._previousScrollDelta,this._previousScrollDelta=o}},frame:{value:function(e){this.isAnimating&&this._animationInterval()}},convertCssPixelsPropertyStringToNumber:{value:function(e){return"string"==typeof e&&"px"===e.substr(-2)?1*e.substr(0,e.length-2):0}},_rayPointDistance:{value:function(e,t){var i,n,s,o,r;return i=e[0]*t[0]+e[1]*t[1]+e[2]*t[2],i>=0&&(n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i/=n,s=e[0]*i-t[0],o=e[1]*i-t[1],r=e[2]*i-t[2],Math.sqrt(s*s+o*o+r*r))}},_closerIndex:{value:null},_computePointedElement_spline:{value:[]},_computePointedElement:{value:function(){var e=this._flow._splinePaths,t=e.length;if(t){var i,n,s,o,r,a,l,h,d,c=this._flow,u=c._viewpointTargetPoint[0]-c._viewpointPosition[0],p=c._viewpointTargetPoint[2]-c._viewpointPosition[2],m=Math.atan2(u,p),f=p*Math.cos(-m)-u*Math.sin(-m),v=Math.atan2(c._viewpointTargetPoint[1]-c._viewpointPosition[1],f),g=.5*this._element.clientWidth-this._pointerX,_=this._pointerY-.5*this._element.clientHeight,b=.5*this._element.offsetHeight/Math.tan(c._viewpointFov*c._doublePI*(1/720)),y=this._computePointedElement_spline,x=c._visibleIndexes,w=x.length,C=c._sceneScale,S=null,P=1e100;for(n=b*Math.cos(v)-_*Math.sin(v),_=b*Math.sin(v)+_*Math.cos(v),i=n*Math.cos(m)-g*Math.sin(m),g=n*Math.sin(m)+g*Math.cos(m),l=[g,_,i],d=0;d<e.length;d++)for(d=0;d<e.length;d++)y[d]=e[d].transform([C.x.numerator/C.x.denominator,0,0,0,0,C.y.numerator/C.y.denominator,0,0,0,0,C.z.numerator/C.z.denominator,0,-c._viewpointPosition[0]+.5*c._firstIterationWidth+c._firstIterationOffsetLeft,-c._viewpointPosition[1]+.5*c._firstIterationHeight+c._firstIterationOffsetTop,-c._viewpointPosition[2],1]);for(d=0;d<w;d++)h=this._flow.offset(x[d]),s=h.pathIndex,o=h.slideTime,a=y[s]._convertSplineTimeToBezierIndexTime(o),null!==a&&(pos=y[s].getPositionAtIndexTime(a),r=this._rayPointDistance(l,pos),r!==!1&&r<P&&(P=r,S=x[d]));this._closerIndex=S,y.length=0}}},_previousScrollDelta:{value:0},_startScroll:{value:0},_translateStride:{value:null},translateStride:{get:function(){return this._translateStride},set:function(e){this._translateStride=e,this.translateStrideX=e}},_scrollEnd:{value:null},_scrollStart:{value:null},_hasMomentum:{value:!0},isLimitedToSingleStride:{value:!1},_animationInterval:{value:function(){var e,t,i,n,s,o,r=Date.now(),a=!1;s=this.minScroll,o=this.maxScroll,this.minScroll=null,this.maxScroll=null,null===this._scrollEnd&&(this._scrollStart=this.scroll,this._pageX=this.endX,this._pageY=this.endY,this._updateScroll(),this._scrollEnd=this.scroll,this.isLimitedToSingleStride&&this.translateStrideX&&(this._scrollEnd>Math.floor(this._scrollStart)+this.translateStrideX&&(this._scrollEnd=Math.floor(this._scrollStart)+this.translateStrideX),this._scrollEnd<Math.ceil(this._scrollStart)-this.translateStrideX&&(this._scrollEnd=Math.ceil(this._scrollStart)-this.translateStrideX)),this._pageX=this.startX,this._pageY=this.startY,this._updateScroll()),this.animateMomentum?(e=r-this.startTime,e<this.__momentumDuration?(this._pageX=this.startX+(this.momentumX+this.momentumX*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this._pageY=this.startY+(this.momentumY+this.momentumY*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this._updateScroll(),this.translateStrideX&&null===this.startStrideXTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.scroll-this._scrollEnd)<.75*this.translateStrideX)&&(this.startStrideXTime=r,this._strideStartScroll=this._scroll)):this.animateMomentum=!1):null===this.startStrideXTime&&(this.startStrideXTime=this.startTime,this._strideStartScroll=this._scrollStart),n=this.scroll,this.startStrideXTime&&r-this.startStrideXTime>0&&(i=Math.round(this._scrollEnd/this.translateStrideX),r-this.startStrideXTime<this.translateStrideDuration?(e=this._bezierTValue((r-this.startStrideXTime)/this.translateStrideDuration,.275,0,.275,1),t=(r-this.startStrideXTime)/this.translateStrideDuration,n=n*(1-t)+(i*this.translateStrideX*e+this._strideStartScroll*(1-e))*t,a=!0):(n=i*this.translateStrideX,this.animateMomentum=!1)),this.minScroll=s,this.maxScroll=o,n<s&&(n=s,this.animateMomentum=!1,a=!1),n>o&&(n=o,this.animateMomentum=!1,a=!1),this.scroll=n,this.isAnimating=this.animateMomentum||a,this.isAnimating?this.needsFrame=!0:(this._dispatchTranslateEnd(),this._scrollEnd=null)}}})}}),montageDefine("67f6380","ui/details.reel/details.html",{text:'<!DOCTYPE html><html><head><meta http-equiv=content-type content="text/html; charset=utf-8"><style>.Details{border-radius:3px;box-shadow:0 0 30px rgba(0,0,0,.8);overflow:hidden}.Details .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400;margin:0;font-size:18px;line-height:42px;padding:0 84px 0 12px;height:42px;background:-webkit-linear-gradient(top,hsla(0,0%,50%,.95),hsla(0,0%,25%,.95));background:-moz-linear-gradient(top,hsla(0,0%,50%,.95),hsla(0,0%,25%,.95));background:-ms-linear-gradient(top,hsla(0,0%,50%,.95),hsla(0,0%,25%,.95));background:linear-gradient(top,hsla(0,0%,50%,.95),hsla(0,0%,25%,.95))}.Details .title:before{content:"";color:rgba(0,0,0,.2);position:absolute;left:0;top:3px;right:0;text-align:center;line-height:30px;font-size:30px;-webkit-transform-origin:50% 0 0;-moz-transform-origin:50% 0 0;-ms-transform-origin:50% 0 0;transform-origin:50% 0 0;-webkit-transform:scale3d(.9,.3,1);-moz-transform:scale3d(.9,.3,1);-ms-transform:scale3d(.9,.3,1);transform:scale3d(.9,.3,1)}.Details .maturity{margin:0 2px 0 4px;padding:0 .5em;border:1px solid hsl(0,0%,100%);-webkit-border-radius:5px;-moz-border-radius:5px;-ms-border-radius:5px;border-radius:5px;color:hsl(0,0%,100%)}.Details .expand:active .title:before{color:rgba(0,0,0,.4)}.Details.expanded .title:before{content:""}.summary{margin:0;font-size:13px;line-height:29px;background:-webkit-linear-gradient(top,hsla(0,0%,10%,.95),hsla(0,0%,25%,.95));background:-moz-linear-gradient(top,hsla(0,0%,10%,.95),hsla(0,0%,25%,.95));background:-ms-linear-gradient(top,hsla(0,0%,10%,.95),hsla(0,0%,25%,.95));background:linear-gradient(top,hsla(0,0%,10%,.95),hsla(0,0%,25%,.95));border-bottom:1px solid rgba(0,0,0,.5);display:-webkit-box;display:-moz-box;display:-ms-box;display:flex}.summary>div{padding:0 6px;text-align:center;-webkit-box-flex:1;-moz-box-flex:1;-ms-box-flex:1;flex:1;border-left:1px solid rgba(0,0,0,.3);color:#bbb;position:relative}.summary>div:first-child{border-left:none}.summary>div>div{border-bottom:1px solid rgba(0,0,0,.3);font-size:13px;color:#777}.summary *{white-space:nowrap}.Details .action-buttons .digit-Button.button,.Details .action-buttons .digit-Button:focus,.Details .action-buttons .digit-Button:active,.Details .action-buttons .digit-Button.active,.Details .action-buttons .digit-Button:hover{float:left;margin:0;padding:0;display:block;width:75px;border:none;border-radius:0;color:#fff;font-size:15px;font-weight:400;font-family:inherit;height:42px;background:0 0;border-left:1px solid rgba(0,0,0,.3);-webkit-tap-highlight-color:rgba(0,0,0,0)}.scroller{height:101px;color:#fff;background:hsl(0,0%,13%)}.Details:after{content:"";height:20px;bottom:0;left:16px;right:16px;position:absolute;border-bottom:11px solid hsl(0,0%,13%);background:-webkit-linear-gradient(top,hsla(0,0%,13%,0),hsla(0,0%,13%,1));background:-moz-linear-gradient(top,hsla(0,0%,13%,0),hsla(0,0%,13%,1));background:-ms-linear-gradient(top,hsla(0,0%,13%,0),hsla(0,0%,13%,1));background:linear-gradient(top,hsla(0,0%,13%,0),hsla(0,0%,13%,1));-webkit-transform:translate3d(0,1px,0);-moz-transform:translate3d(0,1px,0);-ms-transform:translate3d(0,1px,0);transform:translate3d(0,1px,0);pointer-events:none}.description{font-size:14px;line-height:20px}.description,.Details-attributions{margin:0;padding:12px 20px 22px;text-align:left}.Details-attributions{font-size:12px;line-height:14px;color:gray}.action-buttons{position:absolute;top:0;right:0}.Details .expand.digit-Button,.Details .expand.digit-Button:hover,.Details .expand.digit-Button.active,.Details .expand.digit-Button:active,.Details .expand.digit-Button.focus{color:#fff;display:block;border:none;border-radius:0;height:auto;padding:0;margin:0;background:0 0;-webkit-tap-highlight-color:rgba(0,0,0,0);font-size:12px;min-width:30px;cursor:default}.icon-popularity{margin-bottom:2px;display:inline-block;width:12px;height:50px;vertical-align:bottom;background-size:50px auto;background-image:url(ui/details.reel/icon_11517/icon_11517.svg);background-repeat:no-repeat;position:absolute;bottom:-3px;right:6px}@media (max-width:500px){.Details .expand.digit-Button,.Details .expand.digit-Button:hover,.Details .expand.digit-Button.active,.Details .expand.digit-Button:active,.Details .expand.digit-Button.focus{cursor:pointer}}@media all and (max-width:500px) and (orientation:portrait){.scroller{height:118px}}@media all and (max-width:500px) and (orientation:landscape){.scroller{height:79px}}@media (max-width:500px) or (orientation:portrait){.summary>div{font-size:9.5px;padding:0;border:none}.Details .title{font-size:16px;padding-right:75px}.Details .action-buttons .digit-Button.button,.Details .action-buttons .digit-Button:focus,.Details .action-buttons .digit-Button:active,.Details .action-buttons .digit-Button.active,.Details .action-buttons .digit-Button:hover{font-size:13px;width:64px}}.Details.visible{opacity:1;-webkit-transition:opacity .35s,-webkit-transform .35s;-moz-transition:opacity .35s,-moz-transform .35s;-ms-transition:opacity .35s,-ms-transform .35s;transition:opacity .35s,transform .35s}</style><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"},"popularityIcon":{"#":"popularityIcon"}},"bindings":{"classList.has(\'visible\')":{"<-":"@owner.isVisible"}}},"audienceScore":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"audienceScore"}},"bindings":{"value":{"<-":"@owner.movie.vote_average"}}},"criticsScore":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"criticsScore"}},"bindings":{"value":{"<-":"@owner.movie.popularity.round(0)"}}},"dates":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"dates"}},"bindings":{"value":{"<-":"@owner.movie.release_date"}}},"description":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"description"}},"bindings":{"value":{"<-":"@owner.movie.overview"}}},"expandButton":{"prototype":"digit/ui/button.reel","properties":{"element":{"#":"expand"}},"listeners":[{"type":"action","listener":{"@":"owner"}}]},"maturity":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"maturity"}},"bindings":{"value":{"<-":"@owner.movie.mpaaRating"}}},"runtime":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"runtime"}},"bindings":{"value":{"<-":"(@owner.movie.runtime/60).floor() + \'h \' + @owner.movie.runtime%60 + \'min\'"}}},"scroller":{"prototype":"digit/ui/scroller.reel","properties":{"element":{"#":"scroller"},"hasMomentum":true}},"title":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"title"}},"bindings":{"value":{"<-":"@owner.movie.title"}}},"trailerButton":{"prototype":"digit/ui/button.reel","properties":{"element":{"#":"trailerButton"}},"listeners":[{"type":"action","listener":{"@":"owner"}}]}}</script></head><body><div data-montage-id=owner class=Details><div data-montage-id=expand class=expand><h2 data-montage-id=title class=title></h2></div><div class=summary><div><div>Release</div><time data-montage-id=dates class=score></time></div><div><div>Rating</div><span data-montage-id=maturity class=maturity></span></div><div><div>Duration</div><span data-montage-id=runtime class=score></span></div><div><div>Popularity</div><span data-montage-id=criticsScore class=score></span> <span data-montage-id=popularityIcon class=icon-popularity></span></div><div><div>Score</div><span data-montage-id=audienceScore class=score></span> / 10</div></div><div data-montage-id=scroller class=scroller><p data-montage-id=description class=description></p><div class=Details-attributions>Creative Commons  Attribution (CC BY 3.0) Thermometer designed by Megan Sheehan from the Noun Project</div></div><nav class=action-buttons><button data-montage-id=trailerButton class="button button-trailer">Trailer</button></nav></div></body></html>'
}),montageDefine("8f5b8e8","url",{dependencies:["punycode","./util","querystring"],factory:function(e,t,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function s(e,t,i){if(e&&h.isObject(e)&&e instanceof n)return e;var s=new n;return s.parse(e,t,i),s}function o(e){return h.isString(e)&&(e=s(e)),e instanceof n?e.format():n.prototype.format.call(e)}function r(e,t){return s(e,!1,!0).resolve(t)}function a(e,t){return e?s(e,!1,!0).resolveObject(t):t}var l=e("punycode"),h=e("./util");t.parse=s,t.resolve=r,t.resolveObject=a,t.format=o,t.Url=n;var d=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],m=["{","}","|","\\","^","`"].concat(p),f=["'"].concat(m),v=["%","/","?",";","#"].concat(f),g=["/","?","#"],_=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=e("querystring");n.prototype.parse=function(e,t,i){if(!h.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),s=n!==-1&&n<e.indexOf("#")?"?":"#",o=e.split(s),r=/\\/g;o[0]=o[0].replace(r,"/"),e=o.join(s);var a=e;if(a=a.trim(),!i&&1===e.split("#").length){var c=u.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],t?this.query=S.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=d.exec(a);if(p){p=p[0];var m=p.toLowerCase();this.protocol=m,a=a.substr(p.length)}if(i||p||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var P="//"===a.substr(0,2);!P||p&&w[p]||(a=a.substr(2),this.slashes=!0)}if(!w[p]&&(P||p&&!C[p])){for(var T=-1,E=0;E<g.length;E++){var I=a.indexOf(g[E]);I!==-1&&(T===-1||I<T)&&(T=I)}var M,D;D=T===-1?a.lastIndexOf("@"):a.lastIndexOf("@",T),D!==-1&&(M=a.slice(0,D),a=a.slice(D+1),this.auth=decodeURIComponent(M)),T=-1;for(var E=0;E<v.length;E++){var I=a.indexOf(v[E]);I!==-1&&(T===-1||I<T)&&(T=I)}T===-1&&(T=a.length),this.host=a.slice(0,T),a=a.slice(T),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var k=this.hostname.split(/\./),E=0,z=k.length;E<z;E++){var L=k[E];if(L&&!L.match(b)){for(var R="",B=0,Y=L.length;B<Y;B++)R+=L.charCodeAt(B)>127?"x":L[B];if(!R.match(b)){var X=k.slice(0,E),A=k.slice(E+1),j=L.match(y);j&&(X.push(j[1]),A.unshift(j[2])),A.length&&(a="/"+A.join(".")+a),this.hostname=X.join(".");break}}}this.hostname.length>_?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=l.toASCII(this.hostname));var H=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+H,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!x[m])for(var E=0,z=f.length;E<z;E++){var F=f[E];if(a.indexOf(F)!==-1){var V=encodeURIComponent(F);V===F&&(V=escape(F)),a=a.split(F).join(V)}}var q=a.indexOf("#");q!==-1&&(this.hash=a.substr(q),a=a.slice(0,q));var U=a.indexOf("?");if(U!==-1?(this.search=a.substr(U),this.query=a.substr(U+1),t&&(this.query=S.parse(this.query)),a=a.slice(0,U)):t&&(this.search="",this.query={}),a&&(this.pathname=a),C[m]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var H=this.pathname||"",W=this.search||"";this.path=H+W}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",n=this.hash||"",s=!1,o="";this.host?s=e+this.host:this.hostname&&(s=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var r=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||C[t])&&s!==!1?(s="//"+(s||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),r&&"?"!==r.charAt(0)&&(r="?"+r),i=i.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),r=r.replace("#","%23"),t+s+i+r+n},n.prototype.resolve=function(e){return this.resolveObject(s(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(h.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var i=new n,s=Object.keys(this),o=0;o<s.length;o++){var r=s[o];i[r]=this[r]}if(i.hash=e.hash,""===e.href)return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),l=0;l<a.length;l++){var d=a[l];"protocol"!==d&&(i[d]=e[d])}return C[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!C[e.protocol]){for(var c=Object.keys(e),u=0;u<c.length;u++){var p=c[u];i[p]=e[p]}return i.href=i.format(),i}if(i.protocol=e.protocol,e.host||w[e.protocol])i.pathname=e.pathname;else{for(var m=(e.pathname||"").split("/");m.length&&!(e.host=m.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),i.pathname=m.join("/")}if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var f=i.pathname||"",v=i.search||"";i.path=f+v}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var g=i.pathname&&"/"===i.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=_||g||i.host&&e.pathname,y=b,x=i.pathname&&i.pathname.split("/")||[],m=e.pathname&&e.pathname.split("/")||[],S=i.protocol&&!C[i.protocol];if(S&&(i.hostname="",i.port=null,i.host&&(""===x[0]?x[0]=i.host:x.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host=null),b=b&&(""===m[0]||""===x[0])),_)i.host=e.host||""===e.host?e.host:i.host,i.hostname=e.hostname||""===e.hostname?e.hostname:i.hostname,i.search=e.search,i.query=e.query,x=m;else if(m.length)x||(x=[]),x.pop(),x=x.concat(m),i.search=e.search,i.query=e.query;else if(!h.isNullOrUndefined(e.search)){if(S){i.hostname=i.host=x.shift();var P=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");P&&(i.auth=P.shift(),i.host=i.hostname=P.shift())}return i.search=e.search,i.query=e.query,h.isNull(i.pathname)&&h.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!x.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var T=x.slice(-1)[0],E=(i.host||e.host||x.length>1)&&("."===T||".."===T)||""===T,I=0,M=x.length;M>=0;M--)T=x[M],"."===T?x.splice(M,1):".."===T?(x.splice(M,1),I++):I&&(x.splice(M,1),I--);if(!b&&!y)for(;I--;I)x.unshift("..");!b||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),E&&"/"!==x.join("/").substr(-1)&&x.push("");var D=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(S){i.hostname=i.host=D?"":x.length?x.shift():"";var P=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");P&&(i.auth=P.shift(),i.host=i.hostname=P.shift())}return b=b||i.host&&x.length,b&&!D&&x.unshift(""),x.length?i.pathname=x.join("/"):(i.pathname=null,i.path=null),h.isNull(i.pathname)&&h.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var e=this.host,t=c.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}}}),montageDefine("f886419","core/range-controller",{dependencies:["./core","collections/generic-collection","collections/listen/array-changes","core/deprecate","./core","./core"],factory:function(e,t,i){var n=e("./core").Montage,s=e("collections/generic-collection"),o=e("collections/listen/array-changes").observableArrayProperties,r=e("core/deprecate"),a=Object.freeze([]),l=function(e,t){var i=e;return i.__proto__=l.prototype,i.rangeController=t,i.contentEquals=e&&e.contentEquals||Object.is,i};l.prototype=Object.create(Array.prototype,o),Object.defineProperty(l.prototype,"clone",{value:function(){return this.slice()}}),self.swap,Object.defineProperty(l.prototype,"oldSwap",{configurable:!1,value:o.swap.value}),Object.defineProperty(l.prototype,"swap",{configurable:!1,value:function(e,t,i){return this.swap_or_push(e,t,i)}}),l.prototype.oldPush=o.push.value,Object.defineProperty(l.prototype,"push",{configurable:!1,value:function(){for(var e=-1,t=arguments.length,i=Array(t);++e<t;)i[e]=arguments[e];this.swap_or_push(this.length,0,i)}}),Object.defineProperty(l.prototype,"swap_or_push",{configurable:!1,value:function(e,t,i){var n=this.rangeController.content;this.contentEquals=n&&n.contentEquals||Object.is,e=e>=0?e:this.length+e;var s=this.length,o=Math.min(t,s-e);if(i){i.contentEquals=this.contentEquals;var r=i.filter(function(t,s){if(n&&!n.has(t))return!1;if(i.findLast(t)>s)return!1;var r=this.find(t);return r<0||r>=e&&r<e+o},this)}else r=a;var l;l=0===o?a:Array.prototype.slice.call(this,e,e+o);var h=r.length-l.length,d=Math.max(this.length+h,e+r.length);if(!this.rangeController.allowsMultipleSelection&&d>1){var c=r.length?r[r.length-1]:this.one();return 0===s?(this.oldPush(c),a):this.oldSwap(0,s,[c])}return this.rangeController.avoidsEmptySelection&&0===d?n.has(this[0])?this.length-1===0?a:this.oldSwap(1,this.length-1):0===this.length?(this.oldPush(n.one()),a):this.oldSwap(0,this.length,[n.one()]):this.oldSwap(e,t,r)}}),t.RangeController=n.specialize({constructor:{value:function(e){this.content=null,this._selection=new l([],this),this.sortPath=null,this.filterPath=null,this.reversed=!1,this.selectAddedContent=!1,this.deselectInvisibleContent=!1,this.clearSelectionOnOrderChange=!1,this.avoidsEmptySelection=!1,this.organizedContent=[],this.organizedContent.addRangeChangeListener(this,"organizedContent"),this.defineBinding("_filteredContent",{"<-":"$filterPath.defined() ? content.filter{path($filterPath)} : content"}),this.defineBinding("_sortedContent",{"<-":"$sortPath.defined() ? _filteredContent.sorted{path($sortPath)} : _filteredContent"}),this.defineBinding("organizedContent.rangeContent()",{"<-":"$reversed ?? 0 ? _sortedContent.reversed() : _sortedContent"}),this.addRangeAtPathChangeListener("content",this,"handleContentRangeChange"),this.addPathChangeListener("sortPath",this,"handleOrderChange"),this.addPathChangeListener("reversed",this,"handleOrderChange"),this.addOwnPropertyChangeListener("allowsMultipleSelection",this),this.iterations=[],e&&this.initWithContent(e)}},initWithContent:{value:function(e){return this.content=e,this}},sortPath:{value:null},reversed:{value:null},filterPath:{value:null},selectAddedContent:{value:!1},deselectInvisibleContent:{value:!1},clearSelectionOnOrderChange:{value:!1},avoidsEmptySelection:{value:!1},allowsMultipleSelection:{value:!1},multiSelect:{set:function(e){r.deprecationWarning("multiSelect","allowsMultipleSelection"),this.allowsMultipleSelection=!!e},get:function(){return r.deprecationWarning("multiSelect","allowsMultipleSelection"),this.allowsMultipleSelection}},organizedContent:{value:null},iterations:{value:null},_selection:{value:null},selection:{get:function(){return this._selection},set:function(e){var t=[0,this._selection.length];e&&e.toArray&&(t=t.concat(e.toArray())),this._selection.splice.apply(this._selection,t)}},select:{value:function(e){!this.allowsMultipleSelection&&this.selection.length>=1&&this.selection.clear(),this.selection.add(e)}},deselect:{value:function(e){(!this.avoidsEmptySelection||this.selection.length>1)&&this.selection["delete"](e)}},clearSelection:{value:function(){(!this.avoidsEmptySelection||this.selection.length>1)&&this.selection.clear()}},add:{value:function(e){var t;return this.content||(this.content=[]),t=this.content.add(e),t&&this.handleAdd(e),t}},push:{value:function(){for(var e=this.content.push.apply(this.content,arguments),t=0;t<arguments.length;t++)this.handleAdd(arguments[t]);return e}},pop:{value:function(){return this.content.pop()}},shift:{value:function(){return this.content.shift()}},unshift:{value:function(){for(var e=this.content.unshift.apply(this.content,arguments),t=0;t<arguments.length;t++)this.handleAdd(arguments[t]);return e}},splice:{value:function(){for(var e=this.content.splice.apply(this.content,arguments),t=2;t<arguments.length;t++)this.handleAdd(arguments[t]);return e}},swap:{value:function(e,t,i){var n=this.content.swap.apply(this.content,arguments);if(i)for(var e=2;e<i.length;e++)this.handleAdd(i[e]);return n}},"delete":{value:function(e){return this.content["delete"](e)}},has:{value:function(e){return!!this.content&&this.content.has(e)}},addEach:{value:s.prototype.addEach},deleteEach:{value:s.prototype.deleteEach},clear:{value:function(){this.content.clear()}},addContent:{value:function(){var e=new this.contentConstructor;return this.add(e),e}},_contentConstructor:{value:null},contentConstructor:{get:function(){return this._contentConstructor?this._contentConstructor:this.content&&this.content.contentConstructor?this.content.contentConstructor:Object},set:function(e){this._contentConstructor=e}},handleContentRangeChange:{value:function(e,t,i){if(this.selection.length>0){var n=this.content&&this.content.contentEquals||Object.is;t.deleteEach(e,n),this.selection.length&&(this.selection.deleteEach(t),0===this.selection.length&&this.content&&this.content.length&&this.avoidsEmptySelection&&!this.allowsMultipleSelection&&this.selection.add(this.content[this.content.length-1]))}}},handleSelectionRangeChange:{value:function(e,t,i){if(this.selection)if(this.content){for(var n=[],s=0;s<e.length;s++)this.content.has(e[s])||n.push(e[s]);if(this._selection.deleteEach(n),!this.allowsMultipleSelection&&this._selection.length>1){var o=this._selection.pop();this._selection.clear(),this._selection.add(o)}this.avoidsEmptySelection&&0==this._selection.length&&this._selection.add(t[0])}else this._selection.clear()}},handleOrganizedContentRangeChange:{value:function(e,t,i){if(this.deselectInvisibleContent&&this.selection){var n=t.clone(1);n.deleteEach(e),this.selection.deleteEach(t)}}},handleOrderChange:{value:function(){this.clearSelectionOnOrderChange&&this.selection&&this.selection.clear()}},handleAdd:{value:function(e){this.selectAddedContent&&this.selection&&(!this.allowsMultipleSelection&&this.selection.length?this.selection.swap(0,this.selection.length,[e]):this.selection.add(e))}},handleAllowsMultipleSelectionChange:{value:function(){if(this.selection){var e=this.selection.length;if(!this.allowsMultipleSelection&&e>1){var t=this._selection.pop();this._selection.clear(),this._selection.add(t)}}}}},{blueprintModuleId:e("./core")._blueprintModuleIdDescriptor,blueprint:e("./core")._blueprintDescriptor})}}),montageDefine("f886419","ui/flow.reel/flow-bezier-spline",{dependencies:["../../core/core"],factory:function(e,t,i){var n=e("../../core/core").Montage,s=t.FlowBezierSpline=n.specialize({constructor:{value:function(){this._knots=[],this._densities=[],this._getStyleAtIndexTimeBuffer=[]}},_parameterKeys:{value:void 0},knots:{get:function(){return this._knots},set:function(e){this._knots=e}},previousHandlers:{get:function(){return this._previousHandlers||(this._previousHandlers=[]),this._previousHandlers},set:function(e){this._previousHandlers=e}},nextHandlers:{get:function(){return this._nextHandlers||(this._nextHandlers=[]),this._nextHandlers},set:function(e){this._nextHandlers=e}},densities:{get:function(){return this._densities},set:function(e){this._densities=e,this._densitiesLength=this._densities.length,this._maxTime=null}},_parameters:{value:{}},parameters:{get:function(){return this._parameters||(this._parameters={}),this._parameters},set:function(e){this._parameters=e}},_maxTime:{enumerable:!1,value:null},computeMaxTime:{value:function(){return this._computeDensitySummation(),this._densitySummation.length?this._maxTime=this._densitySummation[this._densitySummation.length-1]:this._maxTime=0,this._maxTime}},_densitySummation:{enumerable:!1,value:null},_computeDensitySummation:{enumerable:!1,value:function(){var e,t=this.densities,i=t.length-1,n=0;for(this._densitySummation=[],e=0;e<i;e++)n+=(t[e]+t[e+1])/2,this._densitySummation[e]=n;this._maxTime=null}},_convertSplineTimeToBezierIndexTime:{enumerable:!1,value:function(e){if(e<0)return null;if(null===this._maxTime&&this.computeMaxTime(),e>=this._maxTime)return null;for(var t,i,n,s,o,r=this._densitySummation,a=r.length,l=a-1,h=a>>1;h;)l-h>=0&&r[l-h]>e?l-=h:h>>=1;return t=e-(l?r[l-1]:0),n=this._densities[l],s=this._densities[l+1],o=n-s,i=o<-1e-10||o>1e-10?(n-Math.sqrt(n*n+2*(s-n)*t))/o:t/n,[l,i]}},getPositionAtIndexTime:{value:function(e,t){var i=e[0],n=e[1],s=this._knots[i],o=this._nextHandlers[i],r=this._previousHandlers[i+1],a=this._knots[i+1],l=1-n,h=l*l*l,d=l*l*n*3,c=l*n*n*3,u=n*n*n;return t?[t.x.numerator*(s[0]*h+o[0]*d+r[0]*c+a[0]*u)/t.x.denominator,t.y.numerator*(s[1]*h+o[1]*d+r[1]*c+a[1]*u)/t.y.denominator,t.z.numerator*(s[2]*h+o[2]*d+r[2]*c+a[2]*u)/t.z.denominator]:[s[0]*h+o[0]*d+r[0]*c+a[0]*u,s[1]*h+o[1]*d+r[1]*c+a[1]*u,s[2]*h+o[2]*d+r[2]*c+a[2]*u]}},getRotationAtIndexTime:{value:function(e){var t,i,n,s=e[0],o=e[1],r=1-o,a=this._parameters;return t="undefined"!=typeof a.rotateX?a.rotateX.data[s]*r+a.rotateX.data[s+1]*o:0,i="undefined"!=typeof a.rotateY?a.rotateY.data[s]*r+a.rotateY.data[s+1]*o:0,n="undefined"!=typeof a.rotateZ?a.rotateZ.data[s]*r+a.rotateZ.data[s+1]*o:0,[t,i,n]}},_getStyleAtIndexTimeBuffer:{value:null},getStyleAtIndexTime:{value:function(e){var t,i,n,s,o,r,a,l=e[0],h=e[1],d=this._parameters,c=1-h,u=this._getStyleAtIndexTimeBuffer;if(u.length=0,s=this._parameterKeys)for(o=s.length,t=0;t<o;t++)i=s[t],r=d[i],a=r.data,"rotateX"!==i&&"rotateY"!==i&&"rotateZ"!==i&&void 0!==a[l]&&void 0!==a[l+1]&&(n=i,n+=":",n+=1e-5*(1e5*(a[l]*c+a[l+1]*h)>>0),n+=r.units,n+=";",u.push(n));return u.join("")}},transformVectorArray:{value:function(e,t){var i,n,s=e.length,o=[];for(n=0;n<s;n++)i=e[n],i&&(o[n]=[i[0]*t[0]+i[1]*t[4]+i[2]*t[8]+t[12],i[0]*t[1]+i[1]*t[5]+i[2]*t[9]+t[13],i[0]*t[2]+i[1]*t[6]+i[2]*t[10]+t[14]]);return o}},transform:{value:function(e){var t=new s;return t._densities=this._densities,t._densitySummation=this._densitySummation,t._knots=this.transformVectorArray(this.knots,e),t._previousHandlers=this.transformVectorArray(this.previousHandlers,e),t._nextHandlers=this.transformVectorArray(this.nextHandlers,e),t}},deCasteljau:{value:function(e,t,i,n,s){var o=1-s,r=o*e[0]+s*t[0],a=o*t[0]+s*i[0],l=o*i[0]+s*n[0],h=o*r+s*a,d=o*a+s*l,c=o*h+s*d,u=o*e[1]+s*t[1],p=o*t[1]+s*i[1],m=o*i[1]+s*n[1],f=o*u+s*p,v=o*p+s*m,g=o*f+s*v,_=o*e[2]+s*t[2],b=o*t[2]+s*i[2],y=o*i[2]+s*n[2],x=o*_+s*b,w=o*b+s*y,C=o*x+s*w;return[[e,[r,u,_],[h,f,x],[c,g,C]],[[c,g,C],[d,v,w],[l,m,y],n]]}},cubic:{enumerable:!1,value:function(e,t,i,n,s){return((e*s+t)*s+i)*s+n}},cubeRoot:{enumerable:!1,value:function(e){return e>0?Math.pow(e,1/3):-Math.pow(-e,1/3)}},cubicRealRoots:{enumerable:!1,value:function(e,t,i,n){var s=1e-10,o=Math;if(e<-s||e>s){var r=1/e,a=t*r,l=i*r,h=(3*l-a*a)*(1/9),d=(4.5*a*l-13.5*n*r-a*a*a)*(1/27),c=h*h*h+d*d;if(c>s){var u=o.sqrt(c);return[this.cubeRoot(d+u)+this.cubeRoot(d-u)+a*(-1/3)]}if(c>-s){if(d<-s||d>s){var p=this.cubeRoot(d),m=2*p+a*(-1/3),f=a*(-1/3)-p;return m<f?[m,f]:[f,m]}return[a*(-1/3)]}var v=o.acos(d/o.sqrt(-h*h*h))*(1/3),g=o.sqrt(-h),_=g*o.sin(v)*1.7320508075688772,b=a*(-1/3);return g*=o.cos(v),[b-g-_,b-g+_,b+2*g]}if(t<-s||t>s){var y=i*i-4*t*n;return y>=0?(y=o.sqrt(y),[(-i-y)/(2*t),(y-i)/(2*t)]):[]}return i<-s||i>s?[-n/i]:[]}},_halfPI:{enumerable:!1,value:.5*Math.PI},reflectionMatrix:{enumerable:!1,value:function(e,t,i){var n=Math,s=this._halfPI-n.atan2(t,e),o=n.sin(s),r=n.cos(s),a=this._halfPI-n.atan2(i,e*o+t*r),l=n.sin(a);return[l*o,r*l,n.cos(a)]}},reflectedY:{enumerable:!1,value:function(e,t,i,n){return e*n[0]+t*n[1]+i*n[2]}},getScaledKnots:{value:function(e){var t,i=[];for(t=0;t<this._knots.length;t++)this._knots[t]&&(i[t]=[e.x.numerator*this._knots[t][0]/e.x.denominator,e.y.numerator*this._knots[t][1]/e.y.denominator,e.z.numerator*this._knots[t][2]/e.z.denominator]);return i}},getScaledPreviousHandlers:{value:function(e){var t,i=[];for(t=0;t<this._previousHandlers.length;t++)this._previousHandlers[t]&&(i[t]=[e.x.numerator*this._previousHandlers[t][0]/e.x.denominator,e.y.numerator*this._previousHandlers[t][1]/e.y.denominator,e.z.numerator*this._previousHandlers[t][2]/e.z.denominator]);return i}},getScaledNextHandlers:{value:function(e){var t,i=[];for(t=0;t<this._nextHandlers.length;t++)this._nextHandlers[t]&&(i[t]=[e.x.numerator*this._nextHandlers[t][0]/e.x.denominator,e.y.numerator*this._nextHandlers[t][1]/e.y.denominator,e.z.numerator*this._nextHandlers[t][2]/e.z.denominator]);return i}},directedPlaneBezierIntersection:{enumerable:!1,value:function(e,t,i,n,s,o,r,a){for(var l,h,d=this.reflectionMatrix(n[0],n[1],n[2]),c=this.reflectedY(s[0]-e,s[1]-t,s[2]-i,d),u=this.reflectedY(o[0]-e,o[1]-t,o[2]-i,d),p=this.reflectedY(r[0]-e,r[1]-t,r[2]-i,d),m=this.reflectedY(a[0]-e,a[1]-t,a[2]-i,d),f=3*(u-p)+m-c,v=3*(c+p)-6*u,g=3*(u-c),_=this.cubicRealRoots(f,v,g,c),b=0,y=0,x=[];y<_.length&&_[y]<=0;)y++;for(;y<_.length&&_[y]<1;)l=b,b=_[y],h=.5*(l+b),this.cubic(f,v,g,c,h)>=0&&x.push([l,b]),y++;return h=.5*(b+1),this.cubic(f,v,g,c,h)>=0&&x.push([b,1]),x}}})}}),montageDefine("f886419","ui/overlay.reel/overlay",{dependencies:["../component","../../composer/key-composer","../../composer/press-composer","../../core/event/event-manager"],factory:function(e,t,i){var n=e("../component").Component,s=e("../../composer/key-composer").KeyComposer,o=e("../../composer/press-composer").PressComposer,r=e("../../core/event/event-manager").defaultEventManager,a="montage-Overlay",l=a+"--visible";t.Overlay=n.specialize({__pressComposer:{value:null},_pressComposer:{get:function(){return this.__pressComposer||(this.__pressComposer=new o,this.__pressComposer.delegate=this,this.addComposerForElement(this._pressComposer,this.element.ownerDocument)),this.__pressComposer}},__keyComposer:{value:null},_keyComposer:{get:function(){return this.__keyComposer||(this.__keyComposer=new s,this.__keyComposer.keys="escape",this.__keyComposer.identifier="escape",this.addComposerForElement(this.__keyComposer,this.element.ownerDocument.defaultView)),this.__keyComposer}},_anchor:{value:null},anchor:{set:function(e){this._anchor=e,this.needsDraw=!0},get:function(){return this._anchor}},_position:{value:null},position:{set:function(e){this._position=e,this.needsDraw=!0},get:function(){return this._position}},_drawPosition:{value:null},_isShown:{value:!1},isShown:{get:function(){return this._isShown}},_resizeHandlerTimeout:{value:null},_previousActiveTarget:{value:null},delegate:{value:null},_dismissOnExternalInteraction:{value:!0},dismissOnExternalInteraction:{set:function(e){e!==this._dismissOnExternalInteraction&&(this._dismissOnExternalInteraction=e,e?this._pressComposer.addEventListener("pressStart",this,!1):this._pressComposer.removeEventListener("pressStart",this,!1))},get:function(){return this._dismissOnExternalInteraction}},enterDocument:{value:function(e){e&&(this.element.ownerDocument.body.appendChild(this.element),this.attachToParentComponent())}},show:{value:function(){if(!this._isShown){if(this.isModal&&(this._previousActiveTarget=r.activeTarget,r.activeTarget=this,r.activeTarget!==this))return void console.warn("Overlay "+this.identifier+" can't become the active target because ",r.activeTarget," didn't surrender it.");this.attachToParentComponent(),this.classList.add(l),this.loadComposer(this._pressComposer),this.loadComposer(this._keyComposer),this._isShown=!0,this.needsDraw=!0,this._keyComposer.addEventListener("keyPress",this,!1),this.element.ownerDocument.defaultView.addEventListener("resize",this),this._dismissOnExternalInteraction&&this._pressComposer.addEventListener("pressStart",this,!1)}}},hide:{value:function(){this._isShown&&(this.classList.remove(l),this.unloadComposer(this._pressComposer),this.unloadComposer(this._keyComposer),this._isShown=!1,this.needsDraw=!0,this.isModal&&(r.activeTarget=this._previousActiveTarget),this._keyComposer.removeEventListener("keyPress",this,!1),this.element.ownerDocument.defaultView.removeEventListener("resize",this),this._dismissOnExternalInteraction&&this._pressComposer.removeEventListener("pressStart",this,!1))}},isModal:{value:!0},shouldComposerSurrenderPointerToComponent:{value:function(e,t,i){return i&&i.element&&!this.element.contains(i.element)&&this.hide(),!0}},surrendersActiveTarget:{value:function(e){var t,i=!(this.isModal&&this.isShown);return!i&&e&&e.element&&(i=this.element.contains(e.element)),t=this.callDelegateMethod("overlayShouldDismissOnSurrenderActiveTarget",this,e,i),void 0!==t?t:i}},handleResize:{value:function(){this.isShown&&(this.needsDraw=!0)}},handlePressStart:{value:function(e){this.element.contains(e.targetElement)||this.dismissOverlay(e)}},handleKeyPress:{value:function(e){"escape"===e.identifier&&this.dismissOverlay(e)}},dismissOverlay:{value:function(e){var t=!1;return this._isShown&&(t=this.callDelegateMethod("shouldDismissOverlay",this,e.targetElement,e.type),(void 0===t||t)&&(this.hide(),this._dispatchDismissEvent())),t}},willDraw:{value:function(){this._isShown?this._calculatePosition():this.callDelegateMethod("didHideOverlay",this)}},draw:{value:function(){if(this._isShown){var e=this._drawPosition;this.element.style.top=e.top+"px",this.element.style.left=e.left+"px",this.element.style.visibility="visible",this.callDelegateMethod("didShowOverlay",this)}else this.element.style.visibility="hidden"}},didDraw:{value:function(){this._isShown||this.detachFromParentComponent()}},_calculatePosition:{value:function(){var e,t;e=this.position?this.position:this.anchor?this._calculateAnchorPosition():this._calculateCenteredPosition(),t=this.callDelegateMethod("willPositionOverlay",this,e),t&&(e=t),this._drawPosition=e}},_calculateAnchorPosition:{value:function(){var e,t=this.anchor,i=this.element.offsetWidth,n=t.getBoundingClientRect(),s=t.offsetHeight||0,o=t.offsetWidth||0;return e={top:n.top+s,left:n.left+o/2-i/2},e.left<0&&(e.left=0),e}},_calculateCenteredPosition:{value:function(){var e=this.element.ownerDocument.defaultView,t=e.innerHeight,i=e.innerWidth,n=this.element.offsetHeight,s=this.element.offsetWidth;return{top:t/2-n/2,left:i/2-s/2}}},_dispatchDismissEvent:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("dismiss",!0,!0,null),this.dispatchEvent(e)}}})}}),montageDefine("d543d2d","ui/scroller.reel/scroll-bars.reel/scroll-bars",{dependencies:["montage/ui/component"],factory:function(e,t,i){var n=e("montage/ui/component").Component,s=t.ScrollBars=n.specialize({constructor:{value:function(){this["super"]()}},enterDocument:{value:function(e){if(e&&!s.transformCssProperty){var t=this.element.style;"undefined"!=typeof t.webkitTransform?s.transformCssProperty="webkitTransform":"undefined"!=typeof t.MozTransform?s.transformCssProperty="MozTransform":"undefined"!=typeof t.msTransform?s.transformCssProperty="msTransform":s.transformCssProperty="transform","undefined"!=typeof t.webkitTransition?s.transitionCssProperty="webkitTransition":"undefined"!=typeof t.MozTransition?s.transitionCssProperty="MozTransition":"undefined"!=typeof t.msTransition?s.transitionCssProperty="msTransition":s.transitionCssProperty="transition"}}},_verticalScroll:{value:0},_horizontalScroll:{value:0},_verticalLength:{value:0},_horizontalLength:{value:0},verticalScroll:{get:function(){return this._verticalScroll},set:function(e){this._verticalScroll=e,this.needsDraw=!0}},horizontalScroll:{get:function(){return this._horizontalScroll},set:function(e){this._horizontalScroll=e,this.needsDraw=!0}},verticalLength:{get:function(){return this._verticalLength},set:function(e){this._verticalLength=e,this.needsDraw=!0}},horizontalLength:{get:function(){return this._horizontalLength},set:function(e){this._horizontalLength=e,this.needsDraw=!0}},_opacity:{value:0},opacity:{get:function(){return this._opacity},set:function(e){this._opacity=e,this.needsDraw=!0}},_isDisplayUpdated:{value:!1},_displayVertical:{value:!1},displayVertical:{get:function(){return this._displayVertical},set:function(e){this._displayVertical!==e&&(this._displayVertical=e,this._isDisplayUpdated=!0,this.needsDraw=!0)}},_displayHorizontal:{value:!1},displayHorizontal:{get:function(){return this._displayHorizontal},set:function(e){this._displayHorizontal!==e&&(this._displayHorizontal=e,this._isDisplayUpdated=!0,this.needsDraw=!0)}},_top:{value:!1},_bottomClip:{value:!1},_bottom:{value:!1},_left:{value:!1},_rightClip:{value:!1},_right:{value:!1},_hasResizedHorizontal:{value:!1},_hasResizedVertical:{value:!1},willDraw:{value:function(){this._offsetWidth!==this._element.offsetWidth&&(this._offsetWidth=this._element.offsetWidth,this._hasResizedHorizontal=!0),this._offsetHeight!==this._element.offsetHeight&&(this._offsetHeight=this._element.offsetHeight,this._hasResizedVertical=!0)}},draw:{value:function(){var e,t,i,n;if(this._isDisplayUpdated){var o=this._displayVertical?"block":"none",r=this._displayHorizontal?"block":"none";this._top.style.display=this._bottomClip.style.display=o,this._left.style.display=this._rightClip.style.display=r,this._isDisplayUpdated=!1}if(this._hasResizedHorizontal&&this._displayHorizontal&&(this._rightClip.style.width=this._right.style.width=this._offsetWidth-4+"px",this._rightClip.style.clip="rect(-1px,"+(this._offsetWidth-3)+"px,6px,3px)",this._hasResizedHorizontal=!1),this._hasResizedVertical&&this._displayVertical&&(this._bottomClip.style.height=this._bottom.style.height=this._offsetHeight-4+"px",this._bottomClip.style.clip="rect(3px,6px,"+(this._offsetHeight-3)+"px,-1px)",this._hasResizedVertical=!1),this._opacity){if(this._displayHorizontal){i=this._offsetWidth-9-(this._displayVertical?6:0),e=Math.floor(i*this._horizontalLength),n=i-e,t=1-this._horizontalLength?Math.floor(n*this._horizontalScroll/(1-this._horizontalLength)):0,t<0&&(e+=t,e<0&&(e=0),t=0),t>n&&(e+=Math.floor(n-t),e<0&&(e=0),t=i-e);var a=e-this._offsetWidth+9+"px,0",l=t+2+"px,0";this._right.style[s.transformCssProperty]="translate3d("+a+",0)",this._left.style[s.transformCssProperty]=this._rightClip.style[s.transformCssProperty]="translate3d("+l+",0)",this._left.style[s.transitionCssProperty]=this._right.style[s.transitionCssProperty]="none",this._left.style.opacity=this._right.style.opacity=this._opacity}if(this._displayVertical){i=this._offsetHeight-9-(this._displayHorizontal?6:0),e=Math.floor(i*this._verticalLength),n=i-e,t=1-this._verticalLength?Math.floor(n*this._verticalScroll/(1-this._verticalLength)):0,t<0&&(e+=t,e<0&&(e=0),t=0),t>n&&(e+=Math.floor(n-t),e<0&&(e=0),t=i-e);var h="0,"+(e-this._offsetHeight+9)+"px",d="0,"+(t+2)+"px";this._bottom.style[s.transformCssProperty]="translate3d("+h+",0)",this._top.style[s.transformCssProperty]=this._bottomClip.style[s.transformCssProperty]="translate3d("+d+",0)",this._top.style[s.transitionCssProperty]=this._bottom.style[s.transitionCssProperty]="none",this._top.style.opacity=this._bottom.style.opacity=this._opacity}}else this._displayHorizontal&&(this._left.style[s.transitionCssProperty]=this._right.style[s.transitionCssProperty]="300ms opacity",this._left.style.opacity=this._right.style.opacity=0),this._displayVertical&&(this._top.style[s.transitionCssProperty]=this._bottom.style[s.transitionCssProperty]="300ms opacity",this._top.style.opacity=this._bottom.style.opacity=0)}}},{transformCssProperty:{value:null},transitionCssProperty:{value:null}})}}),montageDefine("67f6380","ui/main.reel/main.html",{text:'<!DOCTYPE html><html><head><meta http-equiv=Content-Type content="text/html; charset=utf-8"><style>.Main{top:0;left:0;right:0;bottom:0;font-family:Helvetica,Arial,sans-serif}.Main,.Main-content{position:fixed;overflow:hidden}.Main-details.details-fade-out{-webkit-transition:-webkit-transform .35s;-moz-transition:-moz-transform .35s;-ms-transition:-ms-transform .35s;transition:transform .35s;opacity:0}@media (min-width:501px) and (max-height:660px) and (min-height:501px){.logo{position:fixed;top:50%;left:50%;display:block;margin-top:-340px;margin-left:-210.75px;width:421.5px;height:172.5px;z-index:3;padding:0;pointer-events:none;display:none}.Main-content{top:0;left:0;right:0;bottom:0}.Main-content .Main-strip{margin-top:-530px}.Main-details{opacity:0;position:fixed;z-index:3;bottom:10px;width:500px;left:50%;margin-left:-250px;height:180px;-webkit-transform:translate3d(0,148px,0);-moz-transform:translate3d(0,148px,0);-ms-transform:translate3d(0,148px,0);transform:translate3d(0,148px,0)}.Main-details.expanded{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}@media (min-width:501px) and (min-height:660px){.logo{position:fixed;top:50%;left:50%;display:block;margin-top:-365px;margin-left:-210.75px;width:421.5px;height:172.5px;z-index:3;padding:0;pointer-events:none}.Main-content{top:0;left:0;right:0;bottom:0}.Main-content .Main-strip{margin-top:-525px}.Main-details{opacity:0;position:fixed;z-index:3;top:50%;width:500px;left:50%;margin-left:-250px;margin-top:138px;height:203px}.Main-details .title:before{display:none}}@media (max-width:500px) and (orientation:portrait){.logo{display:none}.Main-content{top:0;left:0;right:0;bottom:64px}.Main-content .Main-strip{margin-top:-525px}.Main-details{opacity:0;position:fixed;z-index:1;bottom:64px;left:0;right:0;height:220px;border-radius:0;-webkit-transform:translate3d(0,177px,0);-moz-transform:translate3d(0,177px,0);-ms-transform:translate3d(0,177px,0);transform:translate3d(0,177px,0)}.Main-details.expanded{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}@media (max-height:500px) and (orientation:landscape){.logo{display:none}.Main-content{top:0;left:126px;right:0;bottom:0}.Main-content .Main-strip{top:-65%;left:0;bottom:-65%;right:0;margin-top:-50px;height:auto;width:auto}.Main-details{opacity:0;position:absolute;bottom:10px;left:10px;right:10px;height:180px;max-width:600px;min-width:400px;margin:auto;-webkit-transform:translate3d(0,148px,0);-moz-transform:translate3d(0,148px,0);-ms-transform:translate3d(0,148px,0);transform:translate3d(0,148px,0)}.Main-details.expanded{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}.MontageMade{position:absolute;top:0;left:25px;width:50px;height:100px;overflow:hidden;font-size:0;color:transparent;background:url(assets/image/montage-made.svg) no-repeat center;background-size:100% auto}.MontageMade:hover{opacity:.9}.MontageMade:active{top:2px}@media (min-width:501px) and (max-width:790px) and (max-height:660px) and (min-height:501px){.Overlay .film:after{display:none}}@media (min-width:501px) and (max-width:790px) and (min-height:660px){.Overlay .film:after{display:none}}@media (max-width:500px) and (orientation:portrait){.Overlay .film:after{display:none}.Overlay .top{display:none}}@media (max-height:500px) and (orientation:landscape){.Overlay .film:after{display:none}}</style><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"},"mainContent":{"#":"mainContent"}}},"categories":{"prototype":"ui/categories.reel","properties":{"element":{"#":"categories"}},"bindings":{"categories":{"<-":"@owner.moviesService.categories"}}},"details":{"prototype":"ui/details.reel","properties":{"element":{"#":"details"}},"bindings":{"movie":{"<-":"@moviestrip.categoryContentController.selection.one()"}}},"moviestrip":{"prototype":"ui/moviestrip.reel","properties":{"element":{"#":"moviestrip"},"movieDetails":{"@":"details"}},"bindings":{"categoryContentController":{"<-":"@owner.moviesService.categories.selection.one().contentController"}}},"player":{"prototype":"ui/player.reel","properties":{"element":{"#":"player"}}}}</script></head><body><div data-montage-id=owner class=Main><img class=logo src=../../assets/image/logo.png alt=logo><div data-montage-id=categories></div><div data-montage-id=mainContent class=Main-content><div data-montage-id=moviestrip class=Main-strip></div><div data-montage-id=details class=Main-details></div></div><a class=MontageMade href=http://montagejs.org>Made with Montage</a><div data-montage-id=player class=popup></div></div></body></html>'
}),montageDefine("67f6380","ui/categories.reel/categories.html",{text:'<!DOCTYPE html><html><head><title></title><style>.Categories .Categories-button{display:block;position:relative;font-family:Helvetica,Arial,sans-serif;color:#fff;background-color:transparent;margin:0;padding:0;border:none;opacity:.5;height:auto;border-radius:0;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer}.Categories .Categories-button:active,.Categories .Categories-button.active,.Categories .Categories-button:focus{background-color:#333;opacity:.6}.Categories .Categories-button:before{content:"";position:absolute;width:32px;height:32px;background-image:url(ui/categories.reel/icons.png);background-repeat:no-repeat;background-size:32px 332px}.Categories .Categories-button.in_theaters:before{background-position:0 -100px}.Categories .Categories-button.upcoming:before{background-position:0 -200px}.Categories .Categories-button.rentals:before{background-position:0 -300px}.Categories .Categories-button.selected{opacity:1;background-color:#333}.Categories-strip{position:fixed;background:#000;z-index:2}@media (min-width:501px) and (max-height:660px) and (min-height:501px){.Categories-strip{top:50%;left:50%;margin-top:-248px;margin-left:-244px;background:0 0}.Categories .Categories-button{float:left;margin-left:3px;width:118px;height:40px;padding-bottom:16px;text-align:center;font-size:14px;line-height:24px;border-radius:3px;border:1px solid rgba(255,255,255,.15)}.Categories .Categories-button:before{position:relative;display:inline-block;left:0;top:7px;width:32px;height:24px;background-size:24px 249px}.Categories .Categories-button.in_theaters:before{background-position:0 -75px}.Categories .Categories-button.upcoming:before{background-position:0 -150px}.Categories .Categories-button.rentals:before{background-position:0 -225px}}@media (min-width:501px) and (min-height:660px){.Categories-strip{top:50%;left:50%;margin-top:-228px;margin-left:-242px;background:0 0}.Categories .Categories-button{float:left;margin-left:3px;width:118px;height:40px;padding-bottom:16px;text-align:center;font-size:14px;line-height:24px;border-radius:3px;border:1px solid rgba(255,255,255,.15)}.Categories .Categories-button:before{position:relative;display:inline-block;left:0;top:7px;width:32px;height:24px;background-size:24px 249px}.Categories .Categories-button.in_theaters:before{background-position:0 -75px}.Categories .Categories-button.upcoming:before{background-position:0 -150px}.Categories .Categories-button.rentals:before{background-position:0 -225px}}@media (max-width:500px) and (orientation:portrait){.Categories-strip{bottom:0;left:0;right:0;height:64px;padding:0;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-ms-box-orient:horizontal;box-orient:horizontal}.Categories .Categories-button{-webkit-flex:1;-ms-flex:1;flex:1;line-height:100px;font-size:11px;text-align:center}.Categories .Categories-button:before{left:50%;top:8px;margin-left:-16px}}@media (max-height:500px) and (orientation:landscape){.Categories-strip{top:0;left:0;bottom:0;width:126px;padding:8px 0;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-orient:vertical;-moz-box-orient:vertical;-ms-box-orient:vertical;box-orient:vertical}.Categories .Categories-button{-webkit-flex:1;-ms-flex:1;flex:1;padding-left:48px;text-align:left;font-size:14px;white-space:nowrap}.Categories .Categories-button:before{left:8px;top:50%;margin-top:-16px}.Categories .Categories-button .CategoryButton-text{position:absolute;left:48px;top:50%;margin-top:-7px}}</style><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"}},"bindings":{"selected":{"<-":"@radioButtonController.value"}}},"button":{"prototype":"./category-button.reel","properties":{"element":{"#":"button"},"radioButtonController":{"@":"radioButtonController"}},"bindings":{"classList.has(@repetition:iteration.object.key)":{"<-":"true"},"label":{"<-":"@repetition:iteration.object.title"},"value":{"<-":"@repetition:iteration.object"}}},"radioButtonController":{"prototype":"montage/core/radio-button-controller","bindings":{"contentController":{"<-":"@owner.categories"}}},"repetition":{"prototype":"montage/ui/repetition.reel","properties":{"element":{"#":"repetition"}},"bindings":{"contentController":{"<-":"@owner.categories"}}}}</script></head><body><div data-montage-id=owner class=Categories><span data-montage-id=repetition class=Categories-strip><button data-montage-id=button class=Categories-button></button></span></div></body></html>'}),montageDefine("d543d2d","ui/button.reel/button.html",{text:'<!DOCTYPE html><html><head><meta charset=utf-8><style>.digit-Button{display:inline-block;-moz-box-sizing:border-box;box-sizing:border-box;height:2.5em;min-width:2.5em;margin:0 2px;padding:.625em 1em;border-radius:1.25em;vertical-align:middle;font-size:100%;color:inherit;border:1px solid;background-color:transparent;outline:none;cursor:pointer;text-decoration:none;-webkit-tap-highlight-color:transparent}.digit-Button.montage--active{background-color:hsla(0,0%,0%,.06)}.digit-Button:focus{box-shadow:inset 0 0 0 1px}[data-montage-skin="wireframe"] .digit-Button{color:#4D4D4D;border-color:#b3b3b3;background-color:#f2f2f2}[data-montage-skin="wireframe"] .digit-Button.montage--active{background-color:#e5e5e5}[data-montage-skin="wireframe"] .digit-Button:focus{border-color:#4D4D4D;box-shadow:none}[data-montage-skin="light"] .digit-Button{color:hsla(0,0%,0%,.7);text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-color:hsl(0,0%,80%);background-image:-webkit-linear-gradient(top,hsl(0,0%,96%),hsl(0,0%,92%));background-image:-moz-linear-gradient(top,hsl(0,0%,96%),hsl(0,0%,92%));background-image:-ms-linear-gradient(top,hsl(0,0%,96%),hsl(0,0%,92%));background-image:linear-gradient(top,hsl(0,0%,96%),hsl(0,0%,92%));box-shadow:inset 0 1px 1px hsla(0,0%,100%,.8),inset 0 -1px 1px hsla(0,0%,0%,.04),0 1px 0 hsla(0,0%,100%,.6);-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}[data-montage-skin="light"] .digit-Button.montage--active{border-color:hsla(0,0%,70%,1);background-image:-webkit-linear-gradient(top,hsl(0,0%,90%),hsl(0,0%,86%));background-image:-moz-linear-gradient(top,hsl(0,0%,90%),hsl(0,0%,86%));background-image:-ms-linear-gradient(top,hsl(0,0%,90%),hsl(0,0%,86%));background-image:linear-gradient(top,hsl(0,0%,90%),hsl(0,0%,86%));box-shadow:inset 0 1px 3px hsla(0,0%,0%,.2),0 1px 0 hsla(0,0%,100%,.6)}[data-montage-skin="light"] .digit-Button:focus{border-color:hsl(0,0%,50%)}[data-montage-skin="dark"] .digit-Button{color:hsl(0,0%,80%);text-shadow:0 1px 0 hsla(0,0%,0%,.2);border-color:hsl(0,0%,15%);background-image:-webkit-linear-gradient(top,hsl(0,0%,30%),hsl(0,0%,24%));background-image:-moz-linear-gradient(top,hsl(0,0%,30%),hsl(0,0%,24%));background-image:-ms-linear-gradient(top,hsl(0,0%,30%),hsl(0,0%,24%));background-image:linear-gradient(top,hsl(0,0%,30%),hsl(0,0%,24%));box-shadow:inset 0 1px 1px hsla(0,0%,100%,.1),inset 0 -1px 1px hsla(0,0%,0%,.06),0 1px 0 hsla(0,0%,100%,.1)}[data-montage-skin="dark"] .digit-Button.montage--active{color:hsl(0,0%,60%);border-color:hsl(0,0%,15%);background-image:-webkit-linear-gradient(top,hsl(0,0%,24%),hsl(0,0%,18%));background-image:-moz-linear-gradient(top,hsl(0,0%,24%),hsl(0,0%,18%));background-image:-ms-linear-gradient(top,hsl(0,0%,24%),hsl(0,0%,18%));background-image:linear-gradient(top,hsl(0,0%,24%),hsl(0,0%,18%));box-shadow:inset 0 1px 3px hsla(0,0%,0%,.3),0 1px 0 hsla(0,0%,100%,.1)}[data-montage-skin="dark"] .digit-Button:focus{border-color:hsl(0,0%,50%)}.digit-Button--glass,.digit-Button--glass.montage--active,[data-montage-skin="wireframe"] .digit-Button--glass,[data-montage-skin="wireframe"] .digit-Button--glass.montage--active,[data-montage-skin="light"] .digit-Button--glass,[data-montage-skin="light"] .digit-Button--glass.montage--active,[data-montage-skin="dark"] .digit-Button--glass,[data-montage-skin="dark"] .digit-Button--glass.montage--active{margin:0;border-radius:0;border:none;background:0 0;box-shadow:none}[data-montage-skin="dark"] .digit-Button--glass.montage--active{color:hsla(0,0%,100%,.5)}.digit-ButtonGroup{display:inline-block;vertical-align:middle;padding-left:1px;border-radius:1.25em}.digit-ButtonGroup>.digit-Button{float:left;margin:0 0 0 -1px;border-radius:0}.digit-ButtonGroup>.digit-Button:first-child{border-top-left-radius:inherit;border-bottom-left-radius:inherit}.digit-ButtonGroup>.digit-Button:last-child{border-top-right-radius:inherit;border-bottom-right-radius:inherit}</style></head><body></body></html>'}),montageDefine("67f6380","core/tmdb-service",{dependencies:["montage/core/core","montage/core/range-controller","montage/core/promise","./category-controller","./jsonp-transport"],factory:function(e,t,i){var n=e("montage/core/core").Montage,s=e("montage/core/range-controller").RangeController,o=e("montage/core/promise").Promise,r=e("./category-controller").CategoryController,a=e("./jsonp-transport").shared,l="dbf71473cf25bbd06939baef47b626eb",h="https://api.themoviedb.org/3/movie/now_playing?api_key="+l,d="https://api.themoviedb.org/3/movie/upcoming?api_key="+l,c="https://api.themoviedb.org/3/movie/top_rated?api_key="+l,u="https://api.themoviedb.org/3/movie/popular?api_key="+l,p="https://api.themoviedb.org/3/movie/";t.TmdbService=n.specialize({constructor:{value:function(){this.categories=(new s).initWithContent([]),this.categories.avoidsEmptySelection=!0}},load:{value:function(){var e=this;e.latestBoxOffice=new r("Box Office","box_office"),e.upcoming=new r("Upcoming","upcoming"),e.topDvdRentals=new r("Top Rated","rentals"),e.inTheaters=new r("Popular","in_theaters"),e.latestBoxOffice.contentController.addRangeAtPathChangeListener("selection",this,"handleMovieSelectionChange"),e.upcoming.contentController.addRangeAtPathChangeListener("selection",this,"handleMovieSelectionChange"),e.topDvdRentals.contentController.addRangeAtPathChangeListener("selection",this,"handleMovieSelectionChange"),e.inTheaters.contentController.addRangeAtPathChangeListener("selection",this,"handleMovieSelectionChange");var t=this.loadLatestBoxOfficeMovies().then(function(t){return e.latestBoxOffice.contentController.content=t,e.categories.content.push(e.latestBoxOffice,e.inTheaters,e.upcoming,e.topDvdRentals),e.categories.select(e.latestBoxOffice),t}).then(function(t){t&&t.length>0&&e.preloadMovie(t[0])});return t.then(function(){return[e.loadUpcomingMovies(),e.loadTopRated(),e.loadPopular()]}).spread(function(t,i,n){return e.upcoming.contentController.content=t,e.topDvdRentals.contentController.content=i,e.inTheaters.contentController.content=n,[t,i,n]}).spread(function(t,i,n){t&&t.length>0&&e.preloadMovie(t[0]),i&&i.length>0&&e.preloadMovie(i[0]),n&&n.length>0&&e.preloadMovie(n[0])}).done(),t}},categories:{value:null},latestBoxOffice:{value:null},upcoming:{value:null},topDvdRentals:{value:null},inTheaters:{value:null},loadLatestBoxOfficeMovies:{value:function(){return a.makeRequest(h,"tmdb").then(function(e){return e.results})}},loadUpcomingMovies:{value:function(){return a.makeRequest(d,"tmdb").then(function(e){return e.results})}},loadTopRated:{value:function(){return a.makeRequest(c,"tmdb").then(function(e){return e.results})}},loadPopular:{value:function(){return a.makeRequest(u,"tmdb").then(function(e){return e.results})}},loadMovie:{value:function(e){return a.makeRequest(p+e.id+"?api_key="+l+"&append_to_response=trailers","tmdb").then(function(e){return e})}},loadReleases:{value:function(e){return a.makeRequest(p+e.id+"/releases?api_key="+l,"tmdb").then(function(e){return e})}},preloadMovie:{value:function(e){if(e&&!e.loaded){var t,i=this;return e.loaded=!0,this.loadMovie(e).then(function(e){return t=e.runtime,i.loadReleases(e)}).then(function(n){var s=n.countries[0].certification;0===s.length&&(s="none");for(var o=0,r=i.categories.content.length;o<r;o++)for(var a=i.categories.content[o],l=0,h=a.contentController.content.length;l<h;l++){var d=a.contentController.content[l];d.id===e.id&&(a.contentController.content[l].mpaaRating=s,a.contentController.content[l].runtime=t,a.contentController.content[l].loaded=!0)}})}return o.resolve()}},handleMovieSelectionChange:{value:function(){var e=this,t=this.categories.selection.one();if(t&&t.contentController&&t.contentController.selection)for(var i=0,n=t.contentController.content.length;i<n;i++){var s=t.contentController.content[i];if(s===t.contentController.selection[0]){this.preloadMovie(t.contentController.content[i+1]).then(function(){e.preloadMovie(t.contentController.content[i+2])}).then(function(){e.preloadMovie(t.contentController.content[i+3])});break}}}}}),t.shared=new t.TmdbService}}),montageDefine("67f6380","ui/moviestrip.reel/moviestrip.html",{text:'<!DOCTYPE html><html><head><meta http-equiv=content-type content="text/html; charset=utf-8"><style>.Moviestrip{position:absolute;top:50%;margin-top:-500px;left:0;right:0;height:1000px}.Moviestrip-flow .montage-Flow-Repetition{opacity:1;-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-ms-transition:opacity .5s;transition:opacity .5s}.Moviestrip-flow.is-hidden .montage-Flow-Repetition{opacity:0}.montage-Flow-Slot{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;transform-style:preserve-3d}.Moviestrip-flow .Moviestrip-image{position:absolute;width:180px;height:267px;margin-left:-90px;margin-top:-130px;cursor:pointer;background:#000;background-repeat:no-repeat;background-size:cover;background-position:center center}.Moviestrip-flow .Moviestrip-image:before{content:"";position:absolute;top:-26px;left:-33px;width:246px;height:332px;background-image:url(ui/moviestrip.reel/frame.png);pointer-events:none;background-size:246px 332px;background-repeat:no-repeat}</style><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"},"movieFlow":{"@":"movieFlow"}}},"movieFlow":{"prototype":"montage/ui/flow.reel","properties":{"element":{"#":"movieFlow"},"cameraFov":77.06934,"cameraPosition":[0,0,400],"cameraTargetPoint":[0,0,0],"delegate":{"@":"owner"},"hasSelectedIndexScrolling":true,"isSelectionEnabled":true,"linearScrollingVector":[-90,0],"paths":[{"knots":[{"knotPosition":[-480,0,0],"nextHandlerPosition":[-480,0,-62.87],"previousHandlerPosition":[-480,0,62.87],"previousDensity":1,"nextDensity":1,"rotateY":1.571},{"knotPosition":[-443.46,0,-183.69],"nextHandlerPosition":[-419.4,0,-241.77],"previousHandlerPosition":[-467.52,0,-125.6],"previousDensity":1,"nextDensity":1,"rotateY":1.178},{"knotPosition":[-339.41,0,-339.41],"nextHandlerPosition":[-294.96,0,-383.87],"previousHandlerPosition":[-383.87,0,-294.96],"previousDensity":1,"nextDensity":1,"rotateY":0.785},{"knotPosition":[-183.69,0,-443.46],"nextHandlerPosition":[-125.6,0,-467.52],"previousHandlerPosition":[-241.77,0,-419.4],"previousDensity":1,"nextDensity":1,"rotateY":0.393},{"knotPosition":[0,0,-200],"nextHandlerPosition":[62.87,0,-200],"previousHandlerPosition":[-62.87,0,-200],"previousDensity":1,"nextDensity":1,"rotateY":0},{"knotPosition":[183.67,0,-443.46],"nextHandlerPosition":[241.77,0,-419.4],"previousHandlerPosition":[125.6,0,-467.52],"previousDensity":1,"nextDensity":1,"rotateY":-0.393},{"knotPosition":[339.41,0,-339.41],"nextHandlerPosition":[383.87,0,-294.96],"previousHandlerPosition":[294.96,0,-383.87],"previousDensity":1,"nextDensity":1,"rotateY":-0.785},{"knotPosition":[443.46,0,-183.67],"nextHandlerPosition":[467.52,0,-125.6],"previousHandlerPosition":[419.4,0,-241.77],"previousDensity":1,"nextDensity":1,"rotateY":-1.178},{"knotPosition":[480,0,0],"nextHandlerPosition":[480,0,62.87],"previousHandlerPosition":[480,0,-62.87],"previousDensity":1,"nextDensity":1,"rotateY":-1.571}],"units":{"rotateY":"rad"},"headOffset":4,"tailOffset":4}],"scrollingTransitionDuration":"600","slotContent":{"@":"overlay"},"stride":1},"bindings":{"classList.has(\'is-hidden\')":{"<-":"@owner._flowHidden"},"contentController":{"<-":"@owner._displayedContentController"}}},"overlay":{"prototype":"./overlay.reel","properties":{"element":{"#":"overlay"}}},"poster":{"prototype":"./image.reel","properties":{"element":{"#":"poster"}},"bindings":{"src":{"<-":"\'http://image.tmdb.org/t/p/w300\' + @movieFlow:iteration.object.poster_path"}}}}</script></head><body><div data-montage-id=owner class=Moviestrip><div data-montage-id=overlay></div><div data-montage-id=movieFlow class=Moviestrip-flow><div data-montage-id=poster class=Moviestrip-image></div></div><div class=film></div></div></body></html>'}),montageDefine("d543d2d","ui/scroller.reel/scroller",{dependencies:["montage/ui/component"],factory:function(e,t,i){var n=e("montage/ui/component").Component,s=t.Scroller=n.specialize({constructor:{value:function(){this["super"]()}},enterDocument:{value:function(e){if(e&&!s.transformCssProperty){var t=this.element.style;"undefined"!=typeof t.webkitTransform?s.transformCssProperty="webkitTransform":"undefined"!=typeof t.MozTransform?s.transformCssProperty="MozTransform":"undefined"!=typeof t.msTransform?s.transformCssProperty="msTransform":s.transformCssProperty="transform"}}},_scrollX:{value:0},scrollX:{get:function(){return this._scrollX},set:function(e){this._scrollX!==e&&(this._scrollX=e,this.needsDraw=!0)}},_scrollY:{value:0},scrollY:{get:function(){return this._scrollY},set:function(e){this._scrollY!==e&&(this._scrollY=e,this.needsDraw=!0)}},_maxTranslateX:{value:0},_maxTranslateY:{value:0},_axis:{value:"auto"},axis:{get:function(){return this._axis},set:function(e){this._axis=e,this.needsDraw=!0}},_displayScrollbars:{value:"auto"},displayScrollbars:{get:function(){return this._displayScrollbars},set:function(e){switch(e){case"vertical":case"horizontal":case"both":case"auto":this._displayScrollbars=e;break;default:this._displayScrollbars="none"}this.needsDraw=!0}},_hasMomentum:{value:!0},hasMomentum:{get:function(){return this._hasMomentum},set:function(e){this._hasMomentum=e}},_content:{value:null},_scrollBars:{value:null},_translateComposerAxis:{value:null},handleTranslateStart:{value:function(e){this._scrollBars.opacity=.5}},handleTranslateEnd:{value:function(e){this._scrollBars.opacity=0}},canDraw:{value:function(){return this.needsDraw=!0,n.prototype.canDraw.apply(this,arguments)}},willDraw:{value:function(){this._left=this._element.offsetLeft,this._top=this._element.offsetTop,this._width=this._element.offsetWidth,this._height=this._element.offsetHeight;var e=this._content.scrollWidth-this._width;e<0?this._maxTranslateX=0:this._maxTranslateX=e;var t=this._content.offsetHeight-this._height;t<0?this._maxTranslateY=0:this._maxTranslateY=t;var i=this.callDelegateMethod("didSetMaxScroll",{x:this._maxTranslateX,y:this._maxTranslateY});switch(i&&(this._maxTranslateX=i.x,this._maxTranslateY=i.y),this.scrollX=Math.min(this._scrollX,this._maxTranslateX),this.scrollY=Math.min(this._scrollY,this._maxTranslateY),this._displayScrollbars){case"horizontal":this._scrollBars.displayHorizontal=!0,this._scrollBars.displayVertical=!1,this._translateComposerAxis="horizontal";break;case"vertical":this._scrollBars.displayHorizontal=!1,this._scrollBars.displayVertical=!0,this._translateComposerAxis="vertical";break;case"both":this._scrollBars.displayHorizontal=!0,this._scrollBars.displayVertical=!0,this._translateComposerAxis="both";break;case"auto":this._scrollBars.displayHorizontal=!!this._maxTranslateX,this._scrollBars.displayVertical=!!this._maxTranslateY,this._scrollBars.displayVertical&&this._scrollBars.displayHorizontal?this._translateComposerAxis="both":this._scrollBars.displayVertical?this._translateComposerAxis="vertical":this._scrollBars.displayHorizontal?this._translateComposerAxis="horizontal":this._translateComposerAxis="both";break;case"none":this._scrollBars.displayHorizontal=!1,this._scrollBars.displayVertical=!1,this._translateComposerAxis="both"}this._scrollBars.displayHorizontal&&(this._content.scrollWidth?(this._scrollBars.horizontalLength=this._width/this._content.scrollWidth,this._scrollBars.horizontalScroll=this._scrollX/this._content.scrollWidth):(this._scrollBars.horizontalLength=1,this._scrollBars.horizontalScroll=0)),this._scrollBars.displayVertical&&(this._content.offsetHeight?(this._scrollBars.verticalLength=this._height/this._content.offsetHeight,this._scrollBars.verticalScroll=this._scrollY/this._content.offsetHeight):(this._scrollBars.verticalLength=1,this._scrollBars.verticalScroll=0))}},draw:{value:function(){var e=-this._scrollX+"px, "+-this._scrollY+"px";this._content.style[s.transformCssProperty]="translate3d("+e+", 0)"}}},{transformCssProperty:{value:null}})}}),montageDefine("f886419","ui/base/abstract-radio-button",{dependencies:["./abstract-control","../../composer/press-composer","../../composer/key-composer"],factory:function(e,t,i){var n=e("./abstract-control").AbstractControl,s=e("../../composer/press-composer").PressComposer,o=e("../../composer/key-composer").KeyComposer,r="montage--disabled",a="montage--active",l="montage-RadioButton--checked";t.AbstractRadioButton=n.specialize({constructor:{value:function h(){if(this.constructor===h)throw new Error("AbstractRadioButton cannot be instantiated.")}},_active:{value:!1},active:{set:function(e){e=!!e,this._active!==e&&(this._active=e,e?this.classList.add(this.activeClass):this.classList.remove(this.activeClass))},get:function(){return this._active}},_checked:{value:null},checked:{set:function(e){e=!!e,this._checked!==e&&(this._checked=e,e?this.classList.add(this.checkedClass):this.classList.remove(this.checkedClass))},get:function(){return this._checked}},_disabledClass:{value:null},disabledClass:{set:function(e){var t=this.disabledClass;e&&"string"==typeof e&&t!==e&&(this._swapClassNameIfNeeded(t,e),this._disabledClass=e)},get:function(){return this._disabledClass||r}},_activeClass:{value:null},activeClass:{set:function(e){var t=this.activeClass;e&&"string"==typeof e&&t!==e&&(this._swapClassNameIfNeeded(t,e),this._activeClass=e)},get:function(){return this._activeClass||a}},_checkedClass:{value:null},checkedClass:{set:function(e){var t=this.checkedClass;e&&"string"==typeof e&&t!==e&&(this._swapClassNameIfNeeded(t,e),this._checkedClass=e)},get:function(){return this._checkedClass||l}},_swapClassNameIfNeeded:{value:function(e,t){e&&t&&this.classList.has(e)&&(this.classList.remove(e),this.classList.add(t))}},_enabled:{value:!0},enabled:{set:function(e){e=!!e,this._enabled!==e&&(this._enabled=e,e?this.classList.remove(this.disabledClass):this.classList.add(this.disabledClass))},get:function(){return this._enabled}},__keyComposer:{value:null},_keyComposer:{get:function(){return this.__keyComposer||(this.__keyComposer=new o,this.__keyComposer.keys="space",this.addComposer(this.__keyComposer)),this.__keyComposer}},_radioButtonController:{value:null},radioButtonController:{set:function(e){this._radioButtonController&&this._radioButtonController.unregisterRadioButton(this),this._radioButtonController=e,e.registerRadioButton(this)},get:function(){return this._radioButtonController}},__pressComposer:{value:null},_pressComposer:{get:function(){return this.__pressComposer||(this.__pressComposer=new s,this.addComposer(this.__pressComposer)),this.__pressComposer}},enterDocument:{value:function(e){e&&this.element.setAttribute("role","radio")}},draw:{value:function(){this.checked?this.element.setAttribute("aria-checked","true"):this.element.setAttribute("aria-checked","false")}},handlePressStart:{value:function(e){this.active=!0,e.touch&&document.addEventListener("touchmove",this,!1)}},check:{value:function(){this.enabled&&!this.checked&&(this.dispatchActionEvent(),this.checked=!0)}},handlePress:{value:function(){this.active=!1,this.check()}},handlePressCancel:{value:function(){this.active=!1,document.removeEventListener("touchmove",this,!1)}},handleKeyPress:{value:function(){this.active=!0}},handleKeyRelease:{value:function(){this.active=!1,this.check()}},prepareForActivationEvents:{value:function(){this._keyComposer.addEventListener("keyPress",this,!1),this._keyComposer.addEventListener("keyRelease",this,!1),this._pressComposer.addEventListener("pressStart",this,!1),this._pressComposer.addEventListener("press",this,!1),this._pressComposer.addEventListener("pressCancel",this,!1)}},activate:{value:function(){this.check()}}})}}),montageDefine("f886419","ui/base/abstract-button",{dependencies:["./abstract-control","../../composer/press-composer"],factory:function(e,t,i){var n=e("./abstract-control").AbstractControl,s=e("../../composer/press-composer").PressComposer;t.AbstractButton=n.specialize({constructor:{value:function o(){if(this.constructor===o)throw new Error("AbstractButton cannot be instantiated.");this._pressComposer=new s,this.addComposer(this._pressComposer),this._pressComposer.defineBinding("longPressThreshold ",{"<-":"holdThreshold",source:this}),this.defineBinding("classList.has('montage--disabled')",{"<-":"!enabled"}),this.defineBinding("classList.has('montage--active')",{"<-":"active"})}},enabled:{value:!0},_preventFocus:{value:!1},preventFocus:{get:function(){return this._preventFocus},set:function(e){this._preventFocus=!!e,this.needsDraw=!0}},acceptsActiveTarget:{value:function(){return!this._preventFocus}},willBecomeActiveTarget:{value:function(e){}},_labelNode:{value:void 0,enumerable:!1},_label:{value:void 0,enumerable:!1},label:{get:function(){return this._label},set:function(e){if("undefined"!=typeof e&&this.converter)try{e=this.converter.convert(e),this.error&&(this.error=null)}catch(t){this.error=t}this._label=""+e,this.needsDraw=!0}},holdThreshold:{value:1e3},_pressComposer:{value:null},_active:{value:!1},active:{get:function(){return this._active},set:function(e){this._active=e,this.needsDraw=!0}},prepareForActivationEvents:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1),this._pressComposer.addEventListener("press",this,!1),this._pressComposer.addEventListener("pressCancel",this,!1)}},addEventListener:{value:function(e,t,i){n.prototype.addEventListener.call(this,e,t,i),"longAction"===e&&this._pressComposer.addEventListener("longPress",this,!1)}},handlePressStart:{value:function(e){this.active=!0,e.touch&&document.addEventListener("touchmove",this,!1),this._preventFocus||this._element.focus()}},handlePress:{value:function(e){this.active=!1,this.dispatchActionEvent(),document.removeEventListener("touchmove",this,!1)}},handleKeyup:{value:function(e){32===e.keyCode&&(this.active=!1,this.dispatchActionEvent())}},handleLongPress:{value:function(e){this._pressComposer.cancelPress();var t=document.createEvent("CustomEvent");t.initCustomEvent("longAction",!0,!0,null),this.dispatchEvent(t)}},handlePressCancel:{value:function(e){this.active=!1,document.removeEventListener("touchmove",this,!1)}},handleTouchmove:{value:function(e){e.preventDefault()}},isInputElement:{value:!1},enterDocument:{value:function(e){e&&(this.isInputElement="INPUT"===this.originalElement.tagName,this.isInputElement?void 0===this._label&&(this.label=this.originalElement.value):(this.originalElement.firstChild||this.originalElement.appendChild(document.createTextNode("")),this._labelNode=this.originalElement.firstChild,void 0===this._label&&(this.label=this._labelNode.data)),this.element.setAttribute("role","button"),this.element.addEventListener("keyup",this,!1))}},_drawLabel:{enumerable:!1,value:function(e){this.isInputElement?this._element.value=e:this._labelNode&&(this._labelNode.data=e)}},draw:{value:function(){this._elementNeedsTabIndex()&&(this._preventFocus?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex","-1")),this.isInputElement&&(this.element.disabled=!this.enabled),this._drawLabel(this.label)}},_elementNeedsTabIndexRegex:{value:/INPUT|TEXTAREA|A|SELECT|BUTTON|LABEL/},_elementNeedsTabIndex:{value:function(){return null===this.element.tagName.match(this._elementNeedsTabIndexRegex)}}})}}),montageDefine("67f6380","ui/moviestrip.reel/overlay.reel/overlay.html",{text:'<!DOCTYPE html><html><head><meta http-equiv=content-type content="text/html; charset=utf-8"><style>.Overlay{position:absolute;top:-818px;left:-1774px;background-repeat:no-repeat;-webkit-transform:translate3d(0,0,-855.612018px);-moz-transform:translate3d(0,0,-855.612018px);-ms-transform:translate3d(0,0,-855.612018px);transform:translate3d(0,0,-855.612018px);-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;transform-style:preserve-3d}.Overlay,.Overlay:before{width:1776px;height:1682px;background-image:url(ui/moviestrip.reel/overlay.reel/background.jpg)}.Overlay:before{content:"";top:0;left:1772px;-webkit-transform:scale(-1,1);-moz-transform:scale(-1,1);-ms-transform:scale(-1,1);transform:scale(-1,1)}.Overlay:before,.Overlay .film{position:absolute;background-repeat:no-repeat}.Overlay .film{left:1774px;top:841px;pointer-events:none;-webkit-transform-origin:0 0 0;-moz-transform-origin:0 0 0;-ms-transform-origin:0 0 0;transform-origin:0 0 0;-webkit-transform:translate3d(-296px,-139.5px,941.709016px) scale(.25,.25);-moz-transform:translate3d(-296px,-139.5px,941.709016px) scale(.25,.25);-ms-transform:translate3d(-296px,-139.5px,941.709016px) scale(.25,.25);transform:translate3d(-296px,-139.5px,941.709016px) scale(.25,.25)}.Overlay .film,.Overlay .film:before{width:1184px;height:944px;background-image:url(ui/moviestrip.reel/overlay.reel/overlay.png)}.Overlay .film:before{-webkit-transform:translate3d(2368px,0,0) scale(-1,1);-moz-transform:translate3d(2368px,0,0) scale(-1,1);-ms-transform:translate3d(2368px,0,0) scale(-1,1);transform:translate3d(2368px,0,0) scale(-1,1)}.Overlay .film:before,.Overlay .film:after{content:"";position:absolute;background-repeat:no-repeat;pointer-events:none;-webkit-transform-origin:0 0 0;-moz-transform-origin:0 0 0;-ms-transform-origin:0 0 0;transform-origin:0 0 0}.Overlay .film:after{width:286px;height:288px;background-image:url(ui/moviestrip.reel/overlay.reel/popcorn.png);-webkit-transform:translate3d(1760px,600px,0);-moz-transform:translate3d(1760px,600px,0);-ms-transform:translate3d(1760px,600px,0);transform:translate3d(1760px,600px,0)}.Overlay .top{left:1774px;top:818px;width:832px;-webkit-transform:translate3d(-251.75px,-102.25px,1098.660519px) scale(.125,.125);-moz-transform:translate3d(-251.75px,-102.25px,1098.660519px) scale(.125,.125);-ms-transform:translate3d(-251.75px,-102.25px,1098.660519px) scale(.125,.125);transform:translate3d(-251.75px,-102.25px,1098.660519px) scale(.125,.125);-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;transform-style:preserve-3d}.Overlay .top,.Overlay .top:before{position:absolute;height:1682px;border-left:240px solid #000;background-image:url(ui/moviestrip.reel/overlay.reel/background.jpg);background-repeat:no-repeat;pointer-events:none;-webkit-transform-origin:0 0 0;-moz-transform-origin:0 0 0;-ms-transform-origin:0 0 0;transform-origin:0 0 0}.Overlay .top:before{content:"";width:592px;-webkit-transform:translate3d(3788px,0,0) scale(-1,1);-moz-transform:translate3d(3788px,0,0) scale(-1,1);-ms-transform:translate3d(3788px,0,0) scale(-1,1);transform:translate3d(3788px,0,0) scale(-1,1)}</style><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"overlay"}}}}</script></head><body><div data-montage-id=overlay class=Overlay><div class=film></div><div class=top></div></div></body></html>'}),montageDefine("f886419","ui/flow.reel/flow.html",{text:'<!DOCTYPE html><html><head><meta charset=utf-8><style>.montage-Flow{overflow:hidden}.montage-Flow,.montage-Flow-camera,.montage-Flow-Repetition{position:absolute;top:0;left:0;bottom:0;right:0;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0)}.montage-Flow-camera,.montage-Flow-Repetition{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;transform-style:preserve-3d}.montage-Flow-Repetition .no-transition,.montage-Flow-Repetition .no-transition *{-webkit-transition:none!important;-moz-transition:none!important;-ms-transition:none!important;transition:none!important}.montage-Flow-Repetition>div{position:absolute;top:50%;left:50%;width:0;height:0;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;transform-style:preserve-3d}.montage-Flow-Slot{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);-moz-transform:translate3d(-50%,-50%,0);-ms-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0)}.montage-Flow.camera-disabled .montage-Flow-Repetition>div,.montage-Flow.camera-disabled .montage-Flow-Slot{top:0;left:0}</style><script type=text/montage-serialization>{"repetition":{"prototype":"ui/repetition.reel","properties":{"element":{"#":"montage-flow-repetition"}},"bindings":{"isSelectionEnabled":{"<-":"@owner.isSelectionEnabled"},"visibleIndexes":{"<-":"@owner._visibleIndexes"},"contentController":{"<-":"@owner.contentController"}}},"flowTranslateComposer":{"prototype":"ui/flow.reel/flow-translate-composer","properties":{"flow":{"@":"owner"},"invertAxis":true,"allowFloats":true,"minScroll":0},"bindings":{"maxScroll":{"<-":"@owner.length"},"_momentumDuration":{"<-":"@owner.momentumDuration"},"translateStride":{"<-":"@owner.stride"},"scrollingMode":{"<-":"@owner.scrollingMode"},"linearScrollingVector":{"<-":"@owner.linearScrollingVector"},"isLimitedToSingleStride":{"<-":"@owner.isLimitedToSingleStride"},"delegate":{"<-":"@owner"}}},"slot":{"prototype":"ui/slot.reel","properties":{"element":{"#":"montage-flow-slot"}},"bindings":{"content":{"<->":"@owner.slotContent"}}},"owner":{"properties":{"element":{"#":"montage-flow"},"_repetition":{"@":"repetition"},"_flowTranslateComposer":{"@":"flowTranslateComposer"},"_cameraElement":{"#":"montage-flow-camera"}},"bindings":{"scroll":{"<->":"@flowTranslateComposer.scroll"},"selection":{"<->":"@repetition.contentController.selection"},"selectedIndexes":{"<-":"@repetition.selectedIndexes"},"activeIndexes":{"<-":"@repetition.activeIndexes"},"draggedSlideIndex":{"<-":"@flowTranslateComposer._closerIndex"},"_firstIteration":{"<-":"@repetition._drawnIterations.0"}}},":iteration":{"alias":"@repetition:iteration"}}</script></head><body><div data-montage-id=montage-flow class=montage-Flow><div data-montage-id=montage-flow-camera class=montage-Flow-camera><div data-montage-id=montage-flow-repetition class=montage-Flow-Repetition><div data-montage-id=wrapper><div data-param=*></div></div></div><div data-montage-id=montage-flow-slot class=montage-Flow-Slot></div></div></div></body></html>'
}),montageDefine("67f6380","ui/player.reel/player.html",{text:'<!DOCTYPE html><html><head><meta http-equiv=content-type content="text/html; charset=utf-8"><style>.Moviepopup{position:fixed;z-index:999;top:0;left:0;right:0;bottom:0;padding-top:50px;background:#000;-webkit-transform:translate3d(0,-100%,0);-moz-transform:translate3d(0,-100%,0);-ms-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0);-webkit-transition:-webkit-transform .3s cubic-bezier(.53,.09,.94,.53);-moz-transition:-moz-transform .3s cubic-bezier(.53,.09,.94,.53);-ms-transition:-ms-transform .3s cubic-bezier(.53,.09,.94,.53);transition:transform .3s cubic-bezier(.53,.09,.94,.53);pointer-events:none}.Moviepopup.is-shown{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-transition:-webkit-transform .3s cubic-bezier(0,.2,.15,1);-moz-transition:-moz-transform .3s cubic-bezier(0,.2,.15,1);-ms-transition:-ms-transform .3s cubic-bezier(0,.2,.15,1);transition:transform .3s cubic-bezier(0,.2,.15,1);display:block;pointer-events:all}.Moviepopup .button-close,.Moviepopup .button-close:focus{position:absolute;top:6px;right:6px;border-color:hsl(0,0%,0%);color:hsl(0,0%,60%);font-size:15px;font-family:inherit;box-shadow:inset 0 1px 3px hsla(0,0%,0%,.3),0 1px 2px hsla(0,0%,100%,.1);background:hsl(0,0%,12%) -webkit-linear-gradient(top,hsla(0,0%,100%,.1),hsla(0,0%,0%,.1));background:hsl(0,0%,12%) -moz-linear-gradient(top,hsla(0,0%,100%,.1),hsla(0,0%,0%,.1));background:hsl(0,0%,12%) -ms-linear-gradient(top,hsla(0,0%,100%,.1),hsla(0,0%,0%,.1));background:hsl(0,0%,12%) linear-gradient(top,hsla(0,0%,100%,.1),hsla(0,0%,0%,.1))}.Moviepopup .button-close.active{background:hsl(0,0%,10%) -webkit-linear-gradient(top,hsla(0,0%,40%,.1),hsla(0,0%,0%,.1));background:hsl(0,0%,10%) -moz-linear-gradient(top,hsla(0,0%,40%,.1),hsla(0,0%,0%,.1));background:hsl(0,0%,10%) -ms-linear-gradient(top,hsla(0,0%,40%,.1),hsla(0,0%,0%,.1));background:hsl(0,0%,10%) linear-gradient(top,hsla(0,0%,40%,.1),hsla(0,0%,0%,.1))}</style><script src=https://www.youtube.com/player_api></script><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"},"player":{"#":"iframe"}}},"closeButton":{"prototype":"digit/ui/button.reel","properties":{"element":{"#":"closeButton"}},"listeners":[{"type":"action","listener":{"@":"owner"}}]},"overlay":{"prototype":"montage/ui/overlay.reel","properties":{"element":{"#":"overlay"},"delegate":{"@":"owner"}}}}</script></head><body><div data-montage-id=owner><div data-montage-id=overlay class=Moviepopup><button data-montage-id=closeButton class="button button-close"></button><iframe data-montage-id=iframe class=montage-youtube-player type=text/html width=100% height=100% frameborder=0 allowfullscreen=""></iframe></div></div></body></html>'}),montageDefine("c279f8d","punycode",{dependencies:[],factory:function(e,t,i){!function(e){function n(e){throw RangeError(k[e])}function s(e,t){for(var i=e.length,n=[];i--;)n[i]=t(e[i]);return n}function o(e,t){var i=e.split("@"),n="";i.length>1&&(n=i[0]+"@",e=i[1]),e=e.replace(O,".");var o=e.split("."),r=s(o,t).join(".");return n+r}function r(e){for(var t,i,n=[],s=0,o=e.length;s<o;)t=e.charCodeAt(s++),t>=55296&&t<=56319&&s<o?(i=e.charCodeAt(s++),56320==(64512&i)?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),s--)):n.push(t);return n}function a(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=R(e>>>10&1023|55296),e=56320|1023&e),t+=R(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:x}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,i){var n=0;for(e=i?L(e/P):e>>1,e+=L(e/t);e>z*C>>1;n+=x)e=L(e/z);return L(n+(z+1)*e/(e+S))}function c(e){var t,i,s,o,r,h,c,u,p,m,f=[],v=e.length,g=0,_=E,b=T;for(i=e.lastIndexOf(I),i<0&&(i=0),s=0;s<i;++s)e.charCodeAt(s)>=128&&n("not-basic"),f.push(e.charCodeAt(s));for(o=i>0?i+1:0;o<v;){for(r=g,h=1,c=x;o>=v&&n("invalid-input"),u=l(e.charCodeAt(o++)),(u>=x||u>L((y-g)/h))&&n("overflow"),g+=u*h,p=c<=b?w:c>=b+C?C:c-b,!(u<p);c+=x)m=x-p,h>L(y/m)&&n("overflow"),h*=m;t=f.length+1,b=d(g-r,t,0==r),L(g/t)>y-_&&n("overflow"),_+=L(g/t),g%=t,f.splice(g++,0,_)}return a(f)}function u(e){var t,i,s,o,a,l,c,u,p,m,f,v,g,_,b,S=[];for(e=r(e),v=e.length,t=E,i=0,a=T,l=0;l<v;++l)f=e[l],f<128&&S.push(R(f));for(s=o=S.length,o&&S.push(I);s<v;){for(c=y,l=0;l<v;++l)f=e[l],f>=t&&f<c&&(c=f);for(g=s+1,c-t>L((y-i)/g)&&n("overflow"),i+=(c-t)*g,t=c,l=0;l<v;++l)if(f=e[l],f<t&&++i>y&&n("overflow"),f==t){for(u=i,p=x;m=p<=a?w:p>=a+C?C:p-a,!(u<m);p+=x)b=u-m,_=x-m,S.push(R(h(m+b%_,0))),u=L(b/_);S.push(R(h(u,0))),a=d(i,g,s==o),i=0,++s}++i,++t}return S.join("")}function p(e){return o(e,function(e){return M.test(e)?c(e.slice(4).toLowerCase()):e})}function m(e){return o(e,function(e){return D.test(e)?"xn--"+u(e):e})}var f="object"==typeof t&&t&&!t.nodeType&&t,v="object"==typeof i&&i&&!i.nodeType&&i,g="object"==typeof global&&global;g.global!==g&&g.window!==g&&g.self!==g||(e=g);var _,b,y=2147483647,x=36,w=1,C=26,S=38,P=700,T=72,E=128,I="-",M=/^xn--/,D=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=x-w,L=Math.floor,R=String.fromCharCode;if(_={version:"1.3.2",ucs2:{decode:r,encode:a},decode:c,encode:u,toASCII:m,toUnicode:p},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return _});else if(f&&v)if(i.exports==f)v.exports=_;else for(b in _)_.hasOwnProperty(b)&&(f[b]=_[b]);else e.punycode=_}(this)}}),montageDefine("f886419","composer/key-composer",{dependencies:["../core/core","./composer"],factory:function(e,t,i){var n=e("../core/core").Montage,s=e("./composer").Composer,o="keyPress",r="longKeyPress",a="keyRelease",l=t.KeyComposer=s.specialize({_shouldDispatchEvent:{value:!1},shouldDispatchLongPress:{value:!1},_longPressTimeout:{value:null},_keyRegistered:{value:!1},_keys:{value:null},keys:{get:function(){return this._keys},set:function(e){this._keyRegistered?(d.defaultKeyManager.unregisterKey(this),this._keys=e,d.defaultKeyManager.registerKey(this)):this._keys=e}},load:{value:function(){this._shouldDispatchEvent&&!this._keyRegistered&&(d.defaultKeyManager.registerKey(this),this._keyRegistered=!0)}},unload:{value:function(){d.defaultKeyManager.unregisterKey(this),this._keyRegistered=!1}},addEventListener:{value:function(e,t,i){var n=this.component;s.prototype.addEventListener.call(this,e,t,i),e!=o&&e!=r&&e!=a||(this._shouldDispatchEvent=!0,e==r&&(this._shouldDispatchLongPress=!0),this._isLoaded?this._keyRegistered||(d.defaultKeyManager.registerKey(this),this._keyRegistered=!0):n&&"function"!=typeof n.addComposer&&(this.element||(this.element=window),this.component.loadComposer(this)))}},deserializedFromTemplate:{value:function(){var e=this.component;null===this.identifier&&(this.identifier=n.getInfoForObject(this).label),e&&("function"==typeof e.addComposer?e.addComposer(this):this._isLoaded||(this.element||(this.element=window),this.component.loadComposer(this)))}}},{createKey:{value:function(e,t,i){var n=this;return this===l&&(n=new l),i||(i=e.identifier?e.identifier+t.toLowerCase().replace(/[ +]/g).toCapitalized():t.toLowerCase().replace(/[ +]/g)),n.keys=t,n.identifier=i,e.addComposer(n),n}},createGlobalKey:{value:function(e,t,i){var n=this;return this===l&&(n=new l),n.keys=t,n.identifier=i,e.addComposerForElement(n,window),n}}}),h=null,d=n.specialize({_defaultKeyManager:{value:null},_loadingDefaultKeyManager:{value:!1},_keysToRegister:{value:[]},registerKey:{value:function(t){var i=this;this._defaultKeyManager?this._defaultKeyManager.registerKey(t):(this._keysToRegister.push(t),this._loadingDefaultKeyManager||(this._loadingDefaultKeyManager=!0,e.async("core/event/key-manager").then(function(e){var t=i._defaultKeyManager=e.defaultKeyManager;i._keysToRegister.forEach(function(e){t.registerKey(e)}),i._keysToRegister.length=0})))}},unregisterKey:{value:function(e){this._defaultKeyManager&&this._defaultKeyManager.unregisterKey(e)}}},{defaultKeyManager:{get:function(){return h||(h=new d),this._defaultKeyManager?this._defaultKeyManager:h}}})}}),montageDefine("d543d2d","ui/scroller.reel/scroll-bars.reel/scroll-bars.html",{text:'<!DOCTYPE html><html><head><meta charset=utf-8><style>.digit-ScrollBars{position:absolute;left:0;top:0;right:0;bottom:0;z-index:9999;pointer-events:none}.digit-ScrollBars .digit-ScrollBars-top{position:absolute;right:2px;height:3px;border-radius:4px 4px 0 0;clip:rect(-1px,6px,3px,-1px)}.digit-ScrollBars .digit-ScrollBars-top,.digit-ScrollBars .digit-ScrollBars-bottom{background:#000;box-shadow:0 0 0 1px rgba(255,255,255,.27);width:5px;opacity:0;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0)}.digit-ScrollBars .digit-ScrollBars-bottom{border-radius:0 0 4px 4px}.digit-ScrollBars .digit-ScrollBars-bottomClip{right:2px;width:5px}.digit-ScrollBars .digit-ScrollBars-bottomClip,.digit-ScrollBars .digit-ScrollBars-left{position:absolute;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0)}.digit-ScrollBars .digit-ScrollBars-left{bottom:2px;background:#000;box-shadow:0 0 0 1px rgba(255,255,255,.27);width:3px;height:5px;border-radius:4px 0 0 4px;opacity:0;clip:rect(-1px,3px,6px,-1px)}.digit-ScrollBars .digit-ScrollBars-right{background:#000;box-shadow:0 0 0 1px rgba(255,255,255,.27);border-radius:0 4px 4px 0;opacity:0}.digit-ScrollBars .digit-ScrollBars-right,.digit-ScrollBars .digit-ScrollBars-rightClip{height:5px;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0)}.digit-ScrollBars .digit-ScrollBars-rightClip{position:absolute;bottom:2px}</style><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"digit-scroll-bars"},"_top":{"#":"top"},"_bottomClip":{"#":"bottom-clip"},"_bottom":{"#":"bottom"},"_left":{"#":"left"},"_rightClip":{"#":"right-clip"},"_right":{"#":"right"}}}}</script></head><body><div data-montage-id=digit-scroll-bars class=digit-ScrollBars><div data-montage-id=top class=digit-ScrollBars-top></div><div data-montage-id=bottom-clip class=digit-ScrollBars-bottomClip><div data-montage-id=bottom class=digit-ScrollBars-bottom></div></div><div data-montage-id=left class=digit-ScrollBars-left></div><div data-montage-id=right-clip class=digit-ScrollBars-rightClip><div data-montage-id=right class=digit-ScrollBars-right></div></div></div></body></html>'}),montageDefine("d543d2d","package.json",{exports:{name:"digit",description:"Touch-optimized MontageJS components for tablets and phones.",version:"3.0.0",license:"BSD-3-Clause",repository:{type:"git",url:"git+https://github.com/montagejs/digit.git"},dependencies:{montage:"^17.0.7"},devDependencies:{concurrently:"^3.4.0","http-server":"^0.9.0","jasmine-console-reporter":"^1.2.7","jasmine-core":"^2.5.2",karma:"^1.5.0","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.0.1","karma-jasmine":"^1.1.0","karma-phantomjs-launcher":"^1.0.2","montage-testing":"git://github.com/montagejs/montage-testing.git#master",open:"0.0.5"},scripts:{test:"node test/run-node.js","test:karma":"karma start --no-auto-watch --single-run","test:karma-dev":"karma start --auto-watch --no-single-run","test:jasmine":'concurrently "http-server -a localhost -p 8085" "open http://localhost:8085/test/run.html"',"start:demo":'concurrently "http-server -a localhost -p 8085" "open http://localhost:8085/demo/sizing/index.html"',"start:overview":'concurrently "http-server -a localhost -p 8085" "open http://localhost:8085/overview/index.html"'},exclude:["overview","test"],gitHead:"a46d7aa68cbf985e6f4b322096a1e2a022c14035",bugs:{url:"https://github.com/montagejs/digit/issues"},homepage:"https://github.com/montagejs/digit#readme",_id:"digit@3.0.0",_shasum:"1d2be43a34f5aa1684c22934a4b2b6b5f80638f0",_from:"digit@>=3.0.0 <4.0.0",_npmVersion:"2.15.11",_nodeVersion:"4.8.0",_npmUser:{name:"hthetiot",email:"hthetiot@gmail.com"},dist:{shasum:"1d2be43a34f5aa1684c22934a4b2b6b5f80638f0",tarball:"https://registry.npmjs.org/digit/-/digit-3.0.0.tgz"},maintainers:[{name:"francoisfrisch",email:"francoisfrisch@gmail.com"},{name:"hthetiot",email:"hthetiot@gmail.com"},{name:"marchant",email:"benoit@montagestudio.com"},{name:"montage-bot",email:"francoisfrisch@gmail.com"}],_npmOperationalInternal:{host:"s3://npm-registry-packages",tmp:"tmp/digit-3.0.0.tgz_1495575626923_0.7017284843605012"},directories:{},_resolved:"https://registry.npmjs.org/digit/-/digit-3.0.0.tgz",main:"index",hash:"d543d2d",mappings:{montage:{name:"montage",hash:"f886419",location:"../montage@f886419/"}},production:!0,useScriptInjection:!0}}),montageDefine("67f6380","ui/moviestrip.reel/moviestrip",{dependencies:["montage/ui/component"],factory:function(e,t,i){var n=e("montage/ui/component").Component;t.Moviestrip=n.specialize({constructor:{value:function(){this["super"]()}},enterDocument:{value:function(e){e&&this.movieDetails.defineBinding("classList.has('details-fade-out')",{"<-":"$self._detailsHidden",parameters:{self:this}})}},_categoryContentController:{value:null},_movieFlow:{value:null},movieFlow:{get:function(){return this._movieFlow},set:function(e){this._movieFlow=e,this._movieFlow.addEventListener("transitionend",function(){self._flowHiddenCallback(),cancelTimeout(this._flowHiddenCallbackTimeout)},!1)}},categoryContentController:{get:function(){return this._categoryContentController},set:function(e){null!=e&&(this._categoryContentController=e,null==this._categoryContentController?(this._displayedContentController=this._categoryContentController,this._flowHidden=!1):this._startChangeCategoryTransition())}},_displayedContentController:{value:null},_flowHiddenCallback:{value:function(){this.movieFlow&&(this.movieFlow.scroll=0),this._displayedContentController=this.categoryContentController,this._flowHidden=!1,this._detailsHidden=!1}},_flowHiddenCallbackTimeout:{value:null},_startChangeCategoryTransition:{value:function(){var e=this;this._detailsHidden=!0,this._flowHidden=!0,this._categoryContentController.select(this._categoryContentController.content[0]),this._flowHiddenCallbackTimeout=setTimeout(function(){e._flowHiddenCallback()},800)}},movieFlowDidTranslateStart:{value:function(){this._detailsHidden=!0}},movieFlowDidTranslateEnd:{value:function(e){var t=Math.round(e.scroll);this._displayedContentController&&this._displayedContentController.select(this._displayedContentController.content[t]),this._detailsHidden=!1}},_flowHidden:{value:!1},_detailsHidden:{value:!1}})}}),montageDefine("f886419","core/uuid",{dependencies:["core/core"],factory:function(e,t,i){function n(){var e,t=o,i=h;return i[0]=t[15&(e=4294967296*Math.random())],i[1]=t[15&(e>>>=4)],i[2]=t[15&(e>>>=4)],i[3]=t[15&(e>>>=4)],i[4]=t[15&(e>>>=4)],i[5]=t[15&(e>>>=4)],i[6]=t[15&(e>>>=4)],i[7]=t[15&(e>>>=4)],i[9]=t[15&(e=4294967296*Math.random())],i[10]=t[15&(e>>>=4)],i[11]=t[15&(e>>>=4)],i[12]=t[15&(e>>>=4)],i[15]=t[15&(e>>>=4)],i[16]=t[15&(e>>>=4)],i[17]=t[15&(e>>>=4)],i[19]=t[3&(e=4294967296*Math.random())|8],i[20]=t[15&(e>>>=4)],i[21]=t[15&(e>>>=4)],i[22]=t[15&(e>>>=4)],i[24]=t[15&(e>>>=4)],i[25]=t[15&(e>>>=4)],i[26]=t[15&(e>>>=4)],i[27]=t[15&(e>>>=4)],i[28]=t[15&(e=4294967296*Math.random())],i[29]=t[15&(e>>>=4)],i[30]=t[15&(e>>>=4)],i[31]=t[15&(e>>>=4)],i[32]=t[15&(e>>>=4)],i[33]=t[15&(e>>>=4)],i[34]=t[15&(e>>>=4)],i[35]=t[15&(e>>>=4)],i.join("")}var s=e("core/core").Montage,o="0123456789ABCDEF".split(""),r="__proto__",a="value",l=Object.prototype.hasOwnProperty,h="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("");t.Uuid=Object.create(Object.prototype,{generate:{enumerable:!1,value:n}}),t.generate=n;var d=function(){var e=n(),t=s.getInfoForObject(this);try{null!==t&&t.isInstance===!1?(this._uuid=e,Object.defineProperty(this,"uuid",{get:function(){return this.hasOwnProperty("uuid")?this._uuid:d.call(this)}})):(t.isInstance&&Object.defineProperty(this,"uuid",{configurable:!0,enumerable:!1,writable:!1,value:e}),!(this instanceof Element)&&t.isInstance&&a in(Object.getOwnPropertyDescriptor(this,"uuid")||{})&&r in this||(this._uuid=e))}catch(i){}return this._uuid=e,e},c=function(){return l.call(this,"_uuid")&&this._uuid?this._uuid:d.call(this)};s.defineUuidProperty=function(e){Object.defineProperty(e,"_uuid",{enumerable:!1,value:void 0,writable:!0}),Object.defineProperty(e,"uuid",{configurable:!0,get:c,set:Function.noop,enumerable:!1})}}}),montageDefine("f886419","core/radio-button-controller",{dependencies:["./core","./range-controller","./core","./core"],factory:function(e,t,i){var n=e("./core").Montage,s=e("./range-controller").RangeController;t.RadioButtonController=n.specialize({_radioButtons:{value:null},_content:{value:null},content:{get:function(){return this.getPath("contentController.content")},set:function(e){this.contentController=(new s).initWithContent(e)}},contentController:{value:null},selectedRadioButton:{value:null},_value:{value:null},value:{set:function(e){this._value!==e&&(this._value=e,this._updateRadioButtons())},get:function(){return this._value}},constructor:{value:function(){this._radioButtons=[],this.addRangeAtPathChangeListener("_radioButtons.map{checked}",this,"handleRadioButtonChange"),this.defineBinding("value ",{"<->":"contentController.selection.0"})}},_updateRadioButtons:{value:function(){for(var e=this._value,t=0,i=this._radioButtons.length;t<i;t++)if(e===this._radioButtons[t].value){this._radioButtons[t].checked=!0;break}}},registerRadioButton:{value:function(e){this._radioButtons.indexOf(e)===-1&&(this._radioButtons.push(e),this._updateRadioButtons())}},unregisterRadioButton:{value:function(e){var t=this._radioButtons.indexOf(e);t>=0&&(this._radioButtons.splice(t,1),e===this.selectedRadioButton&&(this.selectedRadioButton=null))}},handleRadioButtonChange:{value:function(e,t,i){if(e[0]===!0)for(var n=0,s=this._radioButtons.length;n<s;n++)n===i?(this.selectedRadioButton=this._radioButtons[n],this.value=this.selectedRadioButton.value):this._radioButtons[n].checked=!1}}},{blueprintModuleId:e("./core")._blueprintModuleIdDescriptor,blueprint:e("./core")._blueprintDescriptor})}}),montageDefine("f886419","core/geometry/point",{dependencies:["../core"],factory:function(e,t,i){var n=e("../core").Montage,s=t.Point=n.specialize({init:{enumerable:!1,value:function(e,t){return this.x=null===e?0:e,this.y=null===t?0:t,this}},x:{enumerable:!0,value:0},y:{enumerable:!0,value:0}},{interpolate:{enumerable:!1,value:function(e,i,n,s){var o,r;return o=i.x+(n.x-i.x)*e,r=i.y+(n.y-i.y)*e,s>0&&(o=Math.round(o*s)/s,r=Math.round(r*s)/s),(new t.Point).init(o,r)}}}),o=function(e){var t,i,n,s,o=e.ownerDocument;if(e&&o){if(i=o.documentElement,n=o.body,s=o.defaultView,e!==n){if(t=e.getBoundingClientRect(),i.parentOf(e)){var r=i.clientTop||n.clientTop||0,a=i.clientLeft||n.clientLeft||0,l=s.pageYOffset||i.scrollTop||n.scrollTop,h=s.pageXOffset||i.scrollLeft||n.scrollLeft,d=t.top+l-r,c=t.left+h-a;return{top:d,left:c}}return{top:t.top,left:t.left}}return{top:n.offsetTop,left:n.offsetLeft}}return null},r=null,a=function(){s.convertPointFromNodeToPage=function(e,t){return t?(r.x=t.x,r.y=t.y):(r.x=0,r.y=0),t=webkitConvertPointFromNodeToPage(e,r),t?(new s).init(t.x,t.y):null},s.convertPointFromPageToNode=function(e,t){return t?(r.x=t.x,r.y=t.y):(r.x=0,r.y=0),t=webkitConvertPointFromPageToNode(e,r),t?(new s).init(t.x,t.y):null}},l=function(){s.convertPointFromNodeToPage=function(e,t){if(!e||"undefined"!=typeof e.x)return null;var i;return(i=o(e))?(new s).init((t?t.x:0)+i.left,(t?t.y:0)+i.top):(new s).init(t?t.x:0,t?t.y:0)},s.convertPointFromPageToNode=function(e,t){if(!e||"undefined"!=typeof e.x)return null;var i;return(i=o(e))?(new s).init((t?t.x:0)-i.left,(t?t.y:0)-i.top):(new s).init(t?t.x:0,t?t.y:0)}};"undefined"!=typeof WebKitPoint?(r=new WebKitPoint(0,0),a()):l()}}),montageDefine("67f6380","ui/main.reel/main",{dependencies:["montage/ui/component","core/tmdb-service"],factory:function(e,t,i){var n=e("montage/ui/component").Component,s=e("core/tmdb-service").shared;t.Main=n.specialize({constructor:{value:function(){this.application.addEventListener("openTrailer",this,!1),this.canDrawGate.setField("moviesLoaded",!1),this._initialDataLoad=this.moviesService.load()}},moviesService:{value:s},_initialDataLoad:{value:null},templateDidLoad:{value:function(){var e=this;e._initialDataLoad.then(function(){e.canDrawGate.setField("moviesLoaded",!0)}).done()}},handleOpenTrailer:{value:function(e){var t=e.detail.trailers;if(t&&t.youtube&&t.youtube.length){for(var i,n=t.youtube,s=0,o=n.length;s<o&&(i=n[s],!(i.name&&i.name.toLowerCase().indexOf("official")>-1));s++);this.templateObjects.player.openTrailer(i.source)}}},_windowScroll:{value:function(e){window.innerHeight!==window.outerHeight&&window.innerHeight===this._element.offsetHeight||(window.scrollTo(0,0),e.templateObjects.moviestrip.movieFlow.handleResize(),window.clearTimeout(e._windowScrollTimeout),e._windowScrollTimeout=window.setTimeout(function(){e._windowScroll(e)},700))}},_windowScrollTimeout:{value:null},handleOrientationchange:{value:function(){var e=this;window.scrollTo(0,0),navigator.userAgent.match(/(iPhone|iPod touch);.*CPU.*OS 7_0_\d/i)&&(window.clearTimeout(this._windowScrollTimeout),90===Math.abs(window.orientation)&&(e._windowScrollTimeout=window.setTimeout(function(){e._windowScroll(e)},1e3)))}},enterDocument:{value:function(e){e&&window.addEventListener("orientationchange",this,!1)}}})}}),montageDefine("9f232fa","package.json",{exports:{name:"querystring",id:"querystring",version:"0.2.0",description:"Node's querystring module for all engines.",keywords:["commonjs","query","querystring"],author:{name:"Irakli Gozalishvili",email:"rfobic@gmail.com"},repository:{type:"git",url:"git://github.com/Gozala/querystring.git",web:"https://github.com/Gozala/querystring"},bugs:{url:"http://github.com/Gozala/querystring/issues/"},devDependencies:{test:"~0.x.0",phantomify:"~0.x.0",retape:"~0.x.0",tape:"~0.1.5"},engines:{node:">=0.4.x"},scripts:{test:"npm run test-node && npm run test-browser && npm run test-tap","test-browser":"node ./node_modules/phantomify/bin/cmd.js ./test/common-index.js","test-node":"node ./test/common-index.js","test-tap":"node ./test/tap-index.js"},testling:{files:"test/tap-index.js",browsers:{iexplore:[9,10],chrome:[16,20,25,"canary"],firefox:[10,15,16,17,18,"nightly"],safari:[5,6],opera:[12]}},licenses:[{type:"MIT",url:"https://github.com/Gozala/enchain/License.md"}],_id:"querystring@0.2.0",dist:{shasum:"b209849203bb25df820da756e747005878521620",tarball:"https://registry.npmjs.org/querystring/-/querystring-0.2.0.tgz"},_npmVersion:"1.1.65",_npmUser:{name:"gozala",email:"rfobic@gmail.com"},maintainers:[{name:"gozala",email:"rfobic@gmail.com"}],directories:{},_shasum:"b209849203bb25df820da756e747005878521620",_resolved:"https://registry.npmjs.org/querystring/-/querystring-0.2.0.tgz",_from:"querystring@0.2.0",homepage:"https://github.com/Gozala/querystring#readme",main:"index",hash:"9f232fa",mappings:{},production:!0,useScriptInjection:!0}}),montageDefine("8d417eb","package.json",{exports:{name:"query-params",version:"0.0.1",description:"Very simple CommonJS-module to encode/decode query parameters",main:"./index.js",scripts:{test:"karma start"},repository:{type:"git",url:"git+ssh://git@github.com/finn-no/query-params.git"},keywords:["query","params","encode"],author:{name:"sveinung rosaker",email:"sveinung.rosaker@finn.no"},contributors:[{name:"Gregers Rygg",email:"gregers@finn.no"},{name:"Michael Gunnulfsen",email:"michael.gunnulfsen@finn.no"}],license:"MIT",devDependencies:{"karma-script-launcher":"~0.1.0","karma-chrome-launcher":"~0.1.1","karma-html2js-preprocessor":"~0.1.0","karma-firefox-launcher":"~0.1.2","karma-jasmine":"~0.1.3","karma-coffee-preprocessor":"~0.1.1",requirejs:"~2.1.9","karma-requirejs":"~0.2.0","karma-phantomjs-launcher":"~0.1.1",karma:"~0.10.7","karma-browserify":"0.0.6"},readmeFilename:"README.md",bugs:{url:"https://github.com/finn-no/query-params/issues"},_id:"query-params@0.0.1",dist:{shasum:"0af04eebd63b266b0e0971d104e0dc4ce558c604",tarball:"https://registry.npmjs.org/query-params/-/query-params-0.0.1.tgz"},_from:"query-params@0.0.1",_npmVersion:"1.3.11",_npmUser:{name:"gregersrygg",email:"gregersrygg@gmail.com"},maintainers:[{name:"gregersrygg",email:"gregersrygg@gmail.com"}],directories:{},_shasum:"0af04eebd63b266b0e0971d104e0dc4ce558c604",_resolved:"https://registry.npmjs.org/query-params/-/query-params-0.0.1.tgz",homepage:"https://github.com/finn-no/query-params#readme",hash:"8d417eb",mappings:{},production:!0,useScriptInjection:!0}}),montageDefine("67f6380","ui/details.reel/details",{dependencies:["montage/ui/component","core/tmdb-service"],factory:function(e,t,i){var n=e("montage/ui/component").Component,s=e("core/tmdb-service").shared;t.Details=n.specialize({isVisible:{value:null},_movie:{value:null},movie:{set:function(e){var t=this;e&&!e.trailers?s.loadMovie(e).then(function(t){return e.trailers=t.trailers,e.runtime=t.runtime,t}).then(function(e){return s.loadReleases(e)}).then(function(t){var i=t.countries[0].certification;0===i.length&&(i="none"),e.mpaaRating=i}).then(function(){t.dispatchBeforeOwnPropertyChange("movie",t._movie),t._movie=e,t.isVisible=!0,t.dispatchOwnPropertyChange("movie",t._movie)}).done():(t._movie=e,this.isVisible=!0),this.needsDraw=!0},get:function(){return this._movie}},draw:{value:function(){if(this.movie){var e=this.movie.popularity;e<25?this.popularityIcon.style.backgroundPosition="0px 0px":e<50?this.popularityIcon.style.backgroundPosition="-12px 0px":e<75?this.popularityIcon.style.backgroundPosition="-24px 0px":this.popularityIcon.style.backgroundPosition="-36px 0px",this._isDetailsExpanded?this._element.classList.add("expanded"):this._element.classList.remove("expanded")}}},handleRentButtonAction:{value:function(){window.open(this.movie.links.alternate)}},handleTrailerButtonAction:{value:function(){this.dispatchEventNamed("openTrailer",!0,!0,{trailers:this.movie.trailers})}},_isDetailsExpanded:{value:!1},handleExpandButtonAction:{value:function(){this._isDetailsExpanded=!this._isDetailsExpanded,this.needsDraw=!0}}})}}),montageDefine("c279f8d","package.json",{exports:{name:"punycode",version:"1.3.2",description:"A robust Punycode converter that fully complies to RFC 3492 and RFC 5891, and works on nearly all JavaScript platforms.",homepage:"https://mths.be/punycode",main:"punycode.js",keywords:["punycode","unicode","idn","idna","dns","url","domain"],license:"MIT",author:{name:"Mathias Bynens",url:"https://mathiasbynens.be/"},contributors:[{name:"Mathias Bynens",url:"https://mathiasbynens.be/"},{name:"John-David Dalton",url:"http://allyoucanleet.com/"}],repository:{type:"git",url:"git+https://github.com/bestiejs/punycode.js.git"},bugs:{url:"https://github.com/bestiejs/punycode.js/issues"},files:["LICENSE-MIT.txt","punycode.js"],scripts:{test:"node tests/tests.js"},devDependencies:{coveralls:"^2.10.1",grunt:"^0.4.5","grunt-contrib-uglify":"^0.5.0","grunt-shell":"^0.7.0",istanbul:"^0.2.13","qunit-extras":"^1.2.0",qunitjs:"~1.11.0",requirejs:"^2.1.14"},gitHead:"38c8d3131a82567bfef18da09f7f4db68c84f8a3",_id:"punycode@1.3.2",_shasum:"9653a036fb7c1ee42342f2325cceefea3926c48d",_from:"punycode@1.3.2",_npmVersion:"1.4.28",_npmUser:{name:"mathias",email:"mathias@qiwi.be"},maintainers:[{name:"mathias",email:"mathias@qiwi.be"},{name:"reconbot",email:"wizard@roborooter.com"}],dist:{shasum:"9653a036fb7c1ee42342f2325cceefea3926c48d",tarball:"https://registry.npmjs.org/punycode/-/punycode-1.3.2.tgz"},directories:{},_resolved:"https://registry.npmjs.org/punycode/-/punycode-1.3.2.tgz",hash:"c279f8d",mappings:{},production:!0,useScriptInjection:!0}}),montageDefine("d543d2d","ui/scroller.reel/scroller.html",{text:'<!DOCTYPE html><html><head><meta charset=utf-8><style>.digit-Scroller{position:relative;display:block;overflow:hidden}.digit-Scroller .digit-Scroller-content{float:left;width:100%}</style><script type=text/montage-serialization>{"owner":{"properties":{"_content":{"#":"content"},"element":{"#":"owner"},"_scrollBars":{"@":"scrollbars"}}},"scrollbars":{"prototype":"./scroll-bars.reel","properties":{"element":{"#":"scrollbars"}}},"translateComposer1":{"prototype":"montage/composer/translate-composer","properties":{"component":{"@":"owner"},"minTranslateX":0,"minTranslateY":0,"invertAxis":true,"listenToWheelEvent":true},"bindings":{"translateX":{"<->":"@owner.scrollX"},"translateY":{"<->":"@owner.scrollY"},"maxTranslateX":{"<-":"@owner._maxTranslateX"},"maxTranslateY":{"<-":"@owner._maxTranslateY"},"axis":{"<-":"@owner._translateComposerAxis"},"hasMomentum":{"<-":"@owner.hasMomentum"}},"listeners":[{"type":"translateStart","listener":{"@":"owner"}},{"type":"translateEnd","listener":{"@":"owner"}}]}}</script></head><body><div data-montage-id=owner class=digit-Scroller><div data-montage-id=scrollbars></div><div data-montage-id=content class=digit-Scroller-content><div data-param=*></div></div></div></body></html>'}),montageDefine("8f5b8e8","package.json",{exports:{name:"url",description:"The core `url` packaged standalone for use with Browserify.",version:"0.11.0",dependencies:{punycode:"1.3.2",querystring:"0.2.0"},main:"./url.js",devDependencies:{assert:"1.1.1",mocha:"1.18.2",zuul:"3.3.0"},scripts:{test:"mocha --ui qunit test.js && zuul -- test.js","test-local":"zuul --local -- test.js"},repository:{type:"git",url:"git+https://github.com/defunctzombie/node-url.git"},license:"MIT",gitHead:"7f82d6b09acba099163fede09b4226b4e55a5377",bugs:{url:"https://github.com/defunctzombie/node-url/issues"},homepage:"https://github.com/defunctzombie/node-url#readme",_id:"url@0.11.0",_shasum:"3838e97cfc60521eb73c525a8e55bfdd9e2e28f1",_from:"url@>=0.11.0 <0.12.0",_npmVersion:"2.11.1",_nodeVersion:"0.10.38",_npmUser:{name:"defunctzombie",email:"shtylman@gmail.com"},dist:{shasum:"3838e97cfc60521eb73c525a8e55bfdd9e2e28f1",tarball:"https://registry.npmjs.org/url/-/url-0.11.0.tgz"},maintainers:[{name:"coolaj86",email:"coolaj86@gmail.com"},{name:"defunctzombie",email:"shtylman@gmail.com"}],directories:{},_resolved:"https://registry.npmjs.org/url/-/url-0.11.0.tgz",hash:"8f5b8e8",mappings:{punycode:{name:"punycode",hash:"c279f8d",location:"../punycode@c279f8d/"},querystring:{name:"querystring",hash:"9f232fa",location:"../querystring@9f232fa/"}},production:!0,useScriptInjection:!0}}),montageDefine("f886419","composer/composer",{dependencies:["../core/target"],factory:function(e,t,i){var n=e("../core/target").Target;t.Composer=n.specialize({_component:{value:null},component:{get:function(){return this._component},set:function(e){this._component=e}},_element:{value:null},element:{get:function(){return this._element},set:function(e){this._element=e}},lazyLoad:{value:!0},_needsFrame:{value:!1},needsFrame:{set:function(e){this._needsFrame!==e&&(this._needsFrame=e,this._component&&e&&this._component.scheduleComposer(this))},get:function(){return this._needsFrame}},frame:{value:Function.noop},_resolveDefaults:{value:function(){this.element||null!=this.element||null==this.component||(this.element=this.component.element)}},_isLoaded:{value:!1},isLoaded:{get:function(){return this._isLoaded}},load:{value:Function.noop},unload:{value:Function.noop},deserializedFromTemplate:{value:function(){this.component&&this.component.addComposer(this)}}},{isCoordinateOutsideRadius:{value:function(e,t,i){return e*e+t*t>i*i}}})}}),montageDefine("67f6380","core/jsonp-transport",{dependencies:["montage/core/core","query-params","url","montage/core/uuid","montage/core/promise"],factory:function(e,t,i){var n=e("montage/core/core").Montage,s=e("query-params"),o=e("url"),r=e("montage/core/uuid"),a=e("montage/core/promise").Promise;t.JsonpTransport=n.specialize({constructor:{value:function(){}},makeRequest:{value:function(e,t,i){var n,l=a.defer(),h=this,d=o.parse(e),c=s.decode(d.query),u=t?t+"ServiceCallback":"serviceCallback",p=u+r.generate().replace(/-/g,"_"),m=document.createElement("script");
return window[p]=function(e){h._handleResponse(e,l),document.head.removeChild(m),delete window[p]},c[i?i:"callback"]=p,n=e.replace(d.query,"")+s.encode(c),m.src=n,document.head.appendChild(m),l.promise}},_handleResponse:{value:function(e,t){e?e.error?t.reject(new Error(e.error)):t.resolve(e):t.reject(new Error("Unknown API Error"))}}}),t.shared=new t.JsonpTransport}}),montageDefine("f886419","ui/slot.reel/slot",{dependencies:["../component"],factory:function(e,t,i){var n=e("../component").Component;t.Slot=n.specialize({hasTemplate:{enumerable:!1,value:!1},delegate:{value:null},_content:{value:null},enterDocument:{value:function(e){e&&this.element.classList.add("montage-Slot")}},content:{get:function(){return this._content},set:function(e){var t,i;e&&"undefined"!=typeof e.needsDraw?(i=this._content,e.element?t=e.element:(t=document.createElement("div"),this.delegate&&"function"==typeof this.delegate.slotElementForComponent&&(t=this.delegate.slotElementForComponent(this,e,t)),e.element=t),this.domContent=t,e.needsDraw=!0):this.domContent=e,this._content=e,this.needsDraw=!0}},contentDidChange:{value:function(){this.delegate&&"function"==typeof this.delegate.slotDidSwitchContent&&this.delegate.slotDidSwitchContent(this)}}})}}),montageDefine("f886419","ui/text.reel/text",{dependencies:["../component"],factory:function(e,t,i){var n=e("../component").Component;t.Text=n.specialize({hasTemplate:{value:!1},_value:{value:null},value:{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this.needsDraw=!0)}},converter:{value:null},defaultValue:{value:""},_valueNode:{value:null},_RANGE:{value:document.createRange()},enterDocument:{value:function(e){if(e){var t=this._RANGE;t.selectNodeContents(this.element),t.deleteContents(),this._valueNode=document.createTextNode(""),t.insertNode(this._valueNode),this.element.classList.add("montage-Text")}}},draw:{value:function(){var e="undefined"!=typeof this._value&&null!==this._value?this._value:this.defaultValue;this._valueNode.data=this.converter?this.converter.convert(e):e}}})}}),montageDefine("67f6380","ui/player.reel/player",{dependencies:["montage/ui/component"],factory:function(e,t,i){var n=e("montage/ui/component").Component,s="https://www.youtube.com/embed/%s",o="%s";t.Player=n.specialize({constructor:{value:function(){this["super"]()}},player:{value:null},handleCloseButtonAction:{value:function(){this.templateObjects.overlay.hide()}},_trailerId:{value:null},openTrailer:{value:function(e){this._trailerId=e,this.templateObjects.overlay.show()}},didShowOverlay:{value:function(e){this._trailerId&&(this.player.src=s.replace(o,this._trailerId)),e.classList.add("is-shown")}},didHideOverlay:{value:function(e){this._trailerId=null,e.classList.remove("is-shown")}}})}}),montageDefine("f886419","ui/base/abstract-control",{dependencies:["../component","collections/map"],factory:function(e,t,i){var n=e("../component").Component,s=e("collections/map");t.AbstractControl=n.specialize({dispatchActionEvent:{value:function(){return this.dispatchEvent(this.createActionEvent())}},_detail:{value:null},detail:{get:function(){return null==this._detail&&(this._detail=new s),this._detail}},createActionEvent:{value:function(){var e,t=document.createEvent("CustomEvent");return e=this._detail,t.initCustomEvent("action",!0,!0,e),t}},disabled:{get:function(){return!this.enabled},set:function(e){"boolean"==typeof e&&(this.enabled=!e)}}})}}),montageDefine("9f232fa","decode",{dependencies:[],factory:function(e,t,i){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}i.exports=function(e,t,i,s){t=t||"&",i=i||"=";var o={};if("string"!=typeof e||0===e.length)return o;var r=/\+/g;e=e.split(t);var a=1e3;s&&"number"==typeof s.maxKeys&&(a=s.maxKeys);var l=e.length;a>0&&l>a&&(l=a);for(var h=0;h<l;++h){var d,c,u,p,m=e[h].replace(r,"%20"),f=m.indexOf(i);f>=0?(d=m.substr(0,f),c=m.substr(f+1)):(d=m,c=""),u=decodeURIComponent(d),p=decodeURIComponent(c),n(o,u)?Array.isArray(o[u])?o[u].push(p):o[u]=[o[u],p]:o[u]=p}return o}}}),montageDefine("9f232fa","encode",{dependencies:[],factory:function(e,t,i){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};i.exports=function(e,t,i,s){return t=t||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(s){var o=encodeURIComponent(n(s))+i;return Array.isArray(e[s])?e[s].map(function(e){return o+encodeURIComponent(n(e))}).join(t):o+encodeURIComponent(n(e[s]))}).join(t):s?encodeURIComponent(n(s))+i+encodeURIComponent(n(e)):""}}}),montageDefine("67f6380","ui/categories.reel/category-button.reel/category-button.html",{text:'<!DOCTYPE html><html><head><title></title><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"}}},"text":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"text"}},"bindings":{"value":{"<-":"@owner.label"}}}}</script></head><body><div data-montage-id=owner class="CategoryButton matte-Button"><span data-montage-id=text class=CategoryButton-text></span></div></body></html>'}),montageDefine("8d417eb","index",{dependencies:[],factory:function(e,t,i){function n(e,t){var i,n=[];for(i in e)null!=e[i]&&"object"!=typeof e[i]&&"function"!=typeof e[i]&&n.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return n.join(t||"&")}function s(e,t){t=t||o;for(var i,n,s,r={},a=e.split(t),l=0,h=a.length;l<h;l++)s=a[l].indexOf("="),i=a[l].substring(0,s),n=a[l].substring(s+1),n&&(r[decodeURIComponent(i)]=decodeURIComponent(n));return r}var o=/&amp;|&|;/gim;i.exports={encode:n,decode:s}}}),montageDefine("67f6380","ui/moviestrip.reel/image.reel/image",{dependencies:["montage/ui/component"],factory:function(e,t,i){var n=e("montage/ui/component").Component;t.Image=n.specialize({_src:{value:null},src:{set:function(e){e!==this._src&&(this._src=e,this.needsDraw=!0)}},draw:{value:function(){this._src?this._element.style.backgroundImage="url("+this._src+")":this._element.style.backgroundImage="url(assets/image/no-poster.jpg)"}}})}}),montageDefine("67f6380","core/category-controller",{dependencies:["montage","montage/core/range-controller"],factory:function(e,t,i){var n=e("montage").Montage,s=e("montage/core/range-controller").RangeController;t.CategoryController=n.specialize({constructor:{value:function(e,t){this.title=e,this.key=t;var i=new s;i.avoidsEmptySelection=!0,this.contentController=i}},title:{value:null},key:{value:null},contentController:{value:null}})}}),montageDefine("f886419","ui/overlay.reel/overlay.html",{text:'<!DOCTYPE html><html><head><title></title><style>.montage-Overlay{position:absolute;z-index:9999}</style><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"overlay"}}}}</script></head><body><div data-montage-id=overlay class=montage-Overlay><div data-param=*></div></div></body></html>'}),montageDefine("67f6380","ui/moviestrip.reel/image.reel/image.html",{text:'<!DOCTYPE html><html><head><meta http-equiv=content-type content="text/html; charset=utf-8"><script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"}}}}</script></head><body><div data-montage-id=owner class=Image></div></body></html>'}),montageDefine("67f6380","ui/categories.reel/category-button.reel/category-button",{dependencies:["montage/ui/base/abstract-radio-button"],factory:function(e,t,i){var n=e("montage/ui/base/abstract-radio-button").AbstractRadioButton;t.CategoryButton=n.specialize({constructor:{value:function(){this["super"]()}},label:{value:null}})}}),montageDefine("d543d2d","ui/button.reel/button",{dependencies:["montage/ui/base/abstract-button"],factory:function(e,t,i){var n=e("montage/ui/base/abstract-button").AbstractButton;t.Button=n.specialize({hasTemplate:{value:!0},constructor:{value:function(){this["super"](),this.classList.add("digit-Button")}}})}}),montageDefine("8f5b8e8","util",{dependencies:[],factory:function(e,t,i){"use strict";i.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}}}),montageDefine("67f6380","ui/categories.reel/categories",{dependencies:["montage/ui/component"],factory:function(e,t,i){var n=e("montage/ui/component").Component;t.Categories=n.specialize({constructor:{value:function(){this["super"]()}}})}}),montageDefine("67f6380","ui/moviestrip.reel/overlay.reel/overlay",{dependencies:["montage/ui/component"],factory:function(e,t,i){var n=e("montage/ui/component").Component;t.Overlay=n.specialize({})}}),montageDefine("9f232fa","index",{dependencies:["./decode","./encode"],factory:function(e,t,i){"use strict";t.decode=t.parse=e("./decode"),t.encode=t.stringify=e("./encode")}});
bundleLoaded("index.html.bundle-1-0.js")