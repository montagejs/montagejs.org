montageDefine("d2712f2","ui/repetition.reel/repetition",{dependencies:["montage","ui/component","core/template","core/range-controller","core/promise","collections/map","collections/set","frb/observers"],factory:function(e,t){"use strict";var n=e("montage").Montage,r=e("ui/component").Component;e("core/template").Template;var i=e("core/range-controller").RangeController,a=e("core/promise").Promise,o=e("collections/map"),s=e("collections/set"),l=e("frb/observers"),u=l.observeProperty,c=l.observeKey,h=t.Iteration=n.specialize({repetition:{value:null},controller:{value:null},object:{value:null},selected:{value:null},_fragment:{value:null},_childComponents:{value:null},index:{value:null},_drawnIndex:{value:null},active:{value:null},isFirst:{value:null},isLast:{value:null},isEven:{value:null},isOdd:{value:null},_noTransition:{value:null},constructor:{value:function(){Object.getPrototypeOf(h).constructor.call(this),this.repetition=null,this.controller=null,this.content=null,this.defineBinding("object",{"<->":"content"}),this.defineBinding("selected",{"<->":"repetition.contentController._selection.has(content)"}),this._fragment=null,this._childComponents=null,this.index=null,this._drawnIndex=null,this.active=!1,this.defineBinding("active",{"<->":"repetition.activeIterations.has(())"}),this.defineBinding("isFirst",{"<-":"index == 0"}),this.defineBinding("isLast",{"<-":"index == repetition.iterations.length - 1"}),this.defineBinding("isEven",{"<-":"index % 2 == 0"}),this.defineBinding("isOdd",{"<-":"index % 2 != 0"}),this._noTransition=!1,this.addOwnPropertyChangeListener("active",this),this.addOwnPropertyChangeListener("selected",this),this.addOwnPropertyChangeListener("_noTransition",this),this.cachedFirstElement=null}},initWithRepetition:{value:function(e){return this.repetition=e,this}},recycle:{value:function(){this.index=null,this.content=null,this._noTransition=!0}},injectIntoDocument:{value:function(e){null!==this._drawnIndex&&this.retractFromDocument();var t=this,n=this.repetition,r=n.element,i=n._boundaries,a=r.ownerDocument.createTextNode(""),o=i[e];i.splice(e,0,a),r.insertBefore(a,o),r.insertBefore(this._fragment,o),n.childComponents.swap(e*n._childComponentsPerIteration,0,this._childComponents);for(var s=this._childComponents.length,l=function(e){e.target.removeEventListener("firstDraw",l,!1),s--,s||t.forEachElement(function(e){n._iterationForElement.set(e,t)})},u=0;this._childComponents.length>u;u++){var c=this._childComponents[u];c.addEventListener("firstDraw",l,!1),c.needsDraw=!0}n._drawnIterations.splice(e,0,this),n._updateDrawnIndexes(e),n._dirtyClassListIterations.add(this)}},retractFromDocument:{value:function(){var e=this._drawnIndex,t=this.repetition,n=t.element,r=t._boundaries[e],i=t._boundaries[e+1];t._boundaries.splice(e,1);for(var a=this._fragment,o=r.nextSibling;o!=i;){var s=o.nextSibling;n.removeChild(o),a.appendChild(o),o=s}n.removeChild(r),this._drawnIndex=null,t._drawnIterations.splice(e,1),t._updateDrawnIndexes(e)}},handlePropertyChange:{value:function(){this.repetition&&(this.repetition._dirtyClassListIterations.add(this),this.repetition.needsDraw=!0)}},forEachElement:{value:function(e,t){var n=this.repetition,r=this._drawnIndex;if(null!=r)for(var i=n._boundaries[r];i!==n._boundaries[r+1];i=i.nextSibling)1===i.nodeType&&e.call(t,i)}},firstElement:{get:function(){var e=this.repetition,t=this._drawnIndex;if(null!=t)for(var n=e._boundaries[t];n!==e._boundaries[t+1];n=n.nextSibling)if(1===n.nodeType)return this.cachedFirstElement=n,n}},cachedFirstElement:{value:null}}),d=t.Repetition=r.specialize({initWithContent:{value:function(e){return this.content=e,this}},initWithContentController:{value:function(e){return this.contentController=e,this}},content:{get:function(){return this.getPath("contentController.content")},set:function(e){this.contentController=(new i).initWithContent(e)}},contentController:{value:null},isSelectionEnabled:{value:null},selection:{value:null},selectedIterations:{value:null},selectedIndexes:{value:null},activeIterations:{value:null},iterations:{value:null},currentIteration:{value:null},contentAtCurrentIteration:{value:null},hasTemplate:{value:!1},_iterationTemplate:{value:null},clonesChildComponents:{value:!0},constructor:{value:function(){Object.getPrototypeOf(d).constructor.call(this),this.contentController=null,this.organizedContent=[],this.defineBinding("organizedContent.rangeContent()",{"<-":"contentController.organizedContent"}),this.isSelectionEnabled=!1,this.defineBinding("selection",{"<->":"contentController.selection"}),this.defineBinding("selectedIterations",{"<-":"iterations.filter{selected}"}),this.defineBinding("selectedIndexes",{"<-":"iterations.map{index}"}),this._iterationTemplate=null,this.addOwnPropertyChangeListener("innerTemplate",this),this.iterations=[],this._drawnIterations=[],this._freeIterations=[],this._contentForIteration=o(),this._iterationForElement=o(),this.currentIteration=null,this._templateId=null,this._iterationCreationPromise=a.resolve(),this._boundaries=[],this._dirtyClassListIterations=s(),this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._initialContentDrawn=!1,this.addOwnPropertyChangeListener("isSelectionEnabled",this),this._selectionPointer=null,this.activeIterations=[]}},cleanupDeletedComponentTree:{value:function(e){this._iterationTemplate&&this._teardownIterationTemplate(),e&&this.cancelBindings()}},expandComponent:{value:function(){return this._iterationTemplate||this._setupIterationTemplate(),this._isComponentExpanded=!0,a.resolve()}},handleInnerTemplateChange:{value:function(){this._iterationTemplate&&this._teardownIterationTemplate(),this._setupIterationTemplate()}},_setupIterationTemplate:{value:function(){if(!this._newDomContent&&!this._shouldClearDomContentOnNextDraw&&this.innerTemplate){this.innerTemplate.hasParameters()?(this._iterationTemplate=this.innerTemplate.clone(),this._expandIterationTemplateParameters()):this._iterationTemplate=this.innerTemplate;for(var e,t=this.childComponents,n=t.length-1;e=t[n--];)e.detachFromParentComponent(),e.needsDraw=!1,e.cleanupDeletedComponentTree(!0);this.handleOrganizedContentRangeChange(this.organizedContent,[],0),this.organizedContent.addRangeChangeListener(this,"organizedContent"),this._canDrawInitialContent=!0,this.needsDraw=!0}}},_teardownIterationTemplate:{value:function(){this.organizedContent.removeRangeChangeListener(this,"organizedContent"),this.handleOrganizedContentRangeChange([],this.organizedContent,0);for(var e=0;this._freeIterations.length>e;e++)for(var t=this._freeIterations[e],n=0;t._childComponents.length>n;n++){var r=t._childComponents[n];r.cleanupDeletedComponentTree(!0)}this._iterationTemplate=null,this._freeIterations.clear(),this._contentForIteration.clear(),this._iterationForElement.clear(),this.currentIteration=null,this._templateId=null,this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._selectionPointer=null,this.activeIterations.clear(),this._dirtyClassListIterations.clear()}},_expandIterationTemplateParameters:{value:function(){for(var e,t,n,r,i,a,o,s,l,u=this._iterationTemplate,c=this;u.hasParameters();){c=c.ownerComponent,e=c._ownerDocumentPart.template,r=c._ownerDocumentPart.objects,a=u.expandParameters(e,c),n=u.getSerialization().getExternalObjectLabels(),i=u.getInstances(),s=a.labels,t=a.labelsCollisions;for(var h,d=0;h=s[d];d++)o=t&&h in t?t[h]:h,n.indexOf(o)>=0?i[o]=r[h]:(l=e.getObjectMetadata(h),l.owner||(l.owner=r.owner),u.setObjectMetadata(o,l.require,l.label,l.owner))}}},_iterationCreationPromise:{value:null},_createIteration:{value:function(){var e=this,t=(new this.Iteration).initWithRepetition(this);return this._iterationCreationPromise=this._iterationCreationPromise.then(function(){var n=e.element.ownerDocument;e.currentIteration=t;var r=e._iterationTemplate.instantiate(n).then(function(n){t._childComponents=n.childComponents,t._fragment=n.fragment,n.childComponents.forEach(function(t){e.addChildComponent(t)}),n.loadComponentTree().then(function(){e.constructorIteration(t)}).done(),e.currentIteration=null});return r.done(),r.then(null,function(){})}),this._requestedIterations++,t}},constructorIteration:{value:function(){this._createdIterations++,this._createdIterations>=this._requestedIterations&&(this.needsDraw=!0,this._canDraw=!0)}},observeProperty:{value:function(e,t,n,r,i){return"contentAtCurrentIteration"===e||"objectAtCurrentIteration"===e?c(this._contentForIteration,this.currentIteration,t,n,r,i):"currentIteration"===e?t(this.currentIteration):u(this,e,t,n,r,i)}},makePropertyObservable:{value:function(e){return"currentIteration"!==e?n.makePropertyObservable.call(this,e):void 0}},_controllerIterations:{value:null},_drawnIterations:{value:null},_freeIterations:{value:null},_contentForIteration:{value:null},_childComponentsPerIteration:{value:null},handleOrganizedContentRangeChange:{value:function(e,t,n){var r=this.iterations.splice(n,t.length);for(r.forEach(function(e){e.recycle()}),this._freeIterations.addEach(r);this._freeIterations.length<e.length;)this._freeIterations.push(this._createIteration());this.iterations.swap(n,0,e.map(function(e){var t=this._freeIterations.pop();return t.content=e,this._contentForIteration.set(t,e),t},this)),this._updateIndexes(n),this.needsDraw=!0}},_updateIndexes:{value:function(e){for(var t=this.iterations;t.length>e;e++)t[e].index=e}},canDraw:{value:function(){var e=this.canDrawGate.value;return e=e&&this._requestedIterations<=this._createdIterations,e=e&&(this._initialContentDrawn||this._canDrawInitialContent)}},_boundaries:{value:null},_dirtyClassListIterations:{value:null},_requestedIterations:{value:null},_createdIterations:{value:null},_canDrawInitialContent:{value:null},_initialContentDrawn:{value:null},draw:{value:function(){if(this.canDraw()){this._initialContentDrawn||(this._drawInitialContent(),this._initialContentDrawn=!0);for(var e=this._drawnIterations.length-1;e>=0;e--)null===this._drawnIterations[e].index&&this._drawnIterations[e].retractFromDocument();for(var e=0;this.iterations.length>e;e++){var t=this.iterations[e];t._drawnIndex!==t.index&&t.injectIntoDocument(e)}var n=this._dirtyClassListIterations.toArray();this._dirtyClassListIterations.clear(),n.forEach(function(e){e.forEachElement(function(t){e.selected?t.classList.add("selected"):t.classList.remove("selected"),e.active?t.classList.add("active"):t.classList.remove("active"),t.classList.remove("no-transition")},this)},this)}}},_drawInitialContent:{value:function(){var e=this.element;e.innerHTML="";var t=e.ownerDocument.createTextNode("");e.appendChild(t),this._boundaries.push(t)}},_updateDrawnIndexes:{value:function(e){for(var t=this._drawnIterations;t.length>e;e++)t[e]._drawnIndex=e}},_selectionPointer:{value:null},handleIsSelectionEnabledChange:{value:function(e){e?this._enableSelectionTracking():this._disableSelectionTracking()}},_enableSelectionTracking:{value:function(){this.element.addEventListener("touchstart",this,!0),this.element.addEventListener("mousedown",this,!0)}},_disableSelectionTracking:{value:function(){this.element.removeEventListener("touchstart",this,!0),this.element.removeEventListener("mousedown",this,!0)}},_observeSelectionPointer:{value:function(e){this._selectionPointer=e,this.eventManager.claimPointer(e,this);var t=this.element.ownerDocument;t.addEventListener("touchend",this,!1),t.addEventListener("touchcancel",this,!1),t.addEventListener("mouseup",this,!1)}},_ignoreSelectionPointer:{value:function(){this.eventManager.isPointerClaimedByComponent(this._selectionPointer,this)&&this.eventManager.forfeitPointer(this._selectionPointer,this),this._selectionPointer=null,this.activeIterations.clear();var e=this.element.ownerDocument;e.removeEventListener("touchend",this,!1),e.removeEventListener("touchcancel",this,!1),e.removeEventListener("mouseup",this,!1)}},captureMousedown:{value:function(e){this._observeSelectionPointer("mouse");var t=this._findIterationContainingElement(e.target);t?t.active=!0:this._ignoreSelectionPointer()}},captureTouchstart:{value:function(e){if(null==this._selectionPointer){this._observeSelectionPointer(e.changedTouches[0].identifier);var t=this._findIterationContainingElement(e.target);t?t.active=!0:this._ignoreSelectionPointer()}}},handleTouchend:{value:function(e){for(var t=0;e.changedTouches.length>t&&!this._endSelectionOnTarget(e.changedTouches[t].identifier,e.target);t++);}},handleTouchcancel:{value:function(){this._ignoreSelectionPointer()}},handleMouseup:{value:function(e){this._endSelectionOnTarget("mouse",e.target)}},_endSelectionOnTarget:{value:function(e,t){if(e===this._selectionPointer){if(this.eventManager.isPointerClaimedByComponent(this._selectionPointer,this)){var n=this._findIterationContainingElement(t);n&&(n.active=!1,n.selected||(n.selected=!0))}return this._ignoreSelectionPointer(),!0}}},_findIterationContainingElement:{value:function(e){for(var t;e;){if(e===this.element)return this._iterationForElement.get(t);t=e,e=e.parentNode}}},Iteration:{value:h,serializable:!1}})}}),montageDefine("d2712f2","composer/press-composer",{dependencies:["montage","composer/composer","core/event/mutable-event"],factory:function(e,t){var n=e("montage").Montage,r=e("composer/composer").Composer,i=e("core/event/mutable-event").MutableEvent,a=t.PressComposer=r.specialize({load:{value:function(){window.Touch?this._element.addEventListener("touchstart",this,!0):this._element.addEventListener("mousedown",this,!0)}},unload:{value:function(){window.Touch?this._element.removeEventListener("touchstart",this):this._element.removeEventListener("mousedown",this)}},delegate:{value:null},cancelPress:{value:function(){return this._state===a.PRESSED?(this._dispatchPressCancel(),this._endInteraction(),!0):!1}},addEventListener:{value:function(e,t,n){r.addEventListener.call(this,e,t,n),"longPress"===e&&(this._shouldDispatchLongPress=!0)}},UNPRESSED:{value:0},PRESSED:{value:1},CANCELLED:{value:2},_state:{enumerable:!1,value:0},state:{get:function(){return this._state}},_shouldDispatchLongPress:{enumerable:!1,value:!1},_longPressThreshold:{enumerable:!1,value:1e3},longPressThreshold:{get:function(){return this._longPressThreshold},set:function(e){this._longPressThreshold!==e&&(this._longPressThreshold=e)}},_longPressTimeout:{enumberable:!1,value:null},_observedPointer:{enumerable:!1,value:null},_startInteraction:{enumerable:!1,value:function(e){if("enabled"in this.component&&!this.component.enabled||null!==this._observedPointer)return!1;var t,n=0;if("touchstart"===e.type){for(t=e.changedTouches.length;t>n;n++)if(!this.component.eventManager.componentClaimingPointer(e.changedTouches[n].identifier)){this._observedPointer=e.changedTouches[n].identifier;break}if(null===this._observedPointer)return!1;document.addEventListener("touchend",this,!1),document.addEventListener("touchcancel",this,!1)}else"mousedown"===e.type&&(this._observedPointer="mouse",document.addEventListener("mouseup",this,!1),document.addEventListener("click",this,!1));this._element.addEventListener("dragstart",this,!1),this.component.eventManager.claimPointer(this._observedPointer,this),this._dispatchPressStart(e)}},_interpretInteraction:{value:function(e){var t,n,r;if(null===this._observedPointer)return this._endInteraction(e),void 0;for(t=!this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this),n=e.target;n!==this._element&&n&&n.parentNode;)n=n.parentNode;if(r=n===this._element,t&&"click"===e.type)return e.preventDefault(),this._endInteraction(e),void 0;if("mouseup"===e.type){if(!t&&r)return this._dispatchPress(e),this._endInteraction(e),void 0;if(!t&&!r)return this._dispatchPressCancel(e),this._endInteraction(e),void 0;t&&!r&&this._endInteraction(e)}}},_endInteraction:{value:function(e){e&&"touchend"!==e.type&&"touchcancel"!==e.type?e&&"click"!==e.type&&"mouseup"!==e.type||(document.removeEventListener("click",this),document.removeEventListener("mouseup",this)):(document.removeEventListener("touchend",this),document.removeEventListener("touchcancel",this)),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.component.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._state=a.UNPRESSED}},_changedTouchisObserved:{value:function(){if(null===this._observedPointer)return!1;for(var e=0,t=event.changedTouches.length;t>e;e++)if(event.changedTouches[e].identifier===this._observedPointer)return e;return!1}},surrenderPointer:{value:function(e,t){var n=this.callDelegateMethod("surrenderPointer",e,t);return void 0!==n&&n===!1?!1:(this._dispatchPressCancel(),!0)}},captureTouchstart:{value:function(e){this._startInteraction(e)}},handleTouchend:{value:function(e){return null===this._observedPointer?(this._endInteraction(e),void 0):(this._changedTouchisObserved(e.changedTouches)!==!1&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?this._dispatchPress(e):e.preventDefault(),this._endInteraction(e)),void 0)}},handleTouchcancel:{value:function(e){(null===this._observedPointer||this._changedTouchisObserved(e.changedTouches)!==!1)&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this._dispatchPressCancel(e),this._endInteraction(e))}},captureMousedown:{value:function(e){this._startInteraction(e)}},handleClick:{value:function(e){this._interpretInteraction(e)}},handleMouseup:{value:function(e){this._interpretInteraction(e)}},handleDragstart:{value:function(e){this._dispatchPressCancel(e),this._endInteraction()}},_createPressEvent:{enumerable:!1,value:function(e,t){var n,r;return t||(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!0,!0,null)),n=new o,n.event=t,n.type=e,n.pointer=this._observedPointer,n.targetElement=t.target,t.changedTouches&&(r=this._changedTouchisObserved(t.changedTouches))!==!1&&(n.touch=t.changedTouches[r]),n}},_dispatchPressStart:{enumerable:!1,value:function(e){if(this._state=a.PRESSED,this.dispatchEvent(this._createPressEvent("pressStart",e)),this._shouldDispatchLongPress){var t=this;this._longPressTimeout=setTimeout(function(){t._dispatchLongPress()},this._longPressThreshold)}}},_dispatchPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this.dispatchEvent(this._createPressEvent("press",e)),this._state=a.UNPRESSED}},_dispatchLongPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(this.dispatchEvent(this._createPressEvent("longPress",e)),this._longPressTimeout=null)}},_dispatchPressCancel:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this._state=a.CANCELLED,this.dispatchEvent(this._createPressEvent("pressCancel",e))}}}),o=function(){var e,t,r,a,o,s;for(e=i.specialize({type:{value:"press"},_event:{enumerable:!1,value:null},event:{get:function(){return this._event},set:function(e){this._event=e}},_touch:{enumerable:!1,value:null},touch:{get:function(){return this._touch},set:function(e){this._touch=e}}}),t=["altKey","ctrlKey","metaKey","shiftKey","cancelBubble","currentTarget","defaultPrevented","eventPhase","timeStamp","preventDefault","stopImmediatePropagation","stopPropagation"],r=["clientX","clientY","pageX","pageY","screenX","screenY","target"],a=function(e){return{get:function(){return this._event[e]}}},o=function(e){return{get:function(){return this._touch?this._touch[e]:this._event[e]}}},s=t.length-1;s>=0;s--)n.defineProperty(e,t[s],a(t[s]));for(s=r.length-1;s>=0;s--)n.defineProperty(e,r[s],o(r[s]));return e}()}}),montageDefine("8023de4","ui/button.reel/button",{dependencies:["ui/native-control","montage/composer/press-composer","montage/collections/dict"],factory:function(e,t){var n=e("ui/native-control").NativeControl,r=e("montage/composer/press-composer").PressComposer,i=e("montage/collections/dict"),a=t.Button=n.specialize({_preventFocus:{enumerable:!1,value:!1},preventFocus:{get:function(){return this._preventFocus},set:function(e){this._preventFocus=e===!0?!0:!1}},enabled:{dependencies:["disabled"],get:function(){return!this._disabled},set:function(e){this.disabled=!e}},converter:{value:null},_labelNode:{value:void 0,enumerable:!1},_label:{value:void 0,enumerable:!1},label:{get:function(){return this._label},set:function(e){if(e&&e.length>0&&this.converter)try{e=this.converter.convert(e),this.error&&(this.error=null)}catch(t){this.error=t}this._label=e,this._isInputElement&&(this._value=e),this.needsDraw=!0}},setLabelInitialValue:{value:function(e){void 0===this._label&&(this._label=e)}},holdThreshold:{get:function(){return this._pressComposer.longPressThreshold},set:function(e){this._pressComposer.longPressThreshold=e}},_pressComposer:{enumberable:!1,value:null},_active:{enumerable:!1,value:!1},active:{get:function(){return this._active},set:function(e){this._active=e,this.needsDraw=!0}},blur:{value:function(){this._element.blur()}},focus:{value:function(){this._element.focus()}},constructor:{value:function(){this.super(),this._pressComposer=new r,this._pressComposer.longPressThreshold=this.holdThreshold,this.addComposer(this._pressComposer)}},prepareForActivationEvents:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1),this._pressComposer.addEventListener("press",this,!1),this._pressComposer.addEventListener("pressCancel",this,!1)}},addEventListener:{value:function(e,t,n){this.super(e,t,n),"hold"===e&&this._pressComposer.addEventListener("longPress",this,!1)}},handlePressStart:{value:function(e){this.active=!0,e.touch&&document.addEventListener("touchmove",this,!1),this._preventFocus||this._element.focus()}},handlePress:{value:function(){this.active=!1,this._dispatchActionEvent(),document.removeEventListener("touchmove",this,!1)}},handleKeyup:{value:function(e){32===e.keyCode&&(this.active=!1,this._dispatchActionEvent())}},handleLongPress:{value:function(){this._pressComposer.cancelPress();var e=document.createEvent("CustomEvent");e.initCustomEvent("hold",!0,!0,null),this.dispatchEvent(e)}},handlePressCancel:{value:function(){this.active=!1,document.removeEventListener("touchmove",this,!1)}},handleTouchmove:{value:function(e){e.preventDefault()}},_isInputElement:{value:!1,enumerable:!1},enterDocument:{value:function(e){n.enterDocument&&n.enterDocument.apply(this,arguments),e&&(this._isInputElement="INPUT"===this.originalElement.tagName,this._isInputElement?(Object.defineProperty(this,"value",{get:function(){return this._label},set:function(e){this.label=e}}),void 0===this._label&&(this._label=this.originalElement.value)):(this.originalElement.firstChild||this.originalElement.appendChild(document.createTextNode("")),this._labelNode=this.originalElement.firstChild,this.setLabelInitialValue(this._labelNode.data),void 0===this._label&&(this._label=this._labelNode.data)),this.element.setAttribute("role","button"),this.element.addEventListener("keyup",this,!1))}},_drawLabel:{enumerable:!1,value:function(e){this._isInputElement?this._element.setAttribute("value",e):this._labelNode.data=e}},draw:{value:function(){this.super(),this._disabled?this._element.classList.add("disabled"):this._element.classList.remove("disabled"),this._active?this._element.classList.add("active"):this._element.classList.remove("active"),this._drawLabel(this.label)}},_detail:{value:null},detail:{get:function(){return null===this._detail&&(this._detail=new i),this._detail}},createActionEvent:{value:function(){var e,t=document.createEvent("CustomEvent");return e=this._detail,t.initCustomEvent("action",!0,!0,e),t}}});a.addAttributes({autofocus:{value:!1,dataType:"boolean"},disabled:{value:!1,dataType:"boolean"},form:null,formaction:null,formenctype:null,formmethod:null,formnovalidate:{dataType:"boolean"},formtarget:null,type:{value:"button"},name:null,value:null})}}),montageDefine("5d55b4c","model/remotemediator",{dependencies:["montage/core/core","montage/core/application"],factory:function(e,t){var n=e("montage/core/core").Montage,r=e("montage/core/application").application,i="gp967ctbkuhh32ztc2knmj9p";t.Remotemediator=n.create(n,{TRAILERS_FEED:{value:"https://gdata.youtube.com/feeds/api/videos?q=%s+official+trailer&max-results=1&v=2&alt=json"},BOXOFFICE_FEED:{value:"http://api.rottentomatoes.com/api/public/v1.0/lists/movies/box_office.json?limit=15&country=us&apikey="+i},UPCOMING_FEED:{value:"http://api.rottentomatoes.com/api/public/v1.0/lists/movies/upcoming.json?page_limit=30&page=1&country=us&apikey="+i},TOPRENTALS_FEED:{value:"http://api.rottentomatoes.com/api/public/v1.0/lists/dvds/top_rentals.json?limit=20&country=us&apikey="+i},INTHEATERS_FEED:{value:"http://api.rottentomatoes.com/api/public/v1.0/lists/movies/in_theaters.json?page_limit=30&page=1&country=us&apikey="+i},load:{value:function(){this.loadLatestBoxofficeMovies(),this.loadUpcomingMovies(),this.loadTopDvdRentals(),this.loadInTheaters()}},jsonpCall:{value:function(e,t){var n="scriptCallback"+t.uuid.replace(/-/g,"_"),r=document.createElement("script");window[n]=function(){delete window[n],r.parentNode&&r.parentNode.removeChild(r),t.apply(this,arguments)},r.type="text/javascript",r.src=e+"&callback="+n,document.head.appendChild(r)}},searchYoutubeTrailer:{value:function(e,t){for(var n,r=e.split(" "),i="",a=0,o=r.length;o>a;a++)n=r[a],0!=a&&(i+="+"),i+=n;var s=this.TRAILERS_FEED.replace("%s",i);this.jsonpCall(s,function(e){t(e.feed.entry[0].media$group.yt$videoid.$t)})}},loadLatestBoxofficeMovies:{value:function(){this.jsonpCall(this.BOXOFFICE_FEED,this.latestBoxofficeMoviesCallback)}},latestBoxofficeMoviesCallback:{value:function(e){var t=e.movies;t?r.dispatchEventNamed("remoteDataReceived",!0,!0,{type:"latestBoxofficeMovies",data:t}):alert("flixter api error, please try again")}},loadUpcomingMovies:{value:function(){this.jsonpCall(this.UPCOMING_FEED,this.upcomingMoviesCallback)}},upcomingMoviesCallback:{value:function(e){var t=e.movies;t?r.dispatchEventNamed("remoteDataReceived",!0,!1,{type:"upcomingMovies",data:t}):alert("flixter api error, please try again")}},loadTopDvdRentals:{value:function(){this.jsonpCall(this.TOPRENTALS_FEED,this.topDvdRentalsCallback)}},topDvdRentalsCallback:{value:function(e){var t=e.movies;t?r.dispatchEventNamed("remoteDataReceived",!0,!1,{type:"topDvdRentals",data:t}):alert("flixter api error, please try again")}},loadInTheaters:{value:function(){this.jsonpCall(this.INTHEATERS_FEED,this.inTheatersCallback)}},inTheatersCallback:{value:function(e){var t=e.movies;t?r.dispatchEventNamed("remoteDataReceived",!0,!1,{type:"inTheaters",data:t}):alert("flixter api error, please try again")}}})}}),montageDefine("15a68c4","ui/toggle-button.reel/toggle-button",{dependencies:["ui/button.reel"],factory:function(e,t){var n=e("ui/button.reel").Button;t.ToggleButton=n.specialize({hasTemplate:{value:!0},_pressed:{value:!1},pressed:{get:function(){return this._pressed},set:function(e){this._pressed=!!e,this._label=this._pressed?this._pressedLabel:this._unpressedLabel,this.needsDraw=!0}},_unpressedLabel:{value:null},unpressedLabel:{get:function(){return this._unpressedLabel},set:function(e){this._unpressedLabel=e,this._pressed||(this.label=this._unpressedLabel,this.needsDraw=!0)}},_pressedLabel:{value:null},pressedLabel:{get:function(){return this._pressedLabel},set:function(e){this._pressedLabel=e,this._pressed&&(this.label=this._pressedLabel,this.needsDraw=!0)}},_pressedClass:{value:"pressed"},pressedClass:{get:function(){return this._pressedClass},set:function(e){this._pressedClass=e,this._pressed&&(this.needsDraw=!0)}},label:{get:function(){return Object.getPropertyDescriptor(n,"label").get.call(this)},set:function(e){Object.getPropertyDescriptor(n,"label").set.call(this,e),this._pressed===!0&&this._label===this._unpressedLabel?this.pressed=!1:this._pressed===!1&&this._label===this._pressedLabel&&(this.pressed=!0)}},setLabelInitialValue:{value:function(e){null===this._label&&(this._label=e)}},enterDocument:{value:function(e){this.super(e),e&&(null===this._unpressedLabel&&null!==this._label&&(this._unpressedLabel=this._label),null===this._pressedLabel&&null!==this._label&&(this._pressedLabel=this._label))}},draw:{value:function(){this.super(),this._pressed?(this._element.classList.add(this._pressedClass),this._element.setAttribute("aria-pressed",!0)):(this._element.classList.remove(this._pressedClass),this._element.setAttribute("aria-pressed",!1))}},_dispatchActionEvent:{value:function(){this.pressed=!this._pressed,this.super()}},toggle:{value:function(){this.pressed=!this._pressed}}})}}),montageDefine("15a68c4","ui/scroll-bars.reel/scroll-bars.html",{text:'<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=scroll-bars.css>\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"matte-scroll-bars"},"_top":{"#":"top"},"_bottomClip":{"#":"bottom-clip"},"_bottom":{"#":"bottom"},"_left":{"#":"left"},"_rightClip":{"#":"right-clip"},"_right":{"#":"right"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=matte-scroll-bars class=matte-ScrollBars>\n        <div data-montage-id=top class=matte-ScrollBars-top></div>\n        <div data-montage-id=bottom-clip class=matte-ScrollBars-bottomClip>\n            <div data-montage-id=bottom class=matte-ScrollBars-bottom></div>\n        </div>\n        <div data-montage-id=left class=matte-ScrollBars-left></div>\n        <div data-montage-id=right-clip class=matte-ScrollBars-rightClip>\n            <div data-montage-id=right class=matte-ScrollBars-right></div>\n        </div>\n    </div>\n</body>\n</html>'}),montageDefine("5d55b4c","ui/moviepopup.reel/moviepopup.html",{text:'<!DOCTYPE html>\n\n<html>\n    <head>\n        <meta http-equiv=content-type content="text/html; charset=utf-8">\n        <link rel=stylesheet type="text/css" href=moviepopup.css>\n        <script src="http://www.youtube.com/player_api"></script>\n        <script type="text/montage-serialization">{"closeButton":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"close-button"}},"listeners":[{"type":"action","listener":{"@":"owner"}}]},"owner":{"properties":{"element":{"#":"moviepopup"},"player":{"#":"iframe"}}}}</script>\n    </head>\n\n    <body>\n        <div data-montage-id=moviepopup class=moviepopup>\n            <button data-montage-id=close-button class="button button-close">✕</button>\n            <iframe data-montage-id=iframe class=montage-youtube-player type="text/html" width=1024 height=616 frameborder=0 allowfullscreen=""></iframe>​\n        </div>\n    </body>\n\n</html>'}),montageDefine("15a68c4","ui/button.reel/button",{dependencies:["native/ui/button.reel"],factory:function(e,t){var n=e("native/ui/button.reel").Button;t.Button=n.specialize({hasTemplate:{value:!0},constructor:{value:function(){this.super(),this.classList.add("matte-Button")}}})}}),montageDefine("15a68c4","ui/button.reel/button.html",{text:"<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=button.css>\n</head>\n<body>\n</body>\n</html>"});
bundleLoaded("index.html.bundle-1-2.js")